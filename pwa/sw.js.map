{"version":3,"file":"sw.js","sources":["../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../src/worker/workerEvent.js","../src/sw.js"],"sourcesContent":["export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export class WorkerEvent extends CustomEvent {\r\n    constructor (_self, _msg) {\r\n        super(_msg.data.msg, {\r\n            detail: _msg.data.param\r\n        });\r\n        Object.defineProperties(this, {\r\n            ports: {\r\n                value: _msg.ports,\r\n                writable: false\r\n            },\r\n            oriMsg: {\r\n                value: _msg,\r\n                writable: false\r\n            },\r\n            worker: {\r\n                value: _self,\r\n                writable: false\r\n            },\r\n            msgType: {\r\n                value: _msg.data.msg,\r\n                writable: false\r\n            },\r\n            timeStamp: {\r\n                value: Date.now(),\r\n                writable: false\r\n            }\r\n        });\r\n    }\r\n\r\n    broadcasrAck(_msg) {\r\n        const data = {\r\n            msg: this.msgType,\r\n            timeStamp: this.timeStamp,\r\n            ret: _msg\r\n        };\r\n        this.worker.clients.matchAll().then(function (clients) {\r\n            clients.forEach(function (client) {\r\n                client.postMessage(data);\r\n            });\r\n        });\r\n    }\r\n\r\n    ack(_msg) {\r\n        if (this.ports[0]) {\r\n            this.ports[0].postMessage({\r\n                msg: this.msgType,\r\n                timeStamp: this.timeStamp,\r\n                ret: _msg\r\n            });\r\n        } else {\r\n            this.broadcasrAck(_msg);\r\n        }\r\n    }\r\n}\r\n","const appName = \"SeasonStudioKit\";\r\nconst cacheName = `${appName}-1.00.3`;\r\n\r\nself.importScripts(\"./jslib/runtime.js\");\r\nconst { regeneratorRuntime } = self;\r\n\r\nimport { WorkerEvent } from \"./worker/workerEvent\";\r\n\r\nself.addEventListener('install', (e) => {\r\n    console.log(\"#[Worker] installing...\");\r\n    e.waitUntil((async () => {\r\n        const cache = await caches.open(cacheName);\r\n        //cache.addAll([]);\r\n        self.skipWaiting();\r\n        console.log(\"#[Worker] installed\");\r\n    })());\r\n});\r\n\r\nself.addEventListener('activate', (event) => {\r\n    console.log(\"#[Worker] activate\");\r\n    event.waitUntil(\r\n        caches.keys().then(cacheNames => {\r\n            return Promise.all(\r\n                cacheNames\r\n                    .filter(itemName => itemName.startsWith(appName) && (itemName !== cacheName))\r\n                    .map(itemName => caches.delete(itemName))\r\n            ).then(() => self.clients.claim());\r\n        })\r\n    );\r\n});\r\n\r\nself.addEventListener(\"fetch\", event => {\r\n    event.respondWith((async () => {\r\n        try {\r\n            let resp = await caches.match(event.request);\r\n            let reqUrl = String(event.request.url);\r\n            let realReq = (reqUrl.indexOf(\"/.pwa.vir\") < 0);\r\n            if (!resp) {\r\n                if (reqUrl.indexOf(\"/.pwa.vir/\") >= 0) {\r\n                    resp = await caches.match(reqUrl.replace(\"/.pwa.vir/\", \"/.pwa.vir.keep/\"));\r\n                }\r\n            }\r\n            if (!resp && realReq) {\r\n                resp = await fetch(event.request);\r\n            }\r\n            if (!(resp instanceof Response)) {\r\n                throw new Error(`${typeof resp}, ${realReq}`);\r\n            } else if (resp.ok) {\r\n                const cache = await caches.open(cacheName);\r\n                cache && (reqUrl.indexOf(\"/pwa/pkgs/\") < 0) && cache.add(event.request);\r\n            }\r\n            return resp;\r\n        } catch(error) {\r\n            console.error(\"#[Worker] Fail in fetch: \", event.request.url, error);\r\n            return new Response(new Blob([\"\"]), { \"status\" : 404 });\r\n        }\r\n    })());\r\n});\r\n\r\nself.addEventListener(\"message\", event => {\r\n    self.dispatchEvent(new WorkerEvent(self, event));\r\n});\r\n\r\nself.addEventListener(\"map-virtual-response\", async (event) => {\r\n    const cache = await caches.open(cacheName);\r\n    if (cache) {\r\n        const mapTree = event.detail;\r\n        let origin = location.origin;\r\n        origin.endsWith(\"/\") || (origin += \"/\");\r\n        if (mapTree) {\r\n            for (let path in mapTree) {\r\n                let item = mapTree[path];\r\n                path = path.startsWith(\":\") ? `${origin}.pwa.vir.keep/${path.substr(1)}` : `${origin}.pwa.vir/${path}`;\r\n                (item instanceof Blob) || (item = new Blob([item]));\r\n                await cache.put(\r\n                    path, \r\n                    new Response(item, Object.assign({ \r\n                        status: 200, \r\n                        headers: Object.assign({\"Content-Length\": item.size}, item.respHeaders)\r\n                    }, item.respStatus))\r\n                );\r\n            }\r\n        }\r\n        event.ack(0);\r\n    } else {\r\n        event.ack(-1);\r\n    }\r\n});\r\n\r\nself.addEventListener(\"clear-virtual-response\", async (event) => {\r\n    const cache = await caches.open(cacheName);\r\n    if (cache) {\r\n        const isKeepAlive = event.detail.keepAlive;\r\n        await Promise.all((await cache.keys()).map(item => \r\n            (String(item.url).indexOf(isKeepAlive ? \".pwa.vir.keep/\" : \".pwa.vir/\") >= 0) ? cache.delete(item) : undefined\r\n        ));\r\n        event.ack(0);\r\n    } else {\r\n        event.ack(-1);\r\n    }\r\n});\r\n\r\nself.addEventListener(\"reload-application\", async (event) => {\r\n    const cache = await caches.open(cacheName);\r\n    if (cache) {\r\n        await Promise.all((await cache.keys()).map(item => cache.delete(item)));\r\n        event.ack(0);\r\n    } else {\r\n        event.ack(-1);\r\n    }\r\n});"],"names":["setPrototypeOf","assertThisInitialized","_isNativeReflectConstruct","isNativeReflectConstruct","isNativeFunction","construct","getPrototypeOf","WorkerEvent","_self","_msg","data","msg","detail","param","Object","defineProperties","ports","value","writable","oriMsg","worker","msgType","timeStamp","Date","now","ret","clients","matchAll","then","forEach","client","postMessage","broadcasrAck","CustomEvent","appName","cacheName","self","importScripts","regeneratorRuntime","addEventListener","e","console","log","waitUntil","caches","open","skipWaiting","event","keys","cacheNames","Promise","all","filter","itemName","startsWith","map","claim","respondWith","match","request","resp","reqUrl","String","url","realReq","indexOf","replace","fetch","Response","Error","ok","cache","add","error","Blob","dispatchEvent","mapTree","origin","location","endsWith","path","item","substr","put","assign","status","headers","size","respHeaders","respStatus","ack","isKeepAlive","keepAlive","undefined"],"mappings":"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"}