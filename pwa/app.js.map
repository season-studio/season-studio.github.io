{"version":3,"file":"app.js","sources":["../submodules/toolkits.js/src/tip/public.js","../submodules/toolkits.js/src/tip/tip.js","../submodules/toolkits.js/src/tip/confirm.js","../submodules/toolkits.js/src/tip/input.js","../submodules/toolkits.js/src/tip/popup.js","../submodules/toolkits.js/src/tip/index.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/regenerator/index.js","../src/client/appWorker.js","../submodules/toolkits.js/src/classDefiner.js","../src/client/welcomeApp.js","../submodules/toolkits.js/src/domKits.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../submodules/toolkits.js/src/urlParams.js","../src/client/waitTip.js","../src/client/packageManager.js","../src/app.js"],"sourcesContent":["export const $private = Symbol(\"season-tip-private\");\r\nexport const $resolve = Symbol(\"season-tip-resolve\");\r\nexport const $options = Symbol(\"season-tip-options\");\r\nexport const $timerId = Symbol(\"season-tip-timerid\");\r\nexport const $result = Symbol(\"season-tip-result\");\r\n\r\nexport const FlexAlignMap = {\r\n    \"center\": \"center\",\r\n    \"left\": \"flex-start\",\r\n    \"right\": \"flex-end\",\r\n    \"top\": \"flex-start\",\r\n    \"bottom\": \"flex-end\",\r\n    \"start\": \"flex-start\",\r\n    \"end\": \"flex-end\"\r\n};\r\n\r\n/**\r\n * get the top zindex in the current view\r\n */\r\nexport function getTopZIndex() {\r\n    return [...document.body.querySelectorAll(\"*\")].reduce((r, e) => \r\n                Math.max(r, Number(window.getComputedStyle(e).zIndex) || 0), \r\n            0) + 1;\r\n}\r\n\r\n/**\r\n * set an element to the top z-index\r\n * @param {*} _element \r\n */\r\nexport function setTopZIndex(_element) {\r\n    let topZ = getTopZIndex();\r\n    if ((Number(_element.style.zIndex) !== (topZ - 1)) || (topZ === 1)) {\r\n        _element.style.zIndex = topZ;\r\n    }\r\n}\r\n\r\nconst transitionEndEventName = {\r\n    transition: 'transitionend',\r\n    MozTransition: 'transitionend',\r\n    WebkitTransition: 'webkitTransitionEnd',\r\n    OTransition: 'oTransitionEnd otransitionend'\r\n}\r\nlet transitionEndEvent = undefined;\r\n\r\nfor (let name in transitionEndEventName) {\r\n    if (document.body.style[name] !== undefined) {\r\n        transitionEndEvent = transitionEndEventName[name];\r\n        break;\r\n    }\r\n}\r\n\r\n/**\r\n * close the tip\r\n * must be call as the method of an instance\r\n * @param {*} _result the value as the result of the promise, only effected when the tip show as a promise\r\n */\r\nexport function close(_result) {\r\n    this[$result] = _result;\r\n    const obj = this[$private];\r\n    const opt = this[$options];\r\n    const fn = () => {\r\n        (typeof obj.remove === \"function\") && setTimeout(() => obj.remove(), 0);\r\n        this[$timerId] && (clearTimeout(this[$timerId]), this[$timerId] = undefined);\r\n        const onclose = (opt && opt.onclose);\r\n        typeof onclose === \"function\" && onclose(this, _result);\r\n        typeof this[$resolve] === \"function\" && (this[$resolve](_result), delete this[$resolve]);\r\n    };\r\n    if ((obj instanceof Element) && obj.isConnected) {\r\n        if (transitionEndEvent && (0 !== opt.fadeOutTime)) {\r\n            if (!isNaN(opt.fadeOutTime)) {\r\n                obj.setAttribute(\"style\", `--fadeout-time:${opt.fadeOutTime}s;${obj.getAttribute(\"style\")}`);\r\n            }\r\n            obj.className = `${obj.className} -season-tip-fadeout`;\r\n            obj.addEventListener(transitionEndEvent, fn, { once: true });\r\n        } else {\r\n            fn();\r\n        }\r\n    }\r\n}\r\n","import { $private, $resolve, $options, $timerId, setTopZIndex, close } from \"./public\";\r\n\r\nconst SYM_TYPE_ATTR = \"season-tip-type\";\r\nconst TIP_SELECTOR = `${SYM_TYPE_ATTR}=\"tip\"`;\r\nconst HTML_TIP_CONTAINER = `<div class=\"-season-tip-container\" ${TIP_SELECTOR} />`;\r\n\r\n/**\r\n * show tip\r\n * @param {*} _tip the text of the tip\r\n * @param {String|Object} _opt the type or the option object, this parameter can be ignore for normal tip\r\n * @param {String} [_opt.type=undefined] the type of the tip, can be set as \"info\", \"warn\", \"error\", \"normal\"\r\n * @param {Boolean} [_opt.closable=false] if the tip can be close manually\r\n * @param {Number} [_opt.timeout] timeout for close the tip automatically, the default value is 0ms if the closable is set to true, else is 3000ms\r\n * @return {tip} the instance of the tip\r\n */\r\nexport default function tip(_tip, _opt) {\r\n    // check the parameters\r\n    _opt = _opt || { type: \"normal\" };\r\n    (typeof _opt !== \"object\") && (_opt = { type: String(_opt) });\r\n\r\n    if (this instanceof tip) {\r\n        // construct the instance\r\n        const div = document.createElement(\"div\");\r\n        if (div) {\r\n            this[$private] = div;\r\n            this[$options] = _opt;\r\n            div.setAttribute(\"class\", \"-season-tip-box\");\r\n            div.setAttribute(\"d-season-tip-type\", _opt.type||\"normal\");\r\n            _opt.customTag && div.setAttribute(_opt.customTag, _opt.customTag);\r\n            div.insertAdjacentHTML(\"beforeend\", `<div class=\"-season-tip-icon\"></div><div class=\"-season-tip-text\">${String(_tip || \"\").replace(\"\\n\", \"<br />\")}</div>`);\r\n            if (_opt.closable) {\r\n                div.insertAdjacentHTML(\"beforeend\", '<div class=\"-season-tip-close-button\" />');\r\n                const closeBtn = div.querySelector(\".-season-tip-close-button\");\r\n                closeBtn && closeBtn.addEventListener(\"click\", close.bind(this));\r\n            }\r\n        }\r\n    } else {\r\n        // create an instance and show\r\n        const obj = new tip(_tip, _opt);\r\n        obj && obj.show();\r\n        return obj;\r\n    }\r\n}\r\n\r\n/**\r\n * declare the prototype of the tip class\r\n */\r\ntip.prototype = {\r\n    close,\r\n    show(_parent) {\r\n        const div = this[$private];\r\n        if ((this instanceof tip) && div && (!div.isConnected)) {\r\n            // prepare the container\r\n            (_parent instanceof HTMLElement) || (_parent = document.body);\r\n            let container = _parent.querySelector(`[${TIP_SELECTOR}]`);\r\n            if (!container) {\r\n                _parent.insertAdjacentHTML(\"afterbegin\", HTML_TIP_CONTAINER);\r\n                container = _parent.querySelector(`[${TIP_SELECTOR}]`);\r\n            }\r\n            // show\r\n            if (container) {\r\n                setTopZIndex(container);\r\n                container.insertAdjacentElement(\"afterbegin\", div);\r\n                setTimeout(() => div.className = \"-season-tip-box -season-tip-fadein\", 0);\r\n                const timeout = (Number(this[$options].timeout) || (this[$options].closable ? 0 : 3000));\r\n                timeout && (this[$timerId] = setTimeout(close.bind(this), timeout));\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { $private, $resolve, $options, $timerId, FlexAlignMap, setTopZIndex, close } from \"./public\";\r\n\r\nconst IconCollection = {\r\n    info: '<svg viewBox=\"0 0 96 96\" xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" stroke=\"#40a9ff\" stroke-width=\"4\"><g><path d=\"M47.979 10C27.0038 10 10 27.0038 10 47.979 10 68.9542 27.0038 85.958 47.979 85.958 68.9542 85.958 85.958 68.9542 85.958 47.979 85.9674 27.0132 68.9788 10.0094 48.013 10 48.0017 10 47.9903 10 47.979 10ZM47.979 83.958C28.1083 83.958 12 67.8497 12 47.979 12 28.1083 28.1083 12 47.979 12 67.8497 12 83.958 28.1083 83.958 47.979 83.9354 67.8403 67.8403 83.9354 47.979 83.958Z\"/><path d=\"M49 35 41 35 41 37 47 37 47 67 40 67 40 69 56 69 56 67 49 67 49 35Z\"/><circle cx=\"46.814\" cy=\"26.5\" r=\"2.25\"/></g></svg>',\r\n    ok: '<svg viewBox=\"0 0 96 96\" xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" stroke=\"#0b0\" stroke-width=\"4\"><g><path d=\"M48 10C27.0071 9.99393 9.98408 27.0071 9.978 48 9.97193 68.9929 26.9851 86.0159 47.978 86.022 68.9709 86.0281 85.9939 69.0149 86 48.022 86 48.018 86 48.014 86 48.01 86.011 27.0287 69.0113 10.011 48.03 10 48.02 10 48.01 10 48 10ZM48 84.021C28.1117 84.0271 11.9841 67.9093 11.978 48.021 11.9719 28.1327 28.0897 12.0051 47.978 11.999 67.8663 11.9929 83.9939 28.1107 84 47.999 84 48.0037 84 48.0083 84 48.013 83.9802 67.8888 67.8758 83.9981 48 84.024Z\"/><path d=\"M41.5 60.086 29 47.586 27.586 49 41.5 62.914 70.914 33.5 69.5 32.086 41.5 60.086Z\"/></g></svg>',\r\n    error: '<svg width=\"26\" height=\"26\" viewBox=\"0 0 96 96\" xmlns=\"http://www.w3.org/2000/svg\" stroke=\"red\" stroke-width=\"4\"><g><path d=\"M48 10C27.0071 9.99393 9.98408 27.0071 9.978 48 9.97193 68.9929 26.9851 86.0159 47.978 86.022 68.9709 86.0281 85.9939 69.0149 86 48.022 86 48.018 86 48.014 86 48.01 86.011 27.0287 69.0113 10.011 48.03 10 48.02 10 48.01 10 48 10ZM48 84.021C28.1117 84.0271 11.9841 67.9093 11.978 48.021 11.9719 28.1327 28.0897 12.0051 47.978 11.999 67.8663 11.9929 83.9939 28.1107 84 47.999 84 48.0037 84 48.0083 84 48.013 83.9802 67.8888 67.8758 83.9981 48 84.024Z\"/><path d=\"M62.041 32.557 47.998 46.6 33.955 32.557 32.541 33.971 46.584 48.014 32.541 62.057 33.955 63.471 47.998 49.428 62.041 63.471 63.455 62.057 49.412 48.014 63.455 33.971 62.041 32.557Z\"/></g></svg>',\r\n    question: '<svg viewBox=\"0 0 96 96\" xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" stroke=\"green\" stroke-width=\"4\"><g><path d=\"M47.979 10C27.0038 10 10 27.0038 10 47.979 10 68.9542 27.0038 85.958 47.979 85.958 68.9542 85.958 85.958 68.9542 85.958 47.979 85.9674 27.0132 68.9788 10.0094 48.013 10 48.0017 10 47.9903 10 47.979 10ZM47.979 83.958C28.1083 83.958 12 67.8497 12 47.979 12 28.1083 28.1083 12 47.979 12 67.8497 12 83.958 28.1083 83.958 47.979 83.9354 67.8403 67.8403 83.9354 47.979 83.958Z\"/><path d=\"M49.345 27.079C42.7414 26.3273 36.7789 31.0712 36.0272 37.6748 35.9759 38.1257 35.9501 38.5792 35.95 39.033L37.95 39.033C37.9522 33.4936 42.4446 29.0048 47.984 29.007 53.5235 29.0093 58.0122 33.5017 58.01 39.0411 58.0086 42.4915 56.2337 45.6991 53.311 47.533 49.4115 49.9087 47.0166 54.131 46.979 58.697L48.979 58.697C49.0205 54.819 51.0627 51.2376 54.379 49.227 60.0072 45.6952 61.7066 38.2696 58.1748 32.6414 56.2307 29.5434 52.9829 27.4979 49.349 27.083Z\"/><circle cx=\"48\" cy=\"67\" r=\"2\"/></g></svg>',\r\n    warn: '<svg viewBox=\"0 0 96 96\" xmlns=\"http://www.w3.org/2000/svg\" width=\"26\" height=\"26\" stroke=\"#faad14\" stroke-width=\"4\"><g><path d=\"M90.6 80 51.5 12C50.4365 10.0946 48.0298 9.41212 46.1244 10.4756 45.4848 10.8326 44.957 11.3604 44.6 12L5.4 80C4.30371 81.9275 4.9775 84.3787 6.90497 85.475 7.5129 85.8208 8.20061 86.0017 8.9 86L87.1 86C89.3174 86.0055 91.1195 84.2124 91.125 81.995 91.1268 81.2956 90.9458 80.6079 90.6 80ZM88.839 83.019C88.4799 83.637 87.8146 84.0123 87.1 84L8.9 84C8.18507 84.0125 7.5195 83.6367 7.161 83.018 6.78807 82.3997 6.77737 81.6284 7.133 81L46.348 12.971C46.8768 12.0316 48.0671 11.6987 49.0065 12.2276 49.3275 12.4082 49.5908 12.676 49.766 13L88.852 80.971C89.2186 81.6057 89.2137 82.389 88.839 83.019Z\"/><path d=\"M48 73.98C47.3953 73.9976 46.8116 73.7577 46.394 73.32 45.9625 72.8895 45.7274 72.3003 45.744 71.691 45.7194 71.0835 45.953 70.4939 46.387 70.068 46.8156 69.6456 47.3985 69.4172 48 69.436 48.6136 69.4208 49.208 69.6503 49.652 70.074 50.1 70.4898 50.3446 71.0802 50.322 71.691 50.3367 72.3033 50.0911 72.8932 49.646 73.314 49.212 73.7526 48.6168 73.9934 48 73.98Z\"/><path d=\"M46.901 62.6 46.578 30.787 49.289 30.787 48.966 62.6 46.901 62.6Z\"/></g></svg>'\r\n};\r\n\r\nexport default function confirm(_tip, _opt) {\r\n    // check the parameters\r\n    _opt = _opt || { };\r\n    (typeof _opt !== \"object\") && (_opt = ((_opt instanceof Array) ? { buttons: _opt } : { icon: String(_opt) }));\r\n    (arguments[2] !== undefined) && (_opt.buttons = arguments[2]);\r\n    _opt.buttons ? (_opt.buttons instanceof Array || (_opt.buttons = [String(_opt.buttons)])) : (_opt.buttons = ['Close']);\r\n    Number(_opt.default) || (_opt.default = 0);\r\n\r\n    if (this instanceof confirm) {\r\n        // construct the instance\r\n        Object.defineProperty(this, \"result\", {\r\n            get: () => this[$result]\r\n        });\r\n        const div = document.createElement(\"div\");\r\n        if (div) {\r\n            this[$private] = div;\r\n            this[$options] = _opt;\r\n            div.setAttribute(\"class\", `-season-tip-mask-container`);\r\n            _opt.customTag && div.setAttribute(_opt.customTag, _opt.customTag);\r\n            div.insertAdjacentHTML(\"beforeend\", \r\n                `<div class=\"-season-tip-dialog -season-confirm-box\">\r\n                    <div class=\"-season-confirm-info-line\">\r\n                        ${IconCollection[_opt.icon] || \"\"}<div class=\"-season-confirm-info\">${String(_tip).replace(\"\\n\", \"<br />\")}</div>\r\n                    </div>\r\n                    <div class=\"-season-tip-button-bar\" ${_opt.buttonAlign ? `style=\"justify-content:${FlexAlignMap[_opt.buttonAlign]||_opt.buttonAlign};\"` : \"\"}>\r\n                        ${_opt.buttons ? _opt.buttons.map((t, i) => `<div class=\"-season-tip-button ${i === _opt.default ? \"-season-tip-button-default\" : \"\"}\" d-index=\"${i}\">${t}</div>`).join(\"\") : \"\"}\r\n                    </div>\r\n                </div>`);\r\n        }\r\n    } else {\r\n        // create an instance and show\r\n        const obj = new confirm(_tip, _opt);\r\n        return obj.show();\r\n    }\r\n}\r\n\r\nfunction onConfirmTimer(_this, _button, _caption, _timeout) {\r\n    _button.textContent = `${_caption} (${_timeout})`;\r\n    if (_timeout) {\r\n        this[$timerId] = setTimeout(onConfirmTimer, 1000, _this, _button, _caption, _timeout - 1);\r\n    } else {\r\n        this[$timerId] = undefined;\r\n        _this.close(Number(_button.getAttribute(\"d-index\")));\r\n    }\r\n}\r\n\r\nconfirm.prototype = {\r\n    close,\r\n    show(_parent) {\r\n        return new Promise((resolve, reject) => {\r\n            const div = this[$private];\r\n            if ((this instanceof confirm) && div && (!div.isConnected)) {\r\n                this[$resolve] = resolve;\r\n                (_parent instanceof HTMLElement) || (_parent = document.body);\r\n                setTopZIndex(div);\r\n                _parent.insertAdjacentElement(\"afterbegin\", div);\r\n                setTimeout(() => div.className = \"-season-tip-mask-container -season-tip-fadein\", 0);\r\n                [...div.querySelectorAll(\".-season-tip-button\")].forEach(button => {\r\n                    button.addEventListener(\"click\", e => {\r\n                        this.close(Number(e.target.getAttribute(\"d-index\")));\r\n                    }, { once: true });\r\n                });\r\n                const timeout = Number(this[$options].timeout);\r\n                const defaultButton = div.querySelector(\".-season-tip-button-default\");\r\n                if (timeout && defaultButton) {\r\n                    const buttonText = defaultButton.textContent;\r\n                    defaultButton.textContent = `${buttonText} (${timeout})`;\r\n                    this[$timerId] = setTimeout(onConfirmTimer, 1000, this, defaultButton, buttonText, timeout - 1);\r\n                }\r\n            } else {\r\n                reject(new Error(\"Reactive\"));\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { $private, $resolve, $options, $timerId, $result, FlexAlignMap, setTopZIndex, close } from \"./public\";\r\n\r\nexport default function input(_title, _tip, _opt) {\r\n    let opt = {};\r\n    if (typeof _title === \"string\") {\r\n        opt.title = _title;\r\n    } else if (arguments.length === 1) {\r\n        Object.assign(opt, _title);\r\n    } \r\n    if (typeof _tip === \"string\") {\r\n        opt.tip = _tip;\r\n    } else if (arguments.length === 2) {\r\n        Object.assign(opt, _tip);\r\n    }\r\n    if (_opt) {\r\n        Object.assign(opt, _opt);\r\n    }\r\n\r\n    if (this instanceof input) {\r\n        // construct the instance\r\n        Object.defineProperty(this, \"result\", {\r\n            get: () => this[$result]\r\n        });\r\n        const div = document.createElement(\"div\");\r\n        if (div) {\r\n            this[$private] = div;\r\n            this[$options] = opt;\r\n            div.setAttribute(\"class\", `-season-tip-mask-container`);\r\n            opt.customTag && div.setAttribute(opt.customTag, opt.customTag);\r\n            isNaN(opt.fadeOutTime) && (opt.fadeOutTime = 0.3);\r\n            div.insertAdjacentHTML(\"beforeend\", \r\n                `<div class=\"-season-tip-dialog\">\r\n                    ${opt.title ? `<h4 style=\"margin-top:0\">${opt.title}</h4>` : \"\"}\r\n                    <input class=\"-season-tip-input\" type=\"${opt.inputType || \"text\"}\" placeholder=\"${opt.tip||\"\"}\" />\r\n                    <div class=\"-season-tip-button-bar\" ${opt.buttonAlign ? `style=\"justify-content:${FlexAlignMap[opt.buttonAlign]||opt.buttonAlign};\"` : \"\"}>\r\n                        <div class=\"-season-tip-button -season-tip-button-default\" d-button-submit=\"1\">${opt.submitText || \"Submit\"}</div>\r\n                        ${(opt.hideCancel || opt.forbitCancel) ? \"\" : `<div class=\"-season-tip-button\" d-button-cancel=\"1\">${opt.cancelText || \"Cancel\"}</div>`}\r\n                    </div>\r\n                </div>`);\r\n        }\r\n    } else {\r\n        const dlg = new input(opt);\r\n        return dlg.show(opt.position);\r\n    }\r\n}\r\n\r\ninput.prototype = {\r\n    close,\r\n    show(_position) {\r\n        return new Promise((resolve, reject) => {\r\n            const div = this[$private];\r\n            if ((this instanceof input) && div && (!div.isConnected)) {\r\n                const opt = this[$options];\r\n                this[$resolve] = resolve;\r\n                this[$result] = undefined;\r\n\r\n                opt.hideMask && div.setAttribute(\"style\", \"background: none !important;\");\r\n                _position || (_position = opt.position);\r\n                if (_position) {\r\n                    let dlg = div.querySelector(\".-season-tip-dialog\");\r\n                    dlg && dlg.setAttribute(\"style\", `\r\n                        position: absolute;\r\n                        left: ${isNaN(_position.x) ? \"auto\" : (_position.x + \"px\")};\r\n                        top: ${isNaN(_position.y) ? \"auto\" : (_position.y + \"px\")};\r\n                        right: ${isNaN(_position.rx) ? \"auto\" : (_position.rx + \"px\")};\r\n                        bottom: ${isNaN(_position.ry) ? \"auto\" : (_position.ry + \"px\")};\r\n                    `);\r\n                }\r\n\r\n                setTopZIndex(div);\r\n                document.body.insertAdjacentElement(\"beforeend\", div);\r\n                setTimeout(() => div.className = \"-season-tip-mask-container -season-tip-fadein\", 0);\r\n\r\n                let btn = div.querySelector(\"[d-button-submit]\");\r\n                const fnSubmit = () => {\r\n                    let input = div.querySelector(\"input\");\r\n                    this.close(input ? String(input.value) : undefined);\r\n                };\r\n                btn && btn.addEventListener(\"click\", fnSubmit, { once: true });\r\n                btn = div.querySelector(\"[d-button-cancel]\");\r\n                btn && (!opt.forbitCancel) && btn.addEventListener(\"click\", e => {\r\n                    this.close(undefined);\r\n                }, { once: true });\r\n                opt.forbitCancel || div.addEventListener(\"click\", e => {\r\n                    (e.target === div) && this.close(undefined);\r\n                }, { once: true });\r\n\r\n                let input = div.querySelector(\"input\");\r\n                if (input) {\r\n                    const fnKeydown = e => {\r\n                        if (13 === e.keyCode) {\r\n                            fnSubmit();\r\n                            e.target.removeEventListener(\"keydown\", fnKeydown);\r\n                        }\r\n                    }\r\n                    input.addEventListener(\"keydown\", fnKeydown);\r\n                    input.value = (opt.default || \"\");\r\n                    input.select();\r\n                    input.focus();\r\n                }\r\n            } else {\r\n                reject(new Error(\"Reactive\"));\r\n            }\r\n        });\r\n    }\r\n}\r\n","import { $private, $resolve, $options, $timerId, $result, FlexAlignMap, setTopZIndex, close } from \"./public\";\r\n\r\nconst $hasImage = Symbol(\"season.tip.popup.hasimage\");\r\n\r\nexport default function popup(_list, _refElement, _opt) {\r\n    (_list instanceof Array) || (_list = [String(_list)]);\r\n    let opt = {};\r\n    if (_refElement instanceof Element) {\r\n        opt.refElement = _refElement;\r\n    } else if (arguments.length === 2) {\r\n        Object.assign(opt, _refElement);\r\n    }\r\n    _opt && Object.assign(opt, _opt);\r\n    \r\n    if (this instanceof popup) {\r\n        // construct the instance\r\n        Object.defineProperties(this, {\r\n            result: {\r\n                get: () => this[$result]\r\n            },\r\n            count: {\r\n                value: _list.length,\r\n                writable: false\r\n            }\r\n        });\r\n        const div = document.createElement(\"div\");\r\n        if (div) {\r\n            this[$private] = div;\r\n            this[$options] = opt;\r\n            div.setAttribute(\"class\", `-season-tip-dialog -season-tip-popup-box`);\r\n            div.setAttribute(\"tabIndex\", \"0\");\r\n            opt.customTag && div.setAttribute(opt.customTag, opt.customTag);\r\n            isNaN(opt.fadeOutTime) && (opt.fadeOutTime = 0.1);\r\n            opt.style && div.setAttribute(\"style\", opt.style);\r\n            this[$hasImage] = [false, ..._list].reduce((r, i) => (r || (i && i.image)));\r\n            div.insertAdjacentHTML(\"beforeend\", _list.map((item, index) => {\r\n                return ((null !== item) && (undefined !== item)) \r\n                            ? `<a d-select-index=\"${index}\">\r\n                                ${((typeof item !== \"string\") && item.image) ? `<img src=\"${item.image}\" ${item.imageInvert ? 'd-image-invert=\"1\"' : \"\"} />` : \"\"}<span>${item.text || String(item)}</span>\r\n                               </a>`\r\n                            : '<div d-separate-horizontal=\"1\"></div>';\r\n            }).join(\"\"));\r\n        }\r\n    } else {\r\n        const dlg = new popup(_list, opt);\r\n        return dlg.show(opt.refElement);\r\n    }\r\n}\r\n\r\npopup.prototype = {\r\n    close,\r\n    show(_refElement) {\r\n        return new Promise((resolve, reject) => {\r\n            const div = this[$private];\r\n            if ((this instanceof popup) && div && (!div.isConnected)) {\r\n                const opt = this[$options];\r\n                this[$resolve] = resolve;\r\n                this[$result] = undefined;\r\n\r\n                document.body.insertAdjacentElement(\"beforeend\", div);\r\n                setTimeout(() => div.className = \"-season-tip-dialog -season-tip-popup-box -season-tip-fadein\", 0);\r\n                div.addEventListener(\"blur\", (e) => {\r\n                    this.close(undefined);\r\n                }, { once: true });\r\n                [...div.querySelectorAll(\"[d-select-index]\")].forEach(item => {\r\n                    item.addEventListener(\"click\", (e) => {\r\n                        this.close(Number(item.getAttribute(\"d-select-index\")));\r\n                    });\r\n                });\r\n\r\n                let imageRef = div.querySelector(\"[d-select-index] span\");\r\n                imageRef = ((this[$hasImage] && imageRef) ? `${parseInt(imageRef.getBoundingClientRect().height)}px` : \"0px\");\r\n                div.style.setProperty(\"--image-size\", imageRef);\r\n\r\n                _refElement || (_refElement = opt.refElement);\r\n                if (_refElement instanceof Element) {\r\n                    const { width, height } = div.getBoundingClientRect();\r\n                    const { left:refLeft, right:refRight, top:refTop, bottom:refBottom } = _refElement.getBoundingClientRect();\r\n                    const { innerWidth:winWidth, innerHeight:winHeight } = window;\r\n                    const positionStyle = String(opt.position).toLowerCase().split(\"&\");\r\n                    \r\n                    let left = \"auto\", right = \"auto\", top = \"auto\", bottom = \"auto\";\r\n                    if (positionStyle.includes(\"top\")) {\r\n                        bottom = refTop;\r\n                    } else if (positionStyle.includes(\"top-align\")) {\r\n                        top = refTop;\r\n                    } else if (positionStyle.includes(\"bottom-align\")) {\r\n                        bottom = refBottom;\r\n                    } else {\r\n                        top = refBottom;\r\n                    }\r\n                    if (Number(bottom)) {\r\n                        if ((bottom - height) < 0) {\r\n                            bottom = \"auto\";\r\n                            top = 0;\r\n                        } else {\r\n                            bottom = `${winHeight - bottom}px`;\r\n                        }\r\n                    }\r\n                    if (Number(top)) {\r\n                        if ((top + height) > winHeight) {\r\n                            top = Math.max(0, winHeight - height);\r\n                        }\r\n                        top = `${top}px`;\r\n                    }\r\n                    if (positionStyle.includes(\"left\")) {\r\n                        right = refLeft;\r\n                    } else if (positionStyle.includes(\"right\")) {\r\n                        left = refRight;\r\n                    } else if (positionStyle.includes(\"right-align\")) {\r\n                        right = refRight;\r\n                    } else {\r\n                        left = refLeft;\r\n                    }\r\n                    if (Number(right)) {\r\n                        if ((right - width) < 0) {\r\n                            right = \"auto\";\r\n                            left = 0;\r\n                        } else {\r\n                            right = `${winWidth - right}px`;\r\n                        }\r\n                    }\r\n                    if (Number(left)) {\r\n                        if ((left + width) > winWidth) {\r\n                            left = Math.max(0, winWidth - width);\r\n                        }\r\n                        left = `${left}px`;\r\n                    }\r\n                    div.setAttribute(\"style\", `left:${left};right:${right};top:${top};bottom:${bottom};--image-size:${imageRef};${opt.style||\"\"}`);\r\n                }\r\n\r\n                setTopZIndex(div);\r\n                div.focus();\r\n            } else {\r\n                reject(new Error(\"Reactive\"));\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\npopup.bindElement = function (_refElement, _event, _cb, _list, _opt) {\r\n    if (_refElement instanceof Element) {\r\n        _refElement.addEventListener(_event || \"click\", () => {\r\n            popup(_list, _refElement, _opt).then((typeof _cb === \"function\") ? _cb: console.log);\r\n        });\r\n    }\r\n}\r\n","\r\nimport { default as $tip } from \"./tip\";\r\nimport { default as $confirm } from \"./confirm\";\r\nimport { default as $input } from \"./input\";\r\nimport { default as $popup } from \"./popup\";\r\n\r\nexport const tip = $tip;\r\nexport const confirm = $confirm;\r\nexport const input = $input;\r\nexport const popup = $popup;\r\n\r\nexport default {\r\n    install(Vue, options) {\r\n        if (!Vue) return;\r\n\r\n        Vue.prototype.$tip = $tip;\r\n        Vue.prototype.$confirm = $confirm;\r\n        Vue.prototype.$input = $input;\r\n        Vue.prototype.$popup = $popup;\r\n    },\r\n    tip,\r\n    confirm,\r\n    input,\r\n    popup\r\n}\r\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","module.exports = require(\"regenerator-runtime\");\n","const DEF_TIMEOUT = 3000;\r\n\r\nlet gLastError = undefined;\r\n\r\nfunction getLastError() {\r\n    return gLastError;\r\n}\r\n\r\nfunction clearLastError() {\r\n    gLastError = undefined;\r\n}\r\n\r\nfunction getWorkerComm(_timeout) {\r\n    _timeout || (_timeout = DEF_TIMEOUT);\r\n    const startTick = Date.now();\r\n    const fn = (r) => {\r\n        if (navigator.serviceWorker.controller) {\r\n            r(navigator.serviceWorker.controller);\r\n        } else {\r\n            if ((Date.now() - startTick) < _timeout) {\r\n                setTimeout(fn, 10, r);\r\n            } else {\r\n                r(undefined);\r\n            }\r\n        }\r\n    };\r\n    return new Promise(fn);\r\n}\r\n\r\nexport const AppWorker = Object.create(('serviceWorker' in navigator) ? {\r\n    getLastError,\r\n    clearLastError,\r\n\r\n    addMessenger(_cb) {\r\n        if (typeof _cb === \"function\") {\r\n            let fn = function (msg) {\r\n                _cb(msg ? msg.data : undefined);\r\n            };\r\n            navigator.serviceWorker.addEventListener(\"message\", fn);\r\n            return fn;\r\n        }\r\n    },\r\n\r\n    removeMessenger(_fn) {\r\n        navigator.serviceWorker.removeEventListener(\"message\", _fn);\r\n    },\r\n\r\n    getMessage() {\r\n        return new Promise(r => {\r\n            navigator.serviceWorker.addEventListener(\"message\", (msg) => {\r\n                r(msg ? msg.data : undefined)\r\n            }, { once: true });\r\n        })\r\n    },\r\n\r\n    async postMessage(_msgType, _param, _timeout) {\r\n        try {\r\n            clearLastError();\r\n            let comm = await getWorkerComm(_timeout); \r\n            if (comm) {\r\n                comm.postMessage({\r\n                    msg: _msgType,\r\n                    param: _param\r\n                });\r\n                return comm;\r\n            }\r\n        } catch (error) {\r\n            gLastError = error;\r\n        }\r\n    },\r\n\r\n    async sendMessage(_msgType, _param, _timeout) {\r\n        try {\r\n            clearLastError();\r\n            let comm = await getWorkerComm(_timeout);\r\n            if (comm) {\r\n                return await new Promise((resolve, reject) => {\r\n                    let channel = new MessageChannel();\r\n                    let timeId = setTimeout(reject, (_timeout || DEF_TIMEOUT), undefined);\r\n                    channel.port1.onmessage = e => {\r\n                        timeId && clearTimeout(timeId);\r\n                        resolve(e.data);\r\n                    }\r\n                    comm.postMessage({\r\n                        msg: _msgType,\r\n                        param: _param\r\n                    }, [channel.port2]);\r\n                });\r\n            }\r\n        } catch (error) {\r\n            gLastError = error;\r\n        }\r\n    },\r\n\r\n    async start(_script, _opt, _cb, _catch) {\r\n        try {\r\n            clearLastError();\r\n            let registration = await navigator.serviceWorker.register(_script, _opt || {});\r\n            (typeof _cb === \"function\") && _cb(registration);\r\n            return registration;\r\n        } catch (error) {\r\n            gLastError = error;\r\n            if (typeof _catch === \"function\") {\r\n                _catch(error);\r\n            } else {\r\n                throw error;\r\n            }\r\n        }\r\n    }\r\n} : {\r\n    getLastError,\r\n    clearLastError,\r\n\r\n    addMessenger(_cb) { },\r\n\r\n    removeMessenger(_fn) { },\r\n\r\n    getMessage() {\r\n        return new Promise((resolve, reject) => {\r\n            gLastError = new Error(\"ServiceWorker is not supported\");\r\n            reject();\r\n        });\r\n    },\r\n\r\n    async postMessage(_msgType, _param, _timeout) { },\r\n\r\n    async sendMessage(_msgType, _param, _timeout) { },\r\n\r\n    async start(_script, _opt, _cb, _catch) { }\r\n});\r\n\r\nexport default AppWorker;\r\n","const $instance = Symbol(\"class.definder.instance\");\r\n\r\nexport function singletonClass(_name, _definder) {\r\n    if (_definder) {\r\n        (arguments.length < 2) && (_definder = _name, _name = undefined);\r\n        const _ = {\r\n            constructor: _definder.$constructor,\r\n            [_name]: function () {\r\n                if (this instanceof _[_name]) {\r\n                    if (_[$instance]) {\r\n                        throw new Error(`${_name || \"This\"} is a singleton class`);\r\n                    }\r\n                    (typeof _.constructor === \"function\") && _.constructor.apply(this, [...arguments]);\r\n                    _[$instance] = this;\r\n                } else {\r\n                    return _[$instance] || new _[_name](...arguments);\r\n                }    \r\n            }\r\n        };\r\n\r\n        const prototype = _[_name].prototype;\r\n        for (let key in _definder) {\r\n            let item = _definder[key];\r\n            item && (\r\n                (typeof item === \"function\") \r\n                    ? (prototype[key] = item)\r\n                    : (((undefined === item.enumerable) && (item.enumerable = true)), Object.defineProperty(prototype, key, item))\r\n            );\r\n        };\r\n\r\n        return _[_name];\r\n    }\r\n}\r\n\r\nexport function normalClass(_name, _definder) {\r\n    if (_definder) {\r\n        (arguments.length < 2) && (_definder = _name, _name = undefined);\r\n        const _ = {\r\n            constructor: _definder.$constructor,\r\n            normalFunc: _definder.$function,\r\n            [_name]: function () {\r\n                if (this instanceof _[_name]) {\r\n                    (typeof _.constructor === \"function\") && _.constructor.apply(this, [...arguments]);\r\n                } else {\r\n                    return (typeof _.normalFunc === \"function\") ? _.normalFunc.apply(this, [...arguments]) : undefined;\r\n                }    \r\n            }\r\n        };\r\n\r\n        const prototype = _[_name].prototype;\r\n        for (let key in _definder) {\r\n            let item = _definder[key];\r\n            item && (\r\n                (typeof item === \"function\") \r\n                    ? (prototype[key] = item)\r\n                    : (((undefined === item.enumerable) && (item.enumerable = true)), Object.defineProperty(prototype, key, item))\r\n            );\r\n        };\r\n\r\n        return _[_name];\r\n    }\r\n}\r\n\r\nexport default {\r\n    normalClass,\r\n    singletonClass\r\n};\r\n","import { singletonClass } from \"../../submodules/toolkits.js/src/classDefiner\";\r\nimport { dynInvokeLink } from \"../../submodules/toolkits.js/src/domKits\";\r\nimport tip from \"../../submodules/toolkits.js/src/tip/tip\";\r\n\r\nfunction onContentClick() {\r\n    if (this.download) {\r\n        dynInvokeLink(this.download, {\r\n            download: this.download.substr(this.download.lastIndexOf(\"/\") + 1)\r\n        });\r\n    } else if (this.href) {\r\n        window.open(this.href, \"blank\");\r\n    }\r\n}\r\n\r\nconst WelcomeApp = singletonClass(\"WelcomeApp\", {\r\n    $constructor() {\r\n        this.$rootElement = document.getElementById(\"welcome-app\");\r\n    },\r\n\r\n    async refresh() {\r\n        try {\r\n            const contentBox = this.$rootElement.querySelector(\".welcome-app-content-box\");\r\n            contentBox.innerHTML = \"\";\r\n\r\n            let resp = await fetch(\"./home-content.json\");\r\n            resp = await resp.json();\r\n            resp.forEach(item => {\r\n                let itemDiv = document.createElement(\"div\");\r\n                itemDiv.setAttribute(\"class\", \"welcome-app-content\");\r\n                itemDiv.setAttribute(\"d-content-desc\", item.desc || \"\");\r\n                itemDiv.insertAdjacentHTML(\"afterbegin\", `<img src=\"${item.image}\" /><div>${item.title}</div>`);\r\n                itemDiv.addEventListener(\"click\", onContentClick.bind(item));\r\n                contentBox.appendChild(itemDiv);\r\n            });\r\n        } catch (error) {\r\n            tip(\"Fail in fresh home contents\", { type: \"error\", timeout: 1700, closable: true });\r\n            console.error(\"Fail in fresh home contents\", error);\r\n        }\r\n    },\r\n    \r\n    hide() {\r\n        this.$rootElement && this.$rootElement.remove();\r\n    },\r\n    \r\n    show() {\r\n        const container = document.querySelector(\".--app-container\");\r\n        this.$rootElement && container && (container.innerHTML = \"\", container.appendChild(this.$rootElement));\r\n    }\r\n});\r\n\r\nexport default WelcomeApp;\r\n","/**\r\n * get the top z-index in the given element\r\n * @param {HTMLElement} _element the container element, document.body will be taken as default if this parameter is ignored\r\n * @returns {Number} the top z-index\r\n */\r\n export function getTopZIndex(_element) {\r\n    return [...(_element || document.body).querySelectorAll(\"*\")].reduce((r, e) => \r\n                Math.max(r, Number(window.getComputedStyle(e).zIndex) || 0), \r\n            0) + 1;\r\n}\r\n\r\n/**\r\n * get the number value from a style value\r\n * @param {*} _style the style value\r\n * @param {*} _default the default value using when the style value doesn't contain number value, 0 will be taken if this parameter is ignored.\r\n * @returns {Number} the number value in the style\r\n */\r\nexport function NumberFromStyle(_style, _default = 0) {\r\n    _style = String(_style).replace(/\\D+$/, \"\");\r\n    return (_style && Number(_style)) || _default;\r\n}\r\n\r\n/**\r\n * get the coordinate of an event in the asix of the given element\r\n * @param {Event} _e the event\r\n * @param {HTMLElement} _element the element\r\n * @returns {Object} {x, y}\r\n */\r\nexport function eventCoordinateFromElement(_e, _element) {\r\n    let x = 0;\r\n    let y = 0;\r\n    while (_element) {\r\n        x += _element.offsetLeft - _element.scrollLeft + _element.clientLeft;\r\n        y += _element.offsetTop - _element.scrollTop + _element.clientTop;\r\n        _element = _element.offsetParent;\r\n    }\r\n\r\n    x = _e.pageX - x;\r\n    y = _e.pageY - y;\r\n    return { x, y };\r\n}\r\n\r\n/**\r\n * add a listener for the resize event\r\n * @param {HTMLElement} _target the target\r\n * @param {Function|ResizeObserver} _handler the handler\r\n * @returns {ResizeObserver} the listener server\r\n */\r\nexport function listenResize(_target, _handler) {\r\n    const resizeObserver = _handler instanceof ResizeObserver ? _handler : new ResizeObserver(_handler);\r\n    resizeObserver.observe(_target);\r\n    return resizeObserver;\r\n}\r\n\r\n/**\r\n * invoke a link without displaying\r\n * @param {String} _url the URL of the link\r\n * @param {Object} _opt optional parameter, the members in which will be set into the <a> element\r\n */\r\n export function dynInvokeLink(_url, _opt) {\r\n    if (_url) {\r\n        const aElement = document.createElement(\"a\");\r\n        if (aElement) {\r\n            aElement.href = _url;\r\n            aElement.rel = \"noopener\";\r\n            if (_opt) {\r\n                for (const name in _opt) {\r\n                    aElement[name] = _opt[name];\r\n                }\r\n            }\r\n            aElement.click();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * pickup a file\r\n * @param {String} _fileType the external name of the target files, this parameter is optional\r\n * @returns {Promise<File|undefined>} the File object of the file picked\r\n */\r\nexport function pickFile(_fileType) {\r\n    return new Promise((resoleve, reject) => {\r\n        try {\r\n            const inputElement = document.createElement(\"input\");\r\n            inputElement.type = \"file\";\r\n            _fileType && (inputElement.accept = _fileType);\r\n            inputElement.addEventListener(\"change\", () => { \r\n                const files = inputElement.files;\r\n                if (files.length > 0) {\r\n                    resoleve(files[0]);\r\n                } else {\r\n                    resoleve(undefined);\r\n                }\r\n            });\r\n            inputElement.click();\r\n        } catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * polyfill the button key of the MouseEvent\r\n * @returns {Number} (1)Left Button; (2)Middle Button; (3)Right Buttton\r\n */\r\nexport function mouseButton(_event) {\r\n    return (_event.which === undefined) ? (_event.button + 1) : _event.which;\r\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","const $private = Symbol(\"season.urlparams.private\");\r\n\r\nclass URLGetParams {\r\n    constructor (_searchStr) {\r\n        const params = (this[$private] = {});\r\n        String(_searchStr).split(\"&\").forEach(item => {\r\n            let { 0:name, 1:value } = item.split(\"=\");\r\n            params[name] = ((undefined === value) ? true : decodeURIComponent(value));\r\n        });\r\n    }\r\n\r\n    get(_name) {\r\n        return this[$private][_name];\r\n    }\r\n\r\n    getAll(_name) {\r\n        return this[$private][_name];\r\n    }\r\n\r\n    has(_name) {\r\n        return Object.hasOwnProperty.call(this[$private], _name);\r\n    }\r\n\r\n    keys() {\r\n        return Object.keys(this[$private]);\r\n    }\r\n\r\n    * entries() {\r\n        const params = this[$private];\r\n        for (let key in params) {\r\n            yield [key, params[key]];\r\n        }\r\n    }\r\n\r\n    forEach(_cb, _thisArg) {\r\n        if (typeof _cb === \"function\") {\r\n            const params = this[$private];\r\n            for (let key in params) {\r\n                _cb.call(_thisArg, params[key], key, this);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const URLParams = (('URLSearchParams' in window) ? window.URLSearchParams : URLGetParams);\r\n","import { singletonClass } from \"../../submodules/toolkits.js/src/classDefiner\";\r\n\r\nconst WaitTip = singletonClass(\"WaitTip\", {\r\n    $constructor() {\r\n        this.$rootElement = document.getElementById(\"waiting-box\");\r\n        this.close();\r\n        this.$rootElement.style.display = \"\";\r\n    },\r\n\r\n    show(_text) {\r\n        let obj = this.$rootElement.querySelector(\"#waiting-text\");\r\n        obj.textContent = (_text || \"\");\r\n        (!this.$rootElement.isConnected) && document.body.appendChild(this.$rootElement);\r\n        return this;\r\n    },\r\n\r\n    close() {\r\n        this.$rootElement.remove();\r\n        return this;\r\n    },\r\n\r\n    wait(..._promises) {\r\n        Promise.all(_promises).then(() => {\r\n            this.close();\r\n        });\r\n    }\r\n});\r\n\r\nexport default WaitTip;","import JSZip from \"jszip\";\r\nimport { singletonClass } from \"../../submodules/toolkits.js/src/classDefiner\";\r\nimport popup from \"../../submodules/toolkits.js/src/tip/popup\";\r\nimport tip from \"../../submodules/toolkits.js/src/tip/tip\";\r\nimport input from \"../../submodules/toolkits.js/src/tip/input\";\r\nimport { URLParams } from \"../../submodules/toolkits.js/src/urlParams\";\r\nimport AppWorker from \"./appWorker\";\r\nimport WelcomeApp from \"./welcomeApp\";\r\nimport WaitTip from \"./waitTip\";\r\n\r\nconst $pkgRec = Symbol(\"package.manager.private.record\");\r\n\r\nconst reloadMenuItem = {\r\n    text: \"Reload App\",\r\n    action: \"reload\"\r\n};\r\n\r\nconst packageMenuItem = {\r\n    image: \"./assets/icon-cube.svg\",\r\n    imageInvert: true,\r\n    text: \"Load Package\",\r\n    action: \"package\",\r\n};\r\n\r\nconst homeMenuItem = {\r\n    //image: \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTYiIGhlaWdodD0iOTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTc3LDUyTDQ4LDI0TDEzLDU3TDgsNTJMNDgsMTRMODcsNTJMODIsNTdMNzcsNTJ2MzNoLTIzdi0yNGgtMTJ2MjRoLTIzdi0zMyIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjMiIGZpbGw9Im5vbmUiIC8+PC9zdmc+\",\r\n    image: \"./assets/icon-home.svg\",\r\n    imageInvert: true,\r\n    text: \"Home Page\"\r\n};\r\n\r\nconst PackageManager = singletonClass(\"PackageManager\", {\r\n    $constructor() {\r\n        this.$menuList = [];\r\n        let btnElement = document.querySelector(\".--app-home-button\");\r\n        btnElement && popup.bindElement(btnElement, \"click\", this.onMenuInvoke.bind(this), this.$menuList, { position: \"right-align\", customTag: \"d-app-menu-button\" });\r\n        btnElement = document.querySelector(\".--app-return-button\");\r\n        btnElement && btnElement.addEventListener(\"click\", function () {\r\n            history.back();\r\n        });\r\n        this.$menuBar = document.querySelector(\".--app-menu-bar\");\r\n        this.$ob = new MutationObserver(this.onDomChanged.bind(this));\r\n        this.$ob.observe(document.body, {\r\n            childList: true,\r\n            attributes: true,\r\n            subtree: true\r\n        });\r\n        this.freshList();\r\n        this._$_default_();\r\n    },\r\n\r\n    current: {\r\n        get () {\r\n            return this[$pkgRec];\r\n        }\r\n    },\r\n\r\n    currentPath: {\r\n        get () {\r\n            return this[$pkgRec] ? `/.pwa.vir/${this[$pkgRec]}` : \".\";\r\n        }\r\n    },\r\n\r\n    onDomChanged() {\r\n        if (!this.$menuBar.isConnected) {\r\n            document.body.insertAdjacentElement(\"afterbegin\", this.$menuBar);\r\n        }\r\n    },\r\n\r\n    async freshList() {\r\n        const menuList = this.$menuList;\r\n        menuList.splice(0, menuList.length);\r\n\r\n        try {\r\n            let response = await fetch(\"./pkgs/context.json\");\r\n            let packageList = await response.json();\r\n            if (packageList instanceof Array) {\r\n                menuList.splice(0, 0, ...packageList);\r\n            } else {\r\n                throw new Error(\"Package context must be an array\");\r\n            }\r\n        } catch(error) {\r\n            console.error(\"$[PackageManager] Fail in load package list\", error);\r\n        }\r\n\r\n        (menuList.length > 0) && menuList.push(null);\r\n        menuList.splice(menuList.length, 0, packageMenuItem, homeMenuItem, null, reloadMenuItem);\r\n    },\r\n\r\n    onMenuInvoke(_index) {\r\n        const menuItem = this.$menuList[_index];\r\n        if (menuItem) {\r\n            if (undefined === menuItem.action) {\r\n                this._$_default_();\r\n            } else {\r\n                const action = `_$_${menuItem.action}_`;\r\n                if (typeof this[action] === \"function\") {\r\n                    WaitTip().show(\"Loading...\").wait(new Promise(r => setTimeout(r, 1000)), this[action](menuItem));\r\n                } else {\r\n                    tip(`\"${menuItem.text || String(menuItem)}\" unknown!`, { type: \"error\", closable: true, timeout: 1700 });\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    _$_default_() {\r\n        let params = new URLParams(location.search.substr(1));\r\n        if (params.has(\"pkg\")) {\r\n            WaitTip().show(\"Loading...\").wait(new Promise(r => setTimeout(r, 1000)),this._$_package_({ package: params.get(\"pkg\") }));\r\n        } else {\r\n            let pkgLog = localStorage.getItem(\"pkg-log\");\r\n            pkgLog  ? WaitTip().show(\"Loading...\").wait(new Promise(r => setTimeout(r, 1000)),this._$_package_({ package: pkgLog }))\r\n                    : WelcomeApp().show();\r\n        }\r\n    },\r\n\r\n    async _$_reload_(_menuItem) {\r\n        let ret = await AppWorker.sendMessage(\"reload-application\");\r\n        if (ret) {\r\n            if (0 === ret.ret) {\r\n                location.reload();\r\n            } else {\r\n                tip(`Fail in reloading application(${ret.ret})!`, { type: \"error\", closable: true, timeout: 1700 });\r\n            }\r\n        }\r\n    },\r\n\r\n    async _$_package_(_menuItem) {\r\n        let lastError = undefined;\r\n        let context = undefined;\r\n        let packageName = _menuItem.package;\r\n\r\n        if (!packageName) {\r\n            packageName = await input(\"Input package code\", { hideCancel: true, buttonAlign: \"center\" });\r\n            if (!packageName) {\r\n                localStorage.removeItem(\"pkg-log\");\r\n                return ;\r\n            }\r\n        }\r\n\r\n        localStorage.setItem(\"pkg-log\", packageName);\r\n\r\n        if (!context) {\r\n            try {\r\n                context = await fetch(`/.pwa.vir/${packageName}/context.json`);\r\n                context = await context.json();\r\n            } catch (error) {\r\n                context = undefined;\r\n                //lastError = error;\r\n            }\r\n        }\r\n\r\n        if (!context) {\r\n            try {\r\n                context = await fetch(`./pkgs/${packageName}.zip`);\r\n                context = await context.blob();\r\n                let pkg = await (new JSZip()).loadAsync(context);\r\n                context = JSON.parse(await pkg.file(\"context.json\").async(\"string\"));\r\n                ((new URLParams(location.search.substr(1))).get(\"pkg\") === packageName) \r\n                    && (context.keepAlive = true);\r\n\r\n                let keyCode = undefined;\r\n                if (context.crypt) {\r\n                    let keyHash = undefined;\r\n                    do {\r\n                        keyCode = await input(\"Input the access code:\", \"\", { buttonAlign: \"center\", inputType: \"password\"});\r\n                        keyHash = CryptoJS.MD5(keyCode).toString();\r\n                        if (keyCode && (keyHash !== context.crypt)) {\r\n                            tip(\"The access key is incorrect!\", { type: \"error\", closable: true, timeout: 1000 });\r\n                            keyHash = undefined;\r\n                        }\r\n                    } while (keyCode && (!keyHash));\r\n                    if (!keyCode) {\r\n                        throw new Error(\"Need an access code\");\r\n                    }\r\n                }\r\n\r\n                let mapTree = {};\r\n                pkg.forEach((relPath, file) => {\r\n                    if (!file.dir) {\r\n                        mapTree[`${context.keepAlive ? \":\" : \"\"}${packageName}/${relPath}`] = String(relPath);\r\n                    }\r\n                });\r\n                for (let item in mapTree) {\r\n                    let relPath = mapTree[item];\r\n                    if (relPath.endsWith(\".html\") || relPath.endsWith(\".htm\") || relPath.endsWith(\".js\") || relPath.endsWith(\".css\")) {\r\n                        mapTree[item] = new Blob([\r\n                            CryptoJS.AES.decrypt(\r\n                                await pkg.file(mapTree[item]).async(\"string\"), \r\n                                keyCode\r\n                            ).toString(CryptoJS.enc.Utf8)\r\n                        ]);\r\n                    } else {\r\n                        mapTree[item] = await pkg.file(mapTree[item]).async(\"blob\");\r\n                    }\r\n                }\r\n                context.keepAlive || (await AppWorker.sendMessage(\"clear-virtual-response\", { keepAlive: false }));\r\n                let mapRet = await AppWorker.sendMessage(\"map-virtual-response\", mapTree);\r\n                if (0 !== mapRet.ret) {\r\n                    throw new Error(`Fail in mapping virtual response(${mapRet.ret})`);\r\n                }\r\n            } catch (error) {\r\n                context = undefined;\r\n                lastError = error;\r\n            }\r\n        }\r\n\r\n        if (context) {\r\n            try {\r\n                let entryFile = await fetch(`/.pwa.vir/${packageName}/${context.entry}`);\r\n                entryFile = await entryFile.text();\r\n                const container = document.querySelector(\".--app-container\");\r\n                \r\n                WelcomeApp().hide();\r\n                container.innerHTML = \"\";\r\n                container.insertAdjacentHTML(\"beforeend\", entryFile);\r\n                let entryFolder = (String(context.entry).substr(0, String(context.entry).lastIndexOf(\"/\")) || \".\");\r\n\r\n                // update meta,link,style\r\n                [...container.querySelectorAll(\"meta,link,style\")].map(oriItem => {\r\n                    try {\r\n                        oriItem.remove();\r\n                        let newItem = document.createElement(oriItem.tagName);\r\n                        oriItem.getAttributeNames().forEach(attr => newItem.setAttribute(attr, oriItem.getAttribute(attr)));\r\n                        let filePath = String(newItem.getAttribute(\"href\") || \"\");\r\n                        if (filePath) {\r\n                            if ((filePath.indexOf(\"://\") < 0) && (!filePath.startsWith(\"/\"))) {\r\n                                newItem.setAttribute(\"href\", `/.pwa.vir/${packageName}/${entryFolder}/${filePath}`);\r\n                            }\r\n                        }\r\n                        newItem.innerHTML = oriItem.innerHTML;\r\n                        return newItem;\r\n                    } catch (error) {\r\n                        lastError = error;\r\n                    }\r\n                }).reverse().forEach(item => {\r\n                    try {\r\n                        item && container.insertAdjacentElement(\"afterbegin\", item);\r\n                    } catch(error) {\r\n                        lastError = error;\r\n                    }\r\n                });\r\n\r\n                // update script\r\n                [...container.querySelectorAll(\"script\")].map(oriItem => {\r\n                    try {\r\n                        oriItem.remove();\r\n                        let newItem = document.createElement(\"script\");\r\n                        oriItem.getAttributeNames().forEach(attr => newItem.setAttribute(attr, oriItem.getAttribute(attr)));\r\n                        let filePath = String(newItem.getAttribute(\"src\"));\r\n                        if (filePath) {\r\n                            if ((filePath.indexOf(\"://\") < 0) && (!filePath.startsWith(\"/\"))) {\r\n                                newItem.setAttribute(\"src\", `/.pwa.vir/${packageName}/${entryFolder}/${filePath}`);\r\n                            }\r\n                        }\r\n                        newItem.innerHTML = oriItem.innerHTML;\r\n                        return newItem;\r\n                    } catch (error) {\r\n                        lastError = error;\r\n                    }\r\n                }).forEach(item => {\r\n                    try {\r\n                        item && container.append(item);\r\n                    } catch(error) {\r\n                        lastError = error;\r\n                    }\r\n                });\r\n\r\n                this[$pkgRec] = packageName;\r\n            } catch(error) {\r\n                lastError = error;\r\n                context = undefined;\r\n            }\r\n        }\r\n\r\n        context ? (lastError ? console.warn(`Load \"${packageName}\" finished with exception`, lastError) : console.log(`Load \"${packageName}\" success`))\r\n                : (tip(`Fail in loading package! ${lastError ? `\\n${lastError.message}` : \"\"}`, { type: \"error\", closable: true, timeout: 1000 }), \r\n                    console.error(`Load \"${packageName}\" failed`, lastError)\r\n                  );\r\n    }\r\n});\r\n\r\nexport default PackageManager;\r\n","import { default as tip } from \"../submodules/toolkits.js/src/tip\";\r\nimport AppWorker from \"./client/appWorker\";\r\nimport WelcomeApp from \"./client/welcomeApp\";\r\nimport PackageManager from \"./client/packageManager\";\r\nimport WaitTip from \"./client/waitTip\";\r\n\r\nfunction pwaMain() {\r\n    window[\"$aw\"] = AppWorker;\r\n    window[\"$wa\"] = WelcomeApp;\r\n    \r\n    console.log(\"$[PWA Start]\");\r\n    window[\"$tip\"] = tip;\r\n    window[\"$tip\"][\"WaitTip\"] = WaitTip;\r\n    WaitTip();\r\n    WelcomeApp().refresh();\r\n    window[\"$package\"] = PackageManager();\r\n}\r\n\r\nAppWorker.start(\"./sw.js\")\r\n    .then(pwaMain)\r\n    .catch(function(error) {\r\n        console.error(\"$[Service worker registration failed]\", error);\r\n    });\r\n"],"names":["$private","Symbol","$resolve","$options","$timerId","$result","FlexAlignMap","center","left","right","top","bottom","start","end","setTopZIndex","_element","topZ","document","body","querySelectorAll","reduce","r","e","Math","max","Number","window","getComputedStyle","zIndex","style","transitionEndEventName","transition","MozTransition","WebkitTransition","OTransition","transitionEndEvent","name","undefined","close","_result","this","obj","opt","fn","remove","setTimeout","clearTimeout","onclose","Element","isConnected","fadeOutTime","isNaN","setAttribute","getAttribute","className","addEventListener","once","TIP_SELECTOR","HTML_TIP_CONTAINER","tip","_tip","_opt","type","String","show","div","createElement","customTag","insertAdjacentHTML","replace","closable","closeBtn","querySelector","bind","prototype","_parent","HTMLElement","container","insertAdjacentElement","timeout","IconCollection","info","ok","error","question","warn","confirm","Array","buttons","icon","arguments","default","Object","defineProperty","get","buttonAlign","map","t","i","join","onConfirmTimer","_this","_button","_caption","_timeout","textContent","input","_title","title","length","assign","position","inputType","submitText","hideCancel","forbitCancel","cancelText","Promise","resolve","reject","forEach","button","target","defaultButton","buttonText","Error","_position","hideMask","dlg","x","y","rx","ry","btn","fnSubmit","value","fnKeydown","keyCode","removeEventListener","select","focus","$hasImage","popup","_list","_refElement","refElement","defineProperties","result","count","writable","image","item","index","imageInvert","text","imageRef","parseInt","getBoundingClientRect","height","setProperty","width","refLeft","refRight","refTop","refBottom","innerWidth","winWidth","innerHeight","winHeight","positionStyle","toLowerCase","split","includes","bindElement","_event","_cb","then","console","log","install","Vue","options","$tip","$confirm","$input","$popup","asyncGeneratorStep","gen","_next","_throw","key","arg","done","_asyncToGenerator","self","args","apply","err","regenerator","require$$0","gLastError","getLastError","clearLastError","getWorkerComm","startTick","Date","now","navigator","serviceWorker","controller","AppWorker","create","addMessenger","msg","data","removeMessenger","_fn","getMessage","postMessage","_msgType","_param","comm","param","sendMessage","channel","MessageChannel","timeId","port1","onmessage","port2","_script","_catch","register","registration","$instance","singletonClass","_name","_definder","_","constructor","$constructor","enumerable","onContentClick","download","_url","aElement","href","rel","click","dynInvokeLink","substr","lastIndexOf","open","WelcomeApp","$rootElement","getElementById","refresh","contentBox","innerHTML","fetch","resp","json","itemDiv","desc","appendChild","hide","_arrayLikeToArray","arr","len","arr2","_toConsumableArray","isArray","arrayLikeToArray","arrayWithoutHoles","iter","iterator","from","iterableToArray","o","minLen","n","toString","call","slice","test","unsupportedIterableToArray","TypeError","nonIterableSpread","URLParams","URLSearchParams","_searchStr","params","decodeURIComponent","getAll","has","hasOwnProperty","keys","entries","_thisArg","WaitTip","display","_text","wait","_promises","all","$pkgRec","reloadMenuItem","action","packageMenuItem","homeMenuItem","PackageManager","$menuList","btnElement","onMenuInvoke","history","back","$menuBar","$ob","MutationObserver","onDomChanged","observe","childList","attributes","subtree","freshList","_$_default_","current","currentPath","menuList","splice","response","packageList","push","_index","menuItem","location","search","_$_package_","pkgLog","localStorage","getItem","_$_reload_","_menuItem","ret","reload","lastError","context","packageName","removeItem","setItem","blob","JSZip","loadAsync","pkg","JSON","file","async","parse","keepAlive","crypt","keyHash","CryptoJS","MD5","mapTree","relPath","dir","endsWith","Blob","AES","decrypt","enc","Utf8","mapRet","entry","entryFile","entryFolder","oriItem","newItem","tagName","getAttributeNames","attr","filePath","indexOf","startsWith","reverse","append","_this2","message"],"mappings":"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"}