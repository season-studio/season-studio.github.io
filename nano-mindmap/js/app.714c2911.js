(function(e){function t(t){for(var r,o,s=t[0],c=t[1],u=t[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"1b93":function(e,t,n){},"43c5":function(e,t,n){"use strict";var r=n("8667"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("d81d"),n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("mind-svg-view",{ref:"mindView",attrs:{"view-class":"mind-view-class","mind-config":{draggable:!0},"attachment-path":"resources","show-edit-tools":!e.showMenuContent,"key-action-map":{"ctrl+alt+n":e.onNewWorkBook,"ctrl+o":e.onOpen,"ctrl+s":e.onSave,"ctrl+down":"addSubTopic","ctrl+right":"addSiblingTopic",up:"selectParent",down:"selectChild",left:"selectPreviousSibling",right:"selectNextSibling",enter:"editTopic",delete:"deleteTopic","ctrl+z":e.onUndo,"ctrl+y":e.onRedo,f3:e.onStartSearch}},on:{"focus-topic-changed":e.onFocusTopicChanged,"blur-float-panel":e.onBlurFloatPanel,"history-changed":e.onHistoryChanged}}),n("floatToolbar",{ref:"toolbar",attrs:{"show-content":e.showMenuContent,items:e.menuContent},on:{"handler-click":function(t){e.showMenuContent=!e.showMenuContent}}},[e.requestInput?n("div",{staticClass:"mind-input-panel"},[n("span",[e._v(e._s(e._T(e.requestInput.caption)))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.requestInput.value,expression:"requestInput.value"}],attrs:{placeholder:e._T(e.requestInput.tip)},domProps:{value:e.requestInput.value},on:{input:function(t){t.target.composing||e.$set(e.requestInput,"value",t.target.value)}}}),n("button",{staticClass:"mind-input-button",on:{click:e.onInputConfirm}},[e._v(e._s(e._T("Confirm")))]),n("button",{staticClass:"mind-input-button",on:{click:e.onInputCancel}},[e._v(e._s(e._T("Cancel")))])]):e._e(),e.requestSearch?n("div",{staticClass:"mind-input-panel"},[n("span",[e._v(e._s(e._T("search:")))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.requestSearch.value,expression:"requestSearch.value"}],attrs:{placeholder:e._T("Input search information")},domProps:{value:e.requestSearch.value},on:{input:[function(t){t.target.composing||e.$set(e.requestSearch,"value",t.target.value)},e.onSearchInputChange]}}),n("button",{staticClass:"mind-input-button",on:{click:e.onSearchNext}},[e._v(e._s(e._T("Next")))]),n("button",{staticClass:"mind-input-button",on:{click:e.onSearchPrev}},[e._v(e._s(e._T("Prev")))]),n("button",{staticClass:"mind-input-button",on:{click:e.onSearchCancel}},[e._v(e._s(e._T("Cancel")))])]):e._e()])],1)},i=[],o=(n("99af"),n("c975"),n("a15b"),n("a434"),n("ac1f"),n("25f0"),n("8a79"),n("466d"),n("38cf"),n("5319"),n("2ca0"),n("498a"),n("96cf"),n("1da1")),s=n("b85c"),c=n("f8f2"),u=n("da31"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"float-toolbar"},[n("div",{class:"float-toolbar-handler "+(e.showContent?"":"float-toolbar-handler-nocontent"),on:{click:function(t){return e.$emit("handler-click")}}},[e._v(" "+e._s(e._T("menu"))+" "),e.showContent?e._e():n("div",{staticClass:"float-icon-triangle float-icon-triangle-right",staticStyle:{"border-left-color":"#fff"}})]),e.showContent?n("div",{staticClass:"float-toolbar-content"},e._l(e.items,(function(t,r){return n("div",{key:r,class:e.itemClass(t),on:{click:function(n){t.fn?t.fn(t):e.nop()}}},[!t.separate&&t.svg?n("svg",{style:{width:t.svg.width+"px",height:t.svg.height+"px"},attrs:{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:t.svg.viewBox},domProps:{innerHTML:e._s(t.svg.html)}}):e._e(),t.separate||t.svg?e._e():n("span",{staticClass:"float-toolbar-item-caption",domProps:{innerHTML:e._s(e._T(t.caption))}}),!t.separate&&t.svg?n("span",{staticClass:"float-toolbar-item-tip"},[e._v(e._s(e._T(t.caption)))]):e._e(),!t.separate&&t.subItems?n("div",{staticClass:"float-icon-triangle float-icon-triangle-down float-icon-triangle-color"}):e._e(),!t.separate&&t.subItems?n("div",{staticClass:"float-toolbar-subgroup"},e._l(t.subItems,(function(t,r){return n("div",{key:r,class:e.itemClass(t,!0),on:{click:function(n){t.fn?t.fn(t):e.nop()}}},[n("div",{staticClass:"float-toolbar-item-caption",style:t.style,domProps:{innerHTML:e._s(e._T(t.caption))}})])})),0):e._e()])})),0):e._e(),n("div",[e._t("default")],2)])},p=[],d={data:function(){return{}},props:{showContent:Boolean,items:{type:Array,required:!0}},methods:{_T:u["translate"].get,nop:function(){},log:function(e){console.log(e)},itemClass:function(e,t){return"".concat(e.separate?"float-toolbar-separate-".concat(t?"subitem":"item"):e.disable?"float-toolbar-disable-item":e.fn||e.subItems?"float-toolbar-item":"float-toolbar-plain-item","\n                    ").concat(t?" float-toolbar-subitem":"")}}},f=d,h=(n("43c5"),n("2877")),v=Object(h["a"])(f,l,p,!1,null,null,null),m=v.exports,b=(n("4d63"),n("ddb0"),n("d4ec")),g=n("bee2"),w=n("c4e3"),C=n.n(w),x={CLASSIC_ATTACHMENT_PATH:"attachments/",CLASSIC_CONTENT_FILE:"content.xml",CLASSIC_META_FILE:"meta.xml",CLASSIC_COMMENTS_FILE:"comments.xml",CLASSIC_MANIFEST_FILE:"META-INF/manifest.xml",ZEN_RESOURCE_PATH:"resources/",ZEN_MANIFEST_FILE:"manifest.json",ZEN_META_FILE:"metadata.json",ZEN_CONTENT_FILE:"content.json",KEY_FILE_ENTRIES:"file-entries"},k=function(){function e(){Object(b["a"])(this,e),this.attachments={},this.comments={},this.sheets={},this.meta={}}return Object(g["a"])(e,[{key:"setAttachment",value:function(e,t){this.attachments[e]=t}},{key:"deleteAttachment",value:function(e){this.attachments[e]&&delete this.attachments[e]}},{key:"attachmentInterator",value:regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.attachments,!t){e.next=9;break}e.t0=regeneratorRuntime.keys(t);case 3:if((e.t1=e.t0()).done){e.next=9;break}return n=e.t1.value,e.next=7,{path:n,value:t[n]};case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)}))},{key:"setComment",value:function(e,t,n,r,a){this.comments[e]={object_id:t,content:n,author:r,time:a}}},{key:"deleteComment",value:function(e){this.comments[e]&&delete this.comments[e]}},{key:"setSheet",value:function(e,t){this.sheets[e]=t}},{key:"deleteSheet",value:function(e){this.sheets[e]&&delete this.sheets[e]}},{key:"setMeta",value:function(e){Object.assign(this.meta,e)}}]),e}();function y(e,t){return E.apply(this,arguments)}function E(){return E=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.file(x.ZEN_MANIFEST_FILE),!r){e.next=19;break}return e.next=4,r.async("text");case 4:a=e.sent,i=JSON.parse(a),o=i[x.KEY_FILE_ENTRIES],e.t0=regeneratorRuntime.keys(o);case 8:if((e.t1=e.t0()).done){e.next=19;break}if(s=e.t1.value,!(s.indexOf("/")>0)){e.next=17;break}if(c=n.file(s),!c){e.next=17;break}return e.next=15,c.async("blob");case 15:u=e.sent,t.setAttachment(s,u);case 17:e.next=8;break;case 19:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function S(e,t){return A.apply(this,arguments)}function A(){return A=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.file(x.ZEN_CONTENT_FILE),!r){e.next=8;break}return e.next=4,r.async("text");case 4:a=e.sent,i=JSON.parse(a),o=Object(s["a"])(i);try{for(o.s();!(c=o.n()).done;)u=c.value,t.setSheet(u.id,u)}catch(l){o.e(l)}finally{o.f()}case 8:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function T(e,t){return _.apply(this,arguments)}function _(){return _=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.file(x.ZEN_META_FILE),!r){e.next=8;break}return e.next=4,r.async("text");case 4:a=e.sent,i=JSON.parse(a),delete i["activeSheetId"],t.setMeta(i);case 8:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function I(e){return P.apply(this,arguments)}function P(){return P=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new k,e.prev=1,e.next=4,y(n,t);case 4:return e.next=6,S(n,t);case 6:return e.next=8,T(n,t);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),console.error(e.t0),n=void 0;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[1,10]])}))),P.apply(this,arguments)}function M(e,t,n){var r="xap:".concat(x.CLASSIC_ATTACHMENT_PATH),a="^xap:".concat(x.CLASSIC_ATTACHMENT_PATH),i="xap:".concat(x.ZEN_RESOURCE_PATH);for(var o in n){var s=n[o],c=void 0;if(s.fn&&(c=s.fn,s=s.n),t.hasAttribute(s)){var u=String(t.getAttribute(s));c&&(u=c(u)),s.indexOf(":")>0&&"string"===typeof u&&u.startsWith(r)&&(u=u.replace(new RegExp(a),i)),e[o]=u}}return e}function N(e,t,n,r){var a,i=t.childNodes,o=Object(s["a"])(i);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=c.tagName,l=n[u];l?"string"===typeof l?e[l]=c.textContent:l(e,c):r&&r(e,c)}}catch(p){o.e(p)}finally{o.f()}return e}function L(e,t){return O.apply(this,arguments)}function O(){return O=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,c,u,l,p,d,f,h,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.file(x.CLASSIC_MANIFEST_FILE),a="^".concat(x.CLASSIC_ATTACHMENT_PATH),!r){e.next=33;break}return e.next=5,r.async("text");case 5:i=e.sent,o=new DOMParser,c=o.parseFromString(i,"text/xml"),u=c.documentElement.childNodes,l=Object(s["a"])(u),e.prev=10,l.s();case 12:if((p=l.n()).done){e.next=25;break}if(d=p.value,f=d.getAttribute("full-path").trim(),f.endsWith("/")||!f.startsWith(x.CLASSIC_ATTACHMENT_PATH)){e.next=23;break}if(h=n.file(f),!h){e.next=23;break}return f=f.replace(new RegExp(a),x.ZEN_RESOURCE_PATH),e.next=21,h.async("blob");case 21:v=e.sent,t.setAttachment(f,v);case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](10),l.e(e.t0);case 30:return e.prev=30,l.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[10,27,30,33]])}))),O.apply(this,arguments)}function R(e,t){return H.apply(this,arguments)}function H(){return H=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,c,u,l,p,d,f,h,v,m,b,g,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.file(x.CLASSIC_COMMENTS_FILE),!r){e.next=10;break}return e.next=4,r.async("text");case 4:a=e.sent,i=new DOMParser,o=i.parseFromString(a,"text/xml"),c=o.documentElement.childNodes,u=Object(s["a"])(c);try{for(u.s();!(l=u.n()).done;){p=l.value,d=p.getAttribute("id").trim(),f=p.getAttribute("object-id").trim(),h=p.getAttribute("author").trim(),v=parseInt(p.getAttribute("time").trim()),m="",b=Object(s["a"])(p.childNodes);try{for(b.s();!(g=b.n()).done;)w=g.value,"content"===w.tagName&&(m+=w.textContent)}catch(C){b.e(C)}finally{b.f()}t.setComment(d,f,m,h,v)}}catch(C){u.e(C)}finally{u.f()}case 10:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}var F={topic:function(e,t){e.push($(t))}},j={topics:function(e,t){var n=t.getAttribute("type");e[n]||(e[n]=[]),N(e[n],t,F)}},V={title:"title",children:function(e,t){e.children=N({},t,j)},"xhtml:img":function(e,t){e.image=M({},t,{src:"xhtml:src",width:{n:"svg:width",fn:parseInt},height:{n:"svg:height",fn:parseInt}})},labels:function(e,t){e.labels=N([],t,{label:function(e,t){e.push(String(t.textContent))}})},notes:function(e,t){e.notes=N({},t,{},(function(e,t){e.plain&&e.plain.content?e.plain.content+="\r\n".concat(t.textContent):e.plain={content:t.textContent}}))},"marker-refs":function(e,t){e.markers=N([],t,{},(function(e,t){e.push(M({},t,{markerId:"marker-id"}))}))},position:function(e,t){e.position=M({},t,{x:{n:"svg:x",fn:parseInt},y:{n:"svg:y",fn:parseInt}})},extensions:function(e,t){e.extensions=N([],t,{extension:function(e,t){var n=M({},t,{provider:"provider"});n.content=[],N(null,t,{content:function(e,t){N(n.content,t,{},(function(e,t){e.push({name:t.tagName,content:t.textContent})}))}}),e.push(n)}})}};function $(e){var t=M({},e,{id:"id",href:"xlink:href",structureClass:"structure-class"});return N(t,e,V),t.children||(t.children={}),t}var D={"control-point":function(e,t){var n=String(t.getAttribute("index"));e[n]=M({},t,{amount:{n:"amount",fn:parseFloat},angle:{n:"angle",fn:parseFloat}})}},q={title:"title","control-points":function(e,t){e.controlPoints=N({},t,D)}};function B(e,t){var n=M({},t,{id:"id",end1Id:"end1",end2Id:"end2"});N(n,t,q),e.push(n)}var U={topic:function(e,t){e.rootTopic=$(t)},title:"title",relationships:function(e,t){e.relationships=N([],t,{relationship:B})}};function W(e,t,n){var r=M({},n,{id:"id"});return N(r,n,U),r}function Z(e,t){return K.apply(this,arguments)}function K(){return K=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.file(x.CLASSIC_CONTENT_FILE),!r){e.next=8;break}return e.next=4,r.async("text");case 4:a=e.sent,i=new DOMParser,o=i.parseFromString(a,"text/xml"),N(null,o.documentElement,{sheet:function(e,r){var a=W(t,n,r);t.setSheet(a.id,a)}});case 8:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function J(e,t){return X.apply(this,arguments)}function X(){return X=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.file(x.CLASSIC_META_FILE),!r){e.next=9;break}return e.next=4,r.async("text");case 4:a=e.sent,i=new DOMParser,o=i.parseFromString(a,"text/xml"),s=N({},o.documentElement,{Creator:function(e,t){e.creator=N({},t,{Name:"name",Version:"version"})}}),t.setMeta(s);case 9:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function z(e){return Y.apply(this,arguments)}function Y(){return Y=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new k,e.prev=1,e.next=4,L(n,t);case 4:return e.next=6,R(n,t);case 6:return e.next=8,Z(n,t);case 8:return e.next=10,J(n,t);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),console.error(e.t0),n=void 0;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[1,12]])}))),Y.apply(this,arguments)}function G(e){return Q.apply(this,arguments)}function Q(){return Q=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,r=new C.a,e.next=5,r.loadAsync(t,{base64:"string"===typeof t});case 5:if(a=e.sent,!a.file(x.ZEN_CONTENT_FILE)){e.next=12;break}return e.next=9,I(a);case 9:n=e.sent,e.next=16;break;case 12:if(!a.file(x.CLASSIC_CONTENT_FILE)){e.next=16;break}return e.next=15,z(a);case 15:n=e.sent;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](1),console.error(e.t0),n=void 0;case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e,null,[[1,18]])}))),Q.apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return te=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t instanceof k)){e.next=19;break}if(n=new C.a,r={},a=r[x.KEY_FILE_ENTRIES]={},i=t.attachments,i)for(o in i)s=i[o],s&&(n.file(o.replace(x.CLASSIC_ATTACHMENT_PATH,x.ZEN_RESOURCE_PATH),s),a[o]={});for(l in n.file(x.ZEN_META_FILE,JSON.stringify(t.meta)),a[x.ZEN_META_FILE]={},c=[],u=t.sheets,u)c.push(u[l]);return n.file(x.ZEN_CONTENT_FILE,JSON.stringify(c)),a[x.ZEN_CONTENT_FILE]={},n.file(x.ZEN_MANIFEST_FILE,JSON.stringify(r)),e.next=16,n.generateAsync({type:"blob"});case 16:return e.abrupt("return",e.sent);case 19:return e.abrupt("return",void 0);case 20:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(){return new k}n("dca8"),n("1276");var re=n("2909"),ae=regeneratorRuntime.mark(ve),ie=regeneratorRuntime.mark(me),oe=Object.freeze({NAME:"mind.svg.js",VERSION:"0.1.0.202006",DEF_TOPIC_TYPE:"attached"});function se(e,t,n,r){var a=r instanceof Array?[e,void 0].concat(Object(re["a"])(r)):[e,void 0];for(var i in n){var o=n[i],s=t[i];void 0!==s&&("string"===typeof o?e[o]=s:"function"===typeof o?(a[1]=s,o.apply(t,a)):e[i]=s)}}function ce(e,t){var n;if("text"===t)n=e+"\r\n";else if(e)for(var r in n="",e)n+=ce(e[r],r);else n="";return n}var ue={labels:null,href:null,image:null,markers:function(e,t){var n=e.markers={};for(var r in t){var a=t[r],i=String(a.markerId).split("-"),o=i[0],s=i[1];n[o]=s}},notes:function(e,t){var n=(t.plain&&t.plain.content?t.plain.content:"")+ce(t.html,null);e.notes=n}};function le(e,t,n){var r={id:t.id,title:t.title,direction:t.direction,children:[]};for(var a in se(r,t,ue,[e]),void 0!==n&&(r.topicType=n),t.children){var i=t.children[a];for(var o in i)r.children.push(le(e,i[o],a))}return r}function pe(e){try{var t=[],n=e.sheets;for(var r in n){var a=n[r],i={id:a.id,title:a.title,relationships:a.relationships||[],topic:le(e,a.rootTopic)};t.push(i)}return t}catch(o){return void console.error(o)}}var de={labels:null,href:null,image:null,markers:function(e,t){var n=e.markers=[];for(var r in t){var a=t[r];n.push({markerId:"".concat(r,"-").concat(a)})}},notes:function(e,t){e.notes={plain:{content:t}}}};function fe(e,t){var n={id:e.id,title:e.title,direction:e.direction,children:{}};se(n,e,de,[t]);var r=n.children;if(e.children){var a=e.children;for(var i in a){var o=a[i],s=fe(o,t),c=o.topicType||oe.DEF_TOPIC_TYPE;(r[c]||(r[c]=[])).push(s)}}return n}function he(e,t){try{for(var n in e){var r=e[n],a={id:r.id,title:r.title,relationships:[],rootTopic:fe(r.topic,t)};t.setSheet(a.id,a)}return t.setMeta({creator:{name:oe.NAME,version:oe.VERSION}}),t}catch(i){return void console.error(i)}}function ve(e,t){var n,r,a,i,o;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:t||(t=0),c.t0=regeneratorRuntime.keys(e);case 2:if((c.t1=c.t0()).done){c.next=27;break}return n=c.t1.value,r=e[n],c.next=7,{level:t,topic:r};case 7:if(!r.children){c.next=25;break}a=Object(s["a"])(ve(r.children,t+1)),c.prev=9,a.s();case 11:if((i=a.n()).done){c.next=17;break}return o=i.value,c.next=15,o;case 15:c.next=11;break;case 17:c.next=22;break;case 19:c.prev=19,c.t2=c["catch"](9),a.e(c.t2);case 22:return c.prev=22,a.f(),c.finish(22);case 25:c.next=2;break;case 27:case"end":return c.stop()}}),ae,null,[[9,19,22,25]])}function me(e){var t,n,r,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:i.t0=regeneratorRuntime.keys(e);case 1:if((i.t1=i.t0()).done){i.next=22;break}t=i.t1.value,n=Object(s["a"])(ve([e[t].topic])),i.prev=4,n.s();case 6:if((r=n.n()).done){i.next=12;break}return a=r.value,i.next=10,a;case 10:i.next=6;break;case 12:i.next=17;break;case 14:i.prev=14,i.t2=i["catch"](4),n.e(i.t2);case 17:return i.prev=17,n.f(),i.finish(17);case 20:i.next=1;break;case 22:case"end":return i.stop()}}),ie,null,[[4,14,17,20]])}var be=n("7668"),ge=function(){var e=this;return[{caption:"File",subItems:be["c"]()?[{caption:"New&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+Alt+N",fn:this.onNewWorkBook},{separate:!0},{caption:"Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+O",fn:this.onOpen},{caption:"Save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+S",fn:this.onSave},{separate:!0},{caption:"Export as Markdown",fn:this.onExportMarkdown}]:[{caption:"New&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+Alt+N",fn:this.onNewWorkBook},{separate:!0},{caption:"Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+O",fn:this.onOpen},{caption:"Save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+S",fn:this.onSave},{caption:"Save As...",fn:this.onSaveAs},{separate:!0},{caption:"Export as Markdown",fn:this.onExportMarkdown}]},{caption:"Pages",subItems:[{caption:"Create a Empty Page",fn:this.onNewPage},{caption:"Rename Current Page",fn:this.onRenamePage},{caption:"Delete Current Page",fn:this.onDeletePage}]},{separate:!0},{svg:{width:17,height:17,html:'<path d="M2 13H15V4H5M5 3L3.5 4L5 5V3L3.5 4" />'},caption:"Undo",fn:this.onUndo},{svg:{width:17,height:17,html:'<path d="M15 13H2V4H13M12 3L13.5 4L12 5V3L13.5 4" />'},caption:"Redo",fn:this.onRedo},{svg:{width:17,height:17,html:'<path d="M13 6V2H3V15H10M13 10A3 3 0 1 1 7 10A3 3 0 1 1 13 10M12 12L15 15M5 5H11" />'},caption:"Search",fn:this.onStartSearch},{separate:!0},{svg:{width:26,height:17,html:'<path d="M2 3H17V7H2V3H4M2.5 12H7.5M5 9.5V14.5M10 7V12H13M14 10H25V14H13V10H17" />'},caption:"Add Child",fn:function(){return e.execCmd("addSubTopic")}},{svg:{width:26,height:17,html:'<path d="M1 8H7M4 5V11M10 5H25V11H10V5H17M10 8H25" />'},caption:"Add Sibling",notForRoot:!0,fn:function(){return e.execCmd("addSiblingTopic")}},{svg:{width:26,height:17,html:'<path d="M18 8V5H3V10H14M15 8L23 13M23 8L15 13" />'},caption:"Remove",notForRoot:!0,fn:function(){return e.execCmd("deleteTopic")}},{caption:"Properties:"},{svg:{width:17,height:17,viewBox:"0 0 22 22",html:'<path d="M3 10.5L7 5H19V17H7L3 10.5M6 10.5A2 2 0 1 1 10 10.5A2 2 0 1 1 6 10.5" />'},caption:"Lables",fn:function(){return e.invokePropertyEditor("labels")}},{svg:{width:17,height:17,viewBox:"0 0 22 22",html:'<path d="M3 19V4H13V13H3M13 8H19V16H10V13" />'},caption:"Markers",fn:function(){return e.invokePropertyEditor("markers")}},{svg:{width:17,height:17,viewBox:"0 0 22 22",html:'<path d="M3 1H13L18 6V20H3V1M13 1V6H18M6 4H10M6 7H10M6 10H15M6 13H15M6 16H13" />'},caption:"Notes",fn:function(){return e.invokePropertyEditor("notes")}},{svg:{width:17,height:17,viewBox:"0 0 22 22",html:'<path d="M3 5H18V17H3V5M3 16L7 10L10 13L13 7L18 13" />'},caption:"Image",fn:function(){return e.$refs.mindView.invokeImagePicker()}},{svg:{width:17,height:17,viewBox:"0 0 22 22",html:'<path d="M9 7L11 5A2 2 0 0 1 15 9L13 11M7 9L5 11A2 2 0 0 0 9 15L11 13M7 13L13 7" />'},caption:"link or attachment",fn:function(){return e.$refs.mindView.invokePropertyEditor("href")}},{separate:!0},{caption:"Fold",subItems:[{caption:"No fold",fn:function(){return e.$refs.mindView.mind.fold(0)}},{separate:!0},{caption:"Fold to level 1",fn:function(){return e.$refs.mindView.mind.fold(1)}},{caption:"Fold to level 2",fn:function(){return e.$refs.mindView.mind.fold(2)}},{caption:"Fold to level 3",fn:function(){return e.$refs.mindView.mind.fold(3)}}]}]},we={name:"App",components:{floatToolbar:m},data:function(){return{showMenuContent:!0,mind:void 0,currentPage:void 0,menuContent:ge.call(this),requestInput:void 0,requestSearch:void 0}},methods:{log:console.log,_T:u["translate"].get.bind(u["translate"]),pickPageList:function(){var e=this,t=this.menuContent[1].subItems;t.splice(3);var n=this.mind;if(n){n.length>0&&t.push({separate:!0});var r=function(r){var a=n[r];t.push({pageID:a.id,caption:a.title,fn:function(){e.onSwitchPage(r)}})};for(var a in n)r(a)}},markMenuEditable:function(e){for(var t=this.menuContent.length-3;t>=7;t--)this.menuContent[t].disable=!e||this.menuContent[t].notForRoot&&e.level<=0;this.$refs.toolbar.$forceUpdate()},saveCurrentPage:function(){this.currentPage&&(this.currentPage.topic=this.$refs.mindView.mind.data)},loadAttachments:function(e){var t=this.$refs.mindView.attachments;t.clear();var n,r=Object(s["a"])(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.item(a.path,a.value)}}catch(i){r.e(i)}finally{r.f()}},cleanAttachments:function(e){e||(e=ne());var t,n=this.$refs.mindView.attachments,r=Object(s["a"])(me(this.mind));try{for(r.s();!(t=r.n()).done;){var a=t.value.topic;if(a.image&&String(a.image.src).startsWith(c["a"].ATTACHMENT_LINK_PREFIX)){var i=String(a.image.src).substr(c["a"].ATTACHMENT_LINK_PREFIX.length);e.setAttachment(i,n.item(i).data)}if(a.href&&String(a.href).startsWith(c["a"].ATTACHMENT_LINK_PREFIX)){var o=String(a.href).substr(c["a"].ATTACHMENT_LINK_PREFIX.length);e.setAttachment(o,n.item(o).data)}}}catch(u){r.e(u)}finally{r.f()}return this.loadAttachments(e.attachmentInterator()),e},onNewWorkBook:function(){be["b"]()},onNewPage:function(){if(this.saveCurrentPage(),this.mind){var e=Date.now().toString(16),t=this.currentPage={id:e,title:"".concat(u["translate"].get("page"),"-").concat(e),topic:{title:u["translate"].get("Center Topic")}};this.mind.push(t),this.pickPageList(),this.loadPage(t)}},onRenamePage:function(){var e=this;this.closeAllPanel(),this.showInputPanel("Rename Page:","Input page name",this.currentPage&&this.currentPage.title,(function(t){t=String(t).trim(),t?(e.saveCurrentPage(),e.currentPage&&t&&(e.currentPage.title=t,e.pickPageList(),e.loadPage(e.currentPage))):e.$tip.error(u["translate"].get("Can not rename a page as empty title!"))}))},onDeletePage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$tip.confirm(void 0,{html:"".concat(u["translate"].get("The deleted page can not be restored!"),"<br/>").concat(u["translate"].get("Are you sure to continue?"))});case 2:n=t.sent,0===n&&e.currentPage&&e.mind&&(r=e.currentPage.title,a=e.mind.indexOf(e.currentPage),a>=0&&e.mind.splice(a,1),e.pickPageList(),e.mind.length<=0?e.onNewPage():(a>=e.mind.length&&(a-=1),e.onSwitchPage(a)),e.$forceUpdate(),e.$tip.info("[".concat(r,"] ")+u["translate"].get("has been deleted!")));case 4:case"end":return t.stop()}}),t)})))()},onOpen:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,be["d"]();case 2:if(n=t.sent,!n){t.next=15;break}return t.next=6,e.$tip.confirm(void 0,{html:"".concat(u["translate"].get("Open a mindmap file will cover the current mindmap if it has not been saved."),"<br/>").concat(u["translate"].get("Are you sure to continue?"))});case 6:if(r=t.sent,0!==r){t.next=15;break}return t.next=10,G(n);case 10:a=t.sent,i=e.mind=pe(a),e.loadAttachments(a.attachmentInterator()),e.pickPageList(),e.loadPage(i[0]);case 15:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.saveCurrentPage(),n=e.cleanAttachments(),he(e.mind,n),t.next=5,ee(n);case 5:r=t.sent,r&&be["e"](r);case 7:case"end":return t.stop()}}),t)})))()},onSaveAs:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.saveCurrentPage(),n=e.cleanAttachments(),he(e.mind,n),t.next=5,ee(n);case 5:r=t.sent,r&&be["f"](r);case 7:case"end":return t.stop()}}),t)})))()},onSaveAsInvokeByHost:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.saveCurrentPage(),r=t.cleanAttachments(),he(t.mind,r),n.next=5,ee(r);case 5:a=n.sent,a&&be["e"](a,{filePath:e.detail.filePath});case 7:case"end":return n.stop()}}),n)})))()},onExportMarkdown:function(){var e=[],t=[],n=u["translate"].get("Image of topic"),r=u["translate"].get("Link to reference"),a=this.$refs.mindView.attachments,i=0,o=new Promise((function(e){return e()}));this.saveCurrentPage();var l,p=Object(s["a"])(me(this.mind));try{for(p.s();!(l=p.n()).done;){var d=l.value,f=d.level,h=d.topic;if(e.push("".concat("#".repeat(f+1)," ").concat(h.title)),h.notes&&e.push(String(h.notes).trim()),h.href&&!String(h.href).startsWith(c["a"].ATTACHMENT_LINK_PREFIX)&&e.push("[".concat(r,"](").concat(h.href,")")),h.labels||h.markers){if(e.push("```"),h.labels instanceof Array&&e.push(h.labels.join(" ")),h.markers)for(var v in h.markers){var m=h.markers[v];e.push("".concat(u["translate"].get(v),": ").concat(u["translate"].get(m)))}e.push("```")}h.image&&(String(h.image.src).startsWith(c["a"].ATTACHMENT_LINK_PREFIX)?function(){var r="image".concat(i++);e.push("![".concat(n,"][").concat(r,"]"));var s=String(h.image.src).substr(c["a"].ATTACHMENT_LINK_PREFIX.length);o=o.then((function(){return new Promise((function(e){var n=s.toLowerCase();n=n.endsWith(".png")?"image/png;":n.endsWith(".gif")?"image/gif;":n.endsWith(".ico")?"image/x-icon;":"image/jpeg;";var i=a.item(s).data,o=new FileReader;o.onload=function(e){return t.push("[".concat(r,"]:").concat(String(e.target.result).replace("application/octet-stream;",n)))},o.onloadend=function(){return e()},o.readAsDataURL(i)}))}))}():e.push("![".concat(n,"](").concat(h.image.src,' "').concat(n,'")')))}}catch(b){p.e(b)}finally{p.f()}o.finally((function(){var n=new Blob(["".concat(e.join("\r\n"),"\r\n\r\n").concat(t.join("\r\n"))]);be["g"](n,u["translate"].get("Markdown File(*.md)"),"md",!0)}))},onFocusTopicChanged:function(e){this.markMenuEditable(e)},onBlurFloatPanel:function(){this.closeInputPanel()},onHistoryChanged:function(e){this.menuContent[3].disable=e.undo<=0,this.menuContent[4].disable=e.redo<=0,this.$refs.toolbar.$forceUpdate()},onSwitchPage:function(e){var t=this.mind;this.saveCurrentPage(),t&&t.length>e&&e>=0&&this.loadPage(t[e])},onUndo:function(){this.$refs.mindView.history.undo(),this.onHistoryChanged(this.$refs.mindView.history.count)},onRedo:function(){this.$refs.mindView.history.redo(),this.onHistoryChanged(this.$refs.mindView.history.count)},loadPage:function(e){if(e){this.currentPage=e,this.cleanAttachments(),this.$refs.mindView.showMind(e.topic),this.closeAllPanel();for(var t=this.menuContent[1].subItems,n=t.length,r=4;r<n;r++)t[r].style=t[r].pageID===e.id?{fontWeight:"800"}:void 0;this.markMenuEditable(),this.$forceUpdate()}},execCmd:function(e){var t=this.$refs.mindView[e];"function"===typeof t&&t()},invokePropertyEditor:function(e){var t=this.$refs.mindView;t&&(t.blurFloatPanel(),t.invokePropertyEditor(e))},closeAllPanel:function(){this.$refs.mindView.blurFloatPanel(),this.requestSearch=void 0},showInputPanel:function(e,t,n,r,a){this.requestInput={caption:e,tip:t,value:n,confirm:r,cancel:a}},closeInputPanel:function(){this.requestInput=void 0},onInputConfirm:function(){var e=this.requestInput;if(this.requestInput=void 0,e){var t=e.confirm;"function"===typeof t&&t(e.value)}},onInputCancel:function(){var e=this.requestInput;if(this.requestInput=void 0,e){var t=e.cancel;"function"===typeof t&&t(e.value)}},onStartSearch:function(){this.closeAllPanel(),this.requestSearch={value:"",iterator:void 0,record:[]}},onSearchNext:function(){var e=this.requestSearch;if(e&&e.value){var t;e.iterator||(e.iterator=this.$refs.mindView.mind.getTopicIterator(),e.record=[]);var n=!1;while(!n&&!(t=e.iterator.next()).done){var r=t.value.topicData();for(var a in r)if(String(r[a]).match(e.value)){n=!0;break}}if(n){var i=t.value;e.record.push(i),i.focus(!0),this.$refs.mindView.toCenter(i)}else t.done&&(this.$tip.warn(u["translate"].get("Searching operation have reached the end of the current mindmap")),e.iterator=void 0)}},onSearchPrev:function(){var e=this.requestSearch,t=e&&e.record;if(t&&t.length>1){var n;t.pop();while(void 0!==(n=t.pop())){var r=this.$refs.mindView.mind.getTopicIterator(),a=void 0;while(!(a=r.next()).done)if(a.value.isSame(n)){n.focus(!0),this.$refs.mindView.toCenter(n),t.push(n),e.iterator=r,console.log("prev",e);break}if(a&&!a.done)break}}},onSearchInputChange:function(){this.requestSearch&&(this.requestSearch.record=[],this.requestSearch.iterator=this.$refs.mindView.mind.getTopicIterator())},onSearchCancel:function(){this.closeAllPanel()}},mounted:function(){var e=this;window.addEventListener("vscode.notify.save",this.onSave.bind(this)),window.addEventListener("vscode.notify.saveAs",this.onSaveAsInvokeByHost.bind(this)),this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,be["a"]();case 2:if(n=t.sent,!n){t.next=13;break}return t.next=6,G(n);case 6:r=t.sent,a=e.mind=pe(r),e.loadAttachments(r.attachmentInterator()),e.pickPageList(),e.loadPage(a[0]),t.next=16;break;case 13:e.$refs.mindView.attachments.clear(),e.mind=[],e.onNewPage();case 16:case"end":return t.stop()}}),t)}))))}},Ce=we,xe=(n("034f"),Object(h["a"])(Ce,a,i,!1,null,null,null)),ke=xe.exports,ye=(n("a214"),{render:function(){return""}}),Ee=function(){function e(t,n,r,a){var i=this;Object(b["a"])(this,e);try{if(n||(n={}),n.buttons||(n.buttons=[u["translate"].get("OK"),u["translate"].get("CANCEL")]),document.querySelector("div.nano-confirm-dlg-bg"))a("Another confirm dialog is still running!");else{this.resolve=r,this.reject=a;var o=this.rootElement=document.createElement("div");o.setAttribute("class","nano-confirm-dlg-bg"),o.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),o.addEventListener("keydown",(function(e){e.stopPropagation(),e.preventDefault()})),o.addEventListener("touchstart",(function(e){e.stopPropagation(),e.preventDefault()}));var s=document.createElement("div");s.setAttribute("class",n.class?"nano-confirm-dlg ".concat(n.class):"nano-confirm-dlg"),n.style&&s.setAttribute("style",n.style),o.appendChild(s);var c=document.createElement("div");c.setAttribute("class","nano-confirm-dlg-content"),t&&c.appendChild(document.createTextNode(t)),n.html&&c.insertAdjacentHTML("beforeend",n.html),s.appendChild(c);var l=document.createElement("div");l.setAttribute("class","nano-confirm-dlg-buttons-bar"),s.appendChild(l),this.buttons=[];var p=function(e){var t=document.createElement("button");t.setAttribute("class","nano-confirm-dlg-button"),t.appendChild(document.createTextNode(n.buttons[e])),t.addEventListener("click",(function(){return i.onClick(e)})),l.appendChild(t),i.buttons.push(t)};for(var d in n.buttons)p(d);if(n.timeout>0&&n.default>=0&&n.default<this.buttons.length){this.timeout=n.timeout;var f=this.buttons[n.default],h=u["translate"].get("S");f.appendChild(document.createTextNode("(".concat(parseInt((this.timeout+999)/1e3)).concat(h,")"))),this.timer=setInterval((function(){return i.onTimer(n.default,f,n.buttons[n.default],h)}),1e3)}var v=document.querySelector("body");v.appendChild(o)}}catch(m){a(m)}}return Object(g["a"])(e,[{key:"onClick",value:function(e){"function"===typeof this.resolve&&this.resolve(parseInt(e)),this.timer&&(clearInterval(this.timer),this.timer=void 0),this.rootElement&&(this.rootElement.remove(),this.rootElement=void 0)}},{key:"onTimer",value:function(e,t,n,r){this.timeout-=1e3,this.timeout>0?t.innerHTML="".concat(n,"(").concat(parseInt((this.timeout+999)/1e3)).concat(r,")"):this.onClick(e)}}]),e}(),Se=function(){function e(t,n,r){var a=this;Object(b["a"])(this,e),r||(r={});var i=document.querySelector("body");(this.bgDiv=document.querySelector("div.nano-tip-bg-box"))||(this.bgDiv=document.createElement("div"),this.bgDiv.setAttribute("class","nano-tip-bg-box"),i.appendChild(this.bgDiv));var o=this.contentDiv=document.createElement("div");o.setAttribute("class",r.class?"nano-tip-content-box ".concat(r.class):"nano-tip-content-box"),n&&o.insertAdjacentHTML("afterbegin",n),t&&o.appendChild(document.createTextNode(t)),r.style&&o.setAttribute("style",r.style),r.html&&o.insertAdjacentHTML("beforeend",r.html),this.bgDiv.appendChild(o),r.timeout>0&&(this.timer=setTimeout((function(){a.close()}),r.timeout))}return Object(g["a"])(e,[{key:"close",value:function(){this.contentDiv&&(this.contentDiv.remove(),this.contentDiv=void 0),this.timer&&(clearTimeout(this.timer),this.timer=void 0),this.bgDiv&&this.bgDiv.children.length<=0&&this.bgDiv.remove(),this.bgDiv=void 0}}]),e}();function Ae(e,t,n){return n||(n={timeout:3e3}),new Se(e,t,n)}var Te={custom:Ae,info:function(e,t){return Ae(e,'<svg class="nano-tip-icon">\n            <circle cx="8" cy="8" r="8" stroke="none" fill="#09f"/>\n            <path class="nano-tip-icon-flag" d="M6 7L8 6V13V7M6 13H10M8 2V4" />\n        </svg>',t)},warn:function(e,t){return Ae(e,'<svg class="nano-tip-icon">\n            <circle cx="8" cy="8" r="8" stroke="none" fill="#fa0"/>\n            <path class="nano-tip-icon-flag" d="M8 10L7.5 2.5H8.5L8 10M8 12V14" />\n        </svg>',t)},error:function(e,t){return Ae(e,'<svg class="nano-tip-icon">\n            <circle cx="8" cy="8" r="8" stroke="none" fill="#f00"/>\n            <path class="nano-tip-icon-flag" d="M4 4L12 12M12 4L4 12" />\n        </svg>',t)},confirm:function(e,t){return new Promise((function(n,r){return new Ee(e,t,n,r)}))}};function _e(e){e.prototype.$tip=Te}var Ie,Pe,Me=ye,Ne=(n("9474"),Object(h["a"])(Me,Ie,Pe,!1,null,null,null)),Le=(Ne.exports,{"zh-cn":n("f201")}),Oe=6e3;function Re(e){this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0),window.removeEventListener(this.event,this.fn),this.resolve(e.detail)}function He(e){console.log("timeout:",e.event),window.removeEventListener(e.event,e.fn),e.timerID=void 0,e.reject()}var Fe=function(){function e(t){Object(b["a"])(this,e),this.host=t,window.addEventListener("message",this.onMessage.bind(this))}return Object(g["a"])(e,[{key:"onMessage",value:function(e){var t=e.data;if(t.$return){var n=new CustomEvent("vscode.".concat(t.$return),{detail:t});window.dispatchEvent(n)}else if(t.$notify){var r=new CustomEvent("vscode.notify.".concat(t.$notify),{detail:t});window.dispatchEvent(r)}}},{key:"send",value:function(e,t){this.host.postMessage(Object.assign({command:e},t))}},{key:"waitResult",value:function(e,t){return new Promise((function(n,r){var a="vscode.".concat(e),i={event:a,resolve:n,reject:r},o=Re.bind(i);i.fn=o,i.timerID=setTimeout(He,t||Oe,i),window.addEventListener(a,o,{once:!0})}))}},{key:"sendAndWait",value:function(e,t,n){var r=this;return new Promise((function(a,i){var o="vscode.".concat(e),s={event:o,resolve:a,reject:i},c=Re.bind(s);s.fn=c,s.timerID=setTimeout(He,n||Oe,s),window.addEventListener(o,c,{once:!0}),r.send(e,t)}))}}]),e}(),je=new Promise((function(e){return e()})),Ve="function"===typeof acquireVsCodeApi?acquireVsCodeApi():void 0;if(console.log(Ve?"in vscode mode":"in normal web mode"),Ve){var $e=new Fe(Ve);be["h"]($e),je=je.then((function(){return $e.sendAndWait("getEnv")})).then((function(e){u["translate"].map(u["lang"][e.language]),u["translate"].map(Le[e.language])}))}else je=je.then((function(){u["translate"].map(u["lang"].zhCN),u["translate"].map(Le.zhCN)}));je.finally((function(){r["a"].use(u["mindSvgView"]),_e(r["a"]),new r["a"]({render:function(e){return e(ke)}}).$mount("#app")}))},7668:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return d})),n.d(t,"h",(function(){return f}));n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("2b3d");var r=n("ade3"),a=n("da31"),i=void 0;function o(){return i?i.sendAndWait("loadCurrentFile").then((function(t){if(t.value){var n=e.from(t.value,"base64"),r=new Blob([n]);return r}})):new Promise((function(e){return e(void 0)}))}function s(t,n){if(i){var r=new FileReader;r.onload=function(t){var r=e.from(t.target.result);i.send("saveCurrentFile",Object.assign({value:r.toString("base64")},n))},r.readAsArrayBuffer(t)}else{var o=URL.createObjectURL(t);a["utility"].dynInvokeLink(o,{download:"*.xmind"}),URL.revokeObjectURL(o)}}function c(t){var n=new FileReader;n.onload=function(t){var n=e.from(t.target.result);i.send("saveCurrentFileAs",{value:n.toString("base64")})},n.readAsArrayBuffer(t)}function u(t,n,o,s){if(i){var c=new FileReader;c.onload=function(t){var a=e.from(t.target.result);i.send("saveToFile",{filter:Object(r["a"])({},n,[o]),value:a.toString("base64"),openAfterSave:s})},c.readAsArrayBuffer(t)}else{var u=URL.createObjectURL(t);a["utility"].dynInvokeLink(u,{download:"*.".concat(o)}),URL.revokeObjectURL(u)}}function l(){i?i.send("exec",{id:"vsc-nano-mindmap.newMindMap"}):window.open(location.href)}function p(){return i?(i.send("exec",{id:"vsc-nano-mindmap.openMindMap"}),new Promise((function(e){return e(void 0)}))):a["utility"].pickFile(".xmind")}function d(){return void 0==i}function f(e){i=e}}).call(this,n("b639").Buffer)},"85ec":function(e,t,n){},8667:function(e,t,n){},9474:function(e,t,n){"use strict";var r=n("1b93"),a=n.n(r);a.a},f201:function(e){e.exports=JSON.parse('{"Confirm":"确定","Cancel":"取消","Next":"下一个","Prev":"上一个","search:":"查找：","Input search information":"输入要查找的主题/标签/备注/链接","Create a new workbook will cover the current mindmap if it has not been saved.":"新建一个思维导图文件将覆盖当前的编辑画面。建议您先保存当前编辑的内容在继续该操作。","Are you sure to continue?":"您确定要继续吗？","page":"页面","Center Topic":"中心主题","Can not rename a page as empty title!":"无法将页面命名为空的名称！","The deleted page can not be restored!":"注意：删除的页面将无法被被恢复！","has been deleted!":"已经被删除","Open a mindmap file will cover the current mindmap if it has not been saved.":"载入一个思维导图文件将覆盖当前的编辑画面。建议您先保存当前编辑的内容在继续该操作。","Image of topic":"该主题的图片","Link to reference":"参考链接","priority":"优先级","task":"任务进度","Searching operation have reached the end of the current mindmap":"当前思维导图页面已被查找完成","Rename Page:":"重命名当前页面：","Input page name":"输入页面的名称","menu":"菜单","File":"文件","New&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+Alt+N":"新建&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+Alt+N","Open&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+O":"打开……&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+O","Save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+S":"保存……&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+S","Save As...":"另存为……","Export as Markdown":"导出为Markdown文档","Pages":"页面","Create a Empty Page":"创建一个空页面","Rename Current Page":"重命名当前页面","Delete Current Page":"删除当前页面","Undo":"撤销","Redo":"重做","Search":"查找","Add Child":"添加子主题","Add Sibling":"添加兄弟主题","Remove":"删除主题","Properties:":"属性:","Lables":"标签","Markers":"标记","Notes":"批注","Image":"图片","link or attachment":"链接或附件","OK":"确定","CANCEL":"取消","Markdown File(*.md)":"Markdown文件(*.md)","Fold":"折叠","No fold":"不折叠","Fold to level 1":"折叠到第一级主题","Fold to level 2":"折叠到第二级主题","Fold to level 3":"折叠到第三级主题"}')}});
//# sourceMappingURL=app.714c2911.js.map