!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).app=t()}(this,(function(){"use strict";function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}function t(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,c,"next",e)}function c(e){t(a,i,o,s,c,"throw",e)}s(void 0)}))}}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o={exports:{}},a={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(a),function(e){var t=a.exports.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},i=Object.prototype,o=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),a=new _(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var h={};function d(){}function v(){}function m(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(T([])));b&&b!==i&&o.call(b,s)&&(g=b);var w=m.prototype=d.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,n){function r(i,a,s,c){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):n.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,c)}))}c(u.arg)}var i;this._invoke=function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}}function A(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,l(w,"constructor",m),l(m,"constructor",v),v.displayName=l(m,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},r.awrap=function(e){return{__await:e}},x(k.prototype),l(k.prototype,c,(function(){return this})),r.AsyncIterator=k,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var a=new k(f(e,t,n,i),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(w),l(w,u,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},r.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(o);var s=o.exports(),c=s;try{regeneratorRuntime=s}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=s:Function("r","regeneratorRuntime = r")(s)}var u=void 0;function l(){return u}function f(){u=void 0}function p(e){e||(e=3e3);var t=Date.now();return new Promise((function n(r){navigator.serviceWorker.controller?r(navigator.serviceWorker.controller):Date.now()-t<e?setTimeout(n,10,r):r(void 0)}))}var h=Object.create("serviceWorker"in navigator?{getLastError:l,clearLastError:f,addMessenger:function(e){if("function"==typeof e){var t=function(t){e(t?t.data:void 0)};return navigator.serviceWorker.addEventListener("message",t),t}},removeMessenger:function(e){navigator.serviceWorker.removeEventListener("message",e)},getMessage:function(){return new Promise((function(e){navigator.serviceWorker.addEventListener("message",(function(t){e(t?t.data:void 0)}),{once:!0})}))},postMessage:function(e,t,r){return n(c.mark((function n(){var i;return c.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(),n.next=4,p(r);case 4:if(!(i=n.sent)){n.next=8;break}return i.postMessage({msg:e,param:t}),n.abrupt("return",i);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),u=n.t0;case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},sendMessage:function(e,t,r){return n(c.mark((function n(){var i;return c.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(),n.next=4,p(r);case 4:if(!(i=n.sent)){n.next=9;break}return n.next=8,new Promise((function(n,o){var a=new MessageChannel,s=setTimeout(o,r||3e3,void 0);a.port1.onmessage=function(e){s&&clearTimeout(s),n(e.data)},i.postMessage({msg:e,param:t},[a.port2])}));case 8:return n.abrupt("return",n.sent);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),u=n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()},start:function(e,t,r,i){return n(c.mark((function n(){var o;return c.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(),n.next=4,navigator.serviceWorker.register(e,t||{});case 4:return o=n.sent,"function"==typeof r&&r(o),n.abrupt("return",o);case 9:if(n.prev=9,n.t0=n.catch(0),u=n.t0,"function"!=typeof i){n.next=16;break}i(n.t0),n.next=17;break;case 16:throw n.t0;case 17:case"end":return n.stop()}}),n,null,[[0,9]])})))()}}:{getLastError:l,clearLastError:f,addMessenger:function(e){},removeMessenger:function(e){},getMessage:function(){return new Promise((function(e,t){u=new Error("ServiceWorker is not supported"),t()}))},postMessage:function(e,t,r){return n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},sendMessage:function(e,t,r){return n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},start:function(e,t,r,i){return n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}});function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g,y={exports:{}},b={exports:{}};function w(){return g||(g=1,function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new L(r||[]);return i(a,"_invoke",{value:S(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(N([])));x&&x!==n&&r.call(x,a)&&(b=x);var k=y.prototype=m.prototype=Object.create(b);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,o,a,s){var c=f(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function S(e,t,n){var r=p;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=_(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=f(e,t,n);if("normal"===c.type){if(r=n.done?d:"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=f(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:M}}function M(){return{value:t,done:!0}}return g.prototype=y,i(k,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:g,configurable:!0}),g.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},A(E.prototype),u(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(k),u(k,c,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(b)),b.exports}!function(e,t){!function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);const i="function"==typeof crypto.randomUUID?crypto.randomUUID.bind(crypto):function(){return crypto.getRandomValues(new Uint8Array(10)).join("-")};function o(e,t,...n){if(e)return e;throw"function"==typeof t?t.apply(void 0,n):t}const a=Symbol("EBlockContainer.DomEventHandler"),s=Symbol("EBlockContainer.DomEventProc");class c{static DomEventDispatcher=s;constructor(){Object.defineProperty(this,a,{value:this[s].bind(this),writable:!1})}define(e){throw new Error("No implementation")}undefine(e){throw new Error("No implementation")}get stageContainer(){throw new Error("No implementation")}get eventContainer(){throw new Error("No implementation")}enableDomEvent(e){return this.eventContainer.addEventListener(e,this[a]),this}disableDomEvent(e){return this.eventContainer.removeEventListener(e,this[a]),this}addEventListener(...e){return this.eventContainer.addEventListener(...e),this}removeEventListener(...e){return this.eventContainer.addEventListener(...e),this}[s](e){throw new Error("No implementation")}}class u{static RegistryMap=new WeakMap;static AcquireRegistry(e){o(e instanceof c,Error,"The _container must be an instance of EBlockContainer");let t=u.RegistryMap.get(e);return t instanceof WeakSet||(t=new WeakSet,u.RegistryMap.set(e,t)),t}static peekPredefineds(e,t){const n=[...e.querySelectorAll("[eblock-predefined]")];return t||(t=""),n.forEach((e=>e.setAttribute("eblock-predefined",t))),n}static peekScripts(e){let t={};return[...e.querySelectorAll("[eblock-script]")].forEach((e=>{let n=new Function("declarer",`${e.textContent};return declarer;`);try{t=n(t)}catch(t){console.error("Exception raised when generating the script",e,t)}})),t}static peekTemplateNode(e){return e.querySelector("[eblock-template]")}constructor(e){o(e&&"function"==typeof e.querySelectorAll,Error,"The _node must be an instance can invoke querySelector");const t=i();Object.defineProperties(this,{id:{writable:!1,value:t},source:{writable:!1,value:e},predefineds:{writable:!1,value:u.peekPredefineds(e,t)},scripts:{writable:!1,value:u.peekScripts(e)},templateNode:{writable:!1,value:u.peekTemplateNode(e)}})}register(e){const t=u.AcquireRegistry(e);return t.has(this)||(this.predefineds.forEach((t=>e.define(t.cloneNode(!0)))),"function"==typeof this.onFactorRegister&&this.onFactorRegister(e),this.callScript("onFactorRegister",this,e),t.add(this)),this}unregister(e){const t=u.AcquireRegistry(e);return t.has(this)&&("function"==typeof this.onFactorUnregister&&this.onFactorUnregister(e),this.callScript("onFactorUnregister",this,e),e.undefine(`[eblock-predefined="${this.id}"]`),t.delete(this)),this}generate(e,t,n,...r){o("function"==typeof t&&t.prototype instanceof y,Error,"The _blockClass must be inherited from EBlock"),o(e instanceof Node,Error,"The _containerNode must be an instance of Node");let i=new t(this,n,...r);return e&&i.mount(e),i}generateFromTemplate(){return this.templateNode&&this.templateNode.cloneNode(!0)}queryNodeFromTemplate(e){return this.templateNode&&e&&this.templateNode.querySelector(e)}callScript(e,t,...n){return this.applyScript(e,t,n)}applyScript(e,t,n){const r=this.scripts[e];return"function"==typeof r&&r.apply(t,n)}}const l=Symbol("eblock.block.id"),f=Symbol("eblock.constructor.ref"),p=Symbol("eblock.factor.ref"),h=Symbol("eblock.data.ref"),v=new WeakMap;function m(){return this.source[this.key]}function g(e){this.source[this.key]=e}class y{static GetInstance(e){if(e instanceof Node)try{let t=v.get(e);return t&&new t[f](e,void 0)}catch{return null}}static equal(e,t){return e instanceof y?e.equal(t):void 0===e&&void 0===t}constructor(e,t,...n){let r,a,s=!1;e instanceof Node?(a=e,r=v.get(a),o(r,Error,"The node is not assigned with the avaliable metadata"),o(r[f]===this.constructor,Error,"The node is not matched the special class derived from EBlock")):(o(e instanceof u,Error,"_factorOrNode must be an instance of EBlockFactor or Node"),a=e.generateFromTemplate(),o(a instanceof Node,Error,"Cannot clone the node from the template"),r={[l]:i(),[f]:this.constructor,[p]:e,[h]:t,queuePromise:null},e.callScript("onInitMetadata",e,r,t,a,...n),this.initMetadata(r,t,a,...n),v.set(a,r),s=!0);const c=Object.getOwnPropertyDescriptors(r),d={$assignedNode:{value:a,writable:!1,configurable:!1,enumerable:!0},data:{value:r[h],writable:!1,configurable:!1,enumerable:!0},factor:{value:r[p],writable:!1,configurable:!1,enumerable:!0},blockID:{value:r[l],writable:!1,configurable:!1,enumerable:!0},$stubFlag:{value:!s,writable:!1,configurable:!1,enumerable:!0}};for(let e in c)if("symbol"!=typeof e){let t=c[e];if(t.get||t.set)d["$"+e]=t;else{let n={source:r,key:e};d["$"+e]={get:m.bind(n),set:t.writable?g.bind(n):void 0,configurable:!1,enumerable:t.enumerable}}}for(let e of Object.getOwnPropertySymbols(r))if(!(e in d)){let t={source:r,key:e};d[e]={get:m.bind(t),set:g.bind(t),configurable:!1,enumerable:!1}}Object.defineProperties(this,d),s&&this.queueAction((()=>this.fireEvent("ebevent-create",t)))}initMetadata(e,t,n,...r){}acquireNode(e,t,n){if(e){let r=this.$assignedNode.querySelector(e);return!r&&t?(r=this.factor.queryNodeFromTemplate(e),r&&(r=r.cloneNode(!0)),r&&t.insertAdjacentElement(n||"afterend",r)):t&&t.insertAdjacentElement(n||"afterend",r),r}}equal(e){return e instanceof y&&this.$assignedNode===e.$assignedNode}queueAction(e){return"function"==typeof e&&(this.$queuePromise instanceof Promise?this.$queuePromise=this.$queuePromise.then((()=>{try{return e()}catch(e){console.warn(`Exception raised in processing action in queue[#${this.blockID}]`,e)}})):this.$queuePromise=Promise.resolve(void 0).then((()=>{try{return e()}catch(e){console.warn(`Exception raised in processing action in queue[#${this.blockID}]`,e)}}))),this}fireEvent(e,...t){try{const n=this.factor;[...this.$assignedNode.querySelectorAll(`${this.eventSelectorPrefix||""}[${e}]`)].reverse().forEach((r=>{let i=r.getAttribute(e);i&&n.applyScript(i,this,[...t,r])}));let r=this.$assignedNode.getAttribute(e);r&&n.applyScript(r,this,[...t,this.$assignedNode]);let i=this[`on-${e}`];"function"==typeof i&&i.apply(this,t)}catch(t){console.warn(`Exception raised in fireEvent(${e})[#${this.blockID}]`,t)}return this}mount(e){return e instanceof Node?(this.fireEvent("ebevent-mounting",this.data),e.appendChild(this.$assignedNode),this.fireEvent("ebevent-mounted",this.data)):console.warn("The _containerNode must be an instance of Node"),this}unmount(){return this.fireEvent("ebevent-unmounting",this.data),this.$assignedNode.remove(),this.fireEvent("ebevent-unmounted",this.data)}render(...e){let t={};return this.fireEvent("ebevent-prepare-render",this.data,t,...e).fireEvent("ebevent-rendering",this.data,t,...e).fireEvent("ebevent-rendered",this.data,t,...e)}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function _(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function L(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,C(e,t,"get"))}function N(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,C(e,t,"set"),n),n}
/**
  	                           * @author season <season-studio@outlook.com>
  	                           * @license Apache-2.0
  	                           */function M(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];if(this instanceof M){var a=Reflect.construct(Error,[t].concat(i));return a.code=e,a.detail=n,Object.setPrototypeOf(a,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(a,M),a}return Reflect.construct.apply(Reflect,[M].concat(Array.prototype.slice.call(arguments)))}function I(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){I(o,r,i,a,s,"next",e)}function s(e){I(o,r,i,a,s,"throw",e)}a(void 0)}))}}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function D(e,t,n){return D=R()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&A(i,n.prototype),i},D.apply(null,arguments)}function z(e){var t="function"==typeof Map?new Map:void 0;return z=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return D(e,arguments,T(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),A(r,e)},z(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}M.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(M,Error):M.__proto__=Error;var P=r.default;function j(e,t){if(e)return e;throw"function"==typeof t?t.apply(void 0,[...arguments].slice(2)):t}function F(e,t){if(e&&t){Object.assign(e,t);for(let n in e){let r=e[n];r&&"object"==typeof r&&(e[n]=F(r instanceof Array?[]:{},t[n]))}}return e}function $(e,t,n,r){if(e&&t)if("object"==typeof t){const r=!(arguments.length>2)||n;for(let n in t)Object.defineProperty(e,n,{value:t[n],writable:!1,enumerable:r})}else Object.defineProperty(e,t,{value:n,writable:!1,enumerable:!(arguments.length>3)||r});return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}var q=function(e){E(n,e);var t=U(n);function n(e,r,i){return b(this,n),t.apply(this,arguments)}return x(n,[{key:"initMetadata",value:function(e,t,n,r){}},{key:"name",get:function(){return this.factor.$info.name}},{key:"topic",get:function(){var e=this.$assignedNode.parentNode;return e&&(e=e.parentNode),e&&(e=e.parentNode),e&&y.GetInstance(e)}},{key:"callScript",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.factor.applyScript(e,this,n)}},{key:"applyScript",value:function(e,t,n){return this.factor.applyScript(e,this,n)}}]),n}(y),H=function(e){E(n,e);var t=U(n);function n(e){var r;b(this,n);var i=(r=t.apply(this,arguments)).callScript("getExtensionInfo",k(r));return j(i&&i.name,M,-1,"The extension do not provide it's information and name by function 'getEntensionInfo'"),$(k(r),"$info",i),r}return x(n)}(u);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function V(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var G,Y=new WeakMap,Z=new WeakMap,X=function(e){E(o,e);var t,n,r=W(o);function o(){var e;return b(this,o),V(k(e=r.call(this)),Y,{writable:!0,value:[]}),V(k(e),Z,{writable:!0,value:void 0}),B(k(e),"dragable",!0),B(k(e),"editable",!0),B(k(e),"dragContext",void 0),N(k(e),Z,Object.freeze(F({},o.DefaultConfig))),e}return x(o,[{key:"config",get:function(){return L(this,Z)}},{key:"extensionFactors",get:function(){return L(this,Y)}},{key:"randomID",get:function(){return i()}},{key:"syncConfig",value:function(){var e={result:F({},o.DefaultConfig)};this.fireEvent("topic-event-report-configuration",e),N(this,Z,Object.freeze(e.result||F({},o.DefaultConfig))),this.fireEvent("topic-event-sync-configuration",L(this,Z))}},{key:"fireEvent",value:function(e,t){this.dispatchEvent(e instanceof Event?e:new CustomEvent(e,{detail:t}))}},{key:"translateHRefToURL",value:function(e){var t={source:e,destination:e};return this.fireEvent("topic-event-translate-href-url",t),t}},{key:"getHRefType",value:function(e){var t={href:e,type:"link"};return this.fireEvent("topic-event-get-href-type",t),t.type}},{key:"getImageDataFromElement",value:function(e,t){try{t||(t={});var n=document.createElement("canvas"),r=Number(t.width)||Number(e.width),i=Number(t.height)||Number(e.height);j(r&&i,M,-1,"The width and height is invalid!"),n.width=r,n.height=i;var o=n.getContext("2d");return o.fillStyle=t.fill||"rgba(255,255,255,0)",o.fillRect(0,0,r,i),o.drawImage(e,Number(t.offsetX)||0,Number(t.offsetY)||0),t.toBlob?new Promise((function(e){return n.toBlob((function(t){e({width:r,height:i,data:t})}),"image/".concat(t.type||"png"))})):Promise.resolve({width:r,height:i,data:n.toDataURL("image/".concat(t.type||"png"))})}catch(e){this.warn("Fail in get image's data from an element",e)}}},{key:"getImageData",value:(n=O(P.mark((function e(t,n){var r;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n||(n={}),(r=new Image).src=t,n.crossOrigin&&(r.crossOrigin=n.crossOrigin),e.next=7,r.decode();case 7:return e.next=9,this.getImageDataFromElement(r,n);case 9:return e.abrupt("return",e.sent);case 12:e.prev=12,e.t0=e.catch(0),this.warn("Fail in load image:",t,e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])}))),function(e,t){return n.apply(this,arguments)})},{key:"warn",value:function(){var e;(e=console).warn.apply(e,arguments)}},{key:"confirm",value:(t=O(P.mark((function e(t,n){return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(n||{}).default||0);case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"activeLink",value:function(e){e&&window.open(e,"_blank")}}]),o}(z(EventTarget));function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function J(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}B(X,"DefaultConfig",Object.freeze({padding:10,secondaryPadding:5,levelMargin:46,secondaryLevelMargin:26,siblingMargin:26,secondarySiblingMargin:17,secondaryTopicLevel:2,suitableTitleLineWidth:120,directionPriority:"right",dragStartFocusFilterTimer:50,dragStartNoFocusFilterTimer:100,resourceScheme:"xap",defaultResourceAttachmentPrefix:"resources/",placeholderImageId:"season-topic-predefine-image-picture-placeholder"}));var Q=Symbol("MindmapContainer.ResizeProc"),ee=Symbol("MindmapContainer.ResizeObserverHandler"),te=new WeakMap;G=c.DomEventDispatcher;var ne=function(e){E(n,e);var t=K(n);function n(e,r){var o;b(this,n),j(e instanceof Node,M,-1,"_parentNode must be an instance of Node"),j(r instanceof X,M,-1,"_env must be an instance of MindmapEnvironment"),J(k(o=t.call(this)),te,{writable:!0,value:void 0}),e.innerHTML='\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" tabindex="0" overflow="hidden" width="640" height="480" viewBox="0 0 640 480" style="outline:none;">\n<style>\n    [season-mind-map-svg] {\n        --topic-ui-focus-color: #5cf;\n        --topic-ui-focus-border-color: #055cff;\n        --topic-ui-danger-color: #f22;\n        --topic-ui-emphasize-front-color: #fff;\n        --topic-ui-hover-back-color: #ccc;\n        \n        -webkit-touch-callout: none; /* iOS Safari */\n        -webkit-user-select: none; /* Chrome/Safari/Opera */\n        -khtml-user-select: none; /* Konqueror */\n        -moz-user-select: none; /* Firefox */\n        -ms-user-select: none; /* Internet Explorer/Edge */\n        user-select: none; /* Non-prefixed version, currently not supported by any browser */\n    }\n    \n    [season-mind-map-svg] *::-webkit-scrollbar {\n        width: 10px;\n        height: 10px;\n        background: transparent;\n        cursor: point;\n    }\n    [season-mind-map-svg] *::-webkit-scrollbar-corner {\n        background: transparent;\n    }\n    [season-mind-map-svg] *::-webkit-scrollbar-track {\n        background: transparent;\n        cursor: point;\n    }\n    [season-mind-map-svg] *::-webkit-scrollbar-thumb\n    {\n        -webkit-border-radius: 7px;\n        border-radius: 7px;\n        background: rgba(57,57,57,0.1);\n        cursor: point;\n    }\n    [season-mind-map-svg] *:hover::-webkit-scrollbar-thumb {\n        -webkit-border-radius: 7px;\n        border-radius: 7px;\n        background: rgba(0,0,0,0.1); \n        cursor: point;\n    }\n\n    .season-topic-svg-button > rect {\n        fill: rgba(255,255,255,0.05);\n        stroke: none;\n    }\n    .season-topic-svg-button[d-svg-button-has-border] > rect {\n        fill: rgba(255,255,255,0.05);\n        stroke: var(--topic-ui-hover-back-color);\n    }\n    .season-topic-svg-button > use, .season-topic-svg-button > path {\n        fill: #000;\n        stroke: none;\n    }\n    .season-topic-svg-button:hover > rect {\n        fill: var(--topic-ui-hover-back-color);\n    }\n    .season-topic-svg-button:hover > use, .season-topic-svg-button:hover > path {\n        fill: #000;\n    }\n    .season-topic-svg-button[d-svg-button-danger]:hover > rect {\n        fill: var(--topic-ui-danger-color);\n    }\n    .season-topic-svg-button[d-svg-button-danger]:hover > use, .season-topic-svg-button[d-svg-button-danger]:hover > path {\n        fill: var(--topic-ui-emphasize-front-color);\n    }\n\n    .season-topic-svg-3d-button > rect {\n        fill: url(#season-svg-3d-fill);\n        stroke-width: 0.5px;\n        stroke: #bbb;\n    }\n    .season-topic-svg-3d-button > use, .season-topic-svg-button > path {\n        fill: #000;\n        stroke: none;\n    }\n    .season-topic-svg-3d-button:hover > rect {\n        fill: url(#season-svg-3d-fill-hover);\n        stroke-width: 0.5px;\n        stroke: #bbb;\n    }\n    .season-topic-svg-3d-button:hover > use, .season-topic-svg-button:hover > path {\n        fill: #fff;\n        stroke: none;\n    }\n    .season-topic-svg-3d-button:active > rect {\n        fill: url(#season-svg-3d-fill-active);\n        stroke-width: 0.5px;\n        stroke: #bbb;\n    }\n    .season-topic-svg-3d-button:active > use, .season-topic-svg-button:active > path {\n        fill: #fff;\n        stroke: none;\n    }\n    .season-topic-svg-3d-button[d-svg-button-danger]:hover > rect {\n        fill: url(#season-svg-3d-danger-fill-hover);\n        stroke-width: 0.5px;\n        stroke: #bbb;\n    }\n    .season-topic-svg-3d-button[d-svg-button-danger]:hover > use, .season-topic-svg-button[d-svg-button-danger]:hover > path {\n        fill: #fff;\n        stroke: none;\n    }\n    .season-topic-svg-3d-button[d-svg-button-danger]:active > rect {\n        fill: url(#season-svg-3d-danger-fill-active);\n        stroke-width: 0.5px;\n        stroke: #bbb;\n    }\n    .season-topic-svg-3d-button[d-svg-button-danger]:active > use, .season-topic-svg-button[d-svg-button-danger]:active > path {\n        fill: #fff;\n        stroke: none;\n    }\n    \n</style>\n<defs season-topic-predefine-filter-and-pattern="">\n    <linearGradient id="season-svg-3d-fill" x1="0" y1="0" x2="0" y2="1">\n        <stop stop-color="#fff" stop-opacity="1" offset="0" />\n        <stop stop-color="#f0f0f0" stop-opacity="1" offset="0.3" />\n        <stop stop-color="#e0e0e0" stop-opacity="1" offset="0.9" />\n        <stop stop-color="#ccc" stop-opacity="1" offset="1" />\n    </linearGradient>\n    <linearGradient id="season-svg-3d-fill-hover" x1="0" y1="0" x2="0" y2="1">\n        <stop stop-color="#0af" stop-opacity="1" offset="0" />\n        <stop stop-color="#009dff" stop-opacity="1" offset="0.1" />\n        <stop stop-color="#07f" stop-opacity="1" offset="0.75" />\n        <stop stop-color="#06f" stop-opacity="1" offset="1" />\n    </linearGradient>\n    <linearGradient id="season-svg-3d-fill-active" x1="0" y1="0" x2="0" y2="1">\n        <stop stop-color="#06f" stop-opacity="1" offset="0" />\n        <stop stop-color="#07f" stop-opacity="1" offset="0.1" />\n        <stop stop-color="#009dff" stop-opacity="1" offset="0.75" />\n        <stop stop-color="#0af" stop-opacity="1" offset="1" />\n    </linearGradient>\n    <linearGradient id="season-svg-3d-danger-fill-hover" x1="0" y1="0" x2="0" y2="1">\n        <stop stop-color="#f55" stop-opacity="1" offset="0" />\n        <stop stop-color="#f33" stop-opacity="1" offset="0.1" />\n        <stop stop-color="#f00" stop-opacity="1" offset="0.75" />\n        <stop stop-color="#b00" stop-opacity="1" offset="1" />\n    </linearGradient>\n    <linearGradient id="season-svg-3d-danger-fill-active" x1="0" y1="0" x2="0" y2="1">\n        <stop stop-color="#c00" stop-opacity="1" offset="0" />\n        <stop stop-color="#f00" stop-opacity="1" offset="0.1" />\n        <stop stop-color="#f33" stop-opacity="1" offset="0.75" />\n        <stop stop-color="#f55" stop-opacity="1" offset="1" />\n    </linearGradient>\n</defs>\n<defs season-topic-predefine-image="">\n    <symbol id="season-topic-predefine-image-picture-placeholder" width="76" height="58" viewBox="0 0 76 58" preserveAspectRatio="none">\n        <path d="M 0 0 L 0 58 L 76 58 L 76 0 L 0 0 z M 17 9 C 18.7 9 20 10.3 20 12 C 20 13.7 18.7 15 17 15 C 15.3 15 14 13.7 14 12 C 14 10.3 15.3 9 17 9 z M 17 11 C 16.4 11 16 11.4 16 12 C 16 12.6 16.4 13 17 13 C 17.6 13 18 12.6 18 12 C 18 11.4 17.6 11 17 11 z M 30 11 C 30.3 11 30.7 11.2 30.8 11.4 L 45.8 34.2 L 52.1 22.5 C 52.3 22.2 52.6 22 53 22 C 53.4 22 53.7 22.2 53.9 22.5 L 67.9 46.5 C 68 46.7 68 46.8 68 47 C 68 47.6 67.6 48 67 48 L 8 48 C 7.8 48 7.6 47.9 7.4 47.9 C 6.9 47.6 6.8 47 7.1 46.5 L 17 30.7 C 17.1 30.6 17.2 30.4 17.3 30.3 L 29.2 11.5 C 29.3 11.2 29.7 11 30 11 z M 30 13.9 L 20.7 28.7 L 26.6 26.1 C 27 25.9 27.4 26 27.7 26.3 L 30 28.6 L 32.8 25.8 C 33.1 25.4 33.6 25.4 34 25.6 L 40.1 29.2 L 30 13.9 z M 53 25.1 L 47 36.1 L 53.5 46 L 65.3 46 L 53 25.1 z M 33.7 27.7 L 30.7 30.7 C 30.3 31.1 29.7 31.1 29.3 30.7 L 26.8 28.2 L 18.8 31.8 L 9.801 46 L 51.1 46 L 42.5 32.8 L 33.7 27.7 z" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-bold" width="20" height="20" viewBox="0 0 20 20" preserveAspectRatio="none">\n        <path d="m 12.04,9.665 q 1.57,0.365 2.2,0.885 0.91,0.74 0.91,1.92 0,1.24 -1,2.05 -1.23,0.98 -3.57,0.98 H 5 v -0.3 q 0.762,0 1.03,-0.14 0.275,-0.14 0.381,-0.37 0.113,-0.23 0.113,-1.13 V 6.429 Q 6.524,5.537 6.411,5.311 6.305,5.075 6.03,4.938 5.755,4.8 5,4.8 V 4.5 h 5.27 q 1.9,0 2.68,0.34 0.78,0.333 1.24,1.005 0.45,0.665 0.45,1.42 0,0.795 -0.57,1.42 -0.57,0.616 -2.03,0.98 z M 9.087,9.446 q 1.153,0 1.693,-0.258 0.56,-0.261 0.85,-0.731 0.29,-0.471 0.29,-1.2 0,-0.73 -0.29,-1.192 Q 11.35,5.595 10.81,5.351 10.27,5.108 9.087,5.116 Z m 0,0.634 v 3.53 0.4 q 0,0.44 0.218,0.67 0.229,0.23 0.665,0.23 0.65,0 1.19,-0.29 0.56,-0.3 0.85,-0.84 0.29,-0.56 0.29,-1.22 0,-0.77 -0.36,-1.38 -0.37,-0.62 -0.99,-0.86 -0.62,-0.25 -1.862,-0.24 z" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-italic" width="20" height="20" viewBox="0 0 20 20" preserveAspectRatio="none">\n        <path d="m 11.27,15.2 -0.1,0.3 H 6.65 l 0.113,-0.3 q 0.682,0 0.901,-0.11 0.357,-0.14 0.528,-0.39 0.266,-0.38 0.551,-1.35 L 10.66,6.706 Q 10.9,5.878 10.9,5.457 10.9,5.246 10.8,5.1 10.69,4.954 10.48,4.882 10.26,4.797 9.635,4.797 L 9.733,4.5 h 4.257 l -0.1,0.3 q -0.52,0 -0.77,0.114 -0.36,0.161 -0.56,0.462 -0.18,0.3 -0.49,1.33 l -1.9,6.644 q -0.259,0.91 -0.259,1.16 0,0.21 0.1,0.36 0.11,0.13 0.32,0.21 0.23,0.1 0.94,0.12 z" />        \n    </symbol>\n    <symbol id="season-topic-predefine-image-underline" width="20" height="20" viewBox="0 0 20 20" preserveAspectRatio="none">\n        <path d="m 5.4,4.5 v 0.244 c 0.379,0 0.639,0.03 0.779,0.106 0.141,0.07 0.241,0.176 0.298,0.305 0.06,0.122 0.09,0.441 0.09,0.957 V 10.5 c 0,0.74 0.119,1.33 0.356,1.77 0.239,0.44 0.646,0.81 1.223,1.09 0.423,0.21 1.022,0.31 1.798,0.31 0.926,0 1.666,-0.2 2.196,-0.59 0.53,-0.39 0.87,-0.82 1.01,-1.29 0.14,-0.46 0.21,-1.22 0.21,-2.274 V 6.112 c 0,-0.365 0,-0.618 0.1,-0.759 0.1,-0.203 0.2,-0.355 0.37,-0.456 0.16,-0.102 0.37,-0.153 0.62,-0.153 h 0.19 V 4.5 h -3.12 v 0.244 c 0.37,0 0.65,0.05 0.84,0.153 0.13,0.07 0.24,0.184 0.32,0.357 0.1,0.171 0.13,0.457 0.13,0.858 v 3.655 c 0,0.953 -0.1,1.613 -0.26,2.003 -0.16,0.38 -0.42,0.68 -0.76,0.9 -0.34,0.21 -0.76,0.32 -1.24,0.32 -0.42,0 -0.776,-0.1 -1.053,-0.25 C 9.219,12.56 9.019,12.35 8.895,12.09 8.777,11.82 8.717,11.3 8.717,10.5 V 6.112 c 0,-0.511 0.03,-0.83 0.08,-0.957 C 8.854,5.026 8.946,4.927 9.074,4.857 9.206,4.782 9.447,4.744 9.794,4.744 H 10.03 V 4.5 Z m 0,9.73 v 1.27 h 9.23 v -1.27 z" />    \n    </symbol>\n    <symbol id="season-topic-predefine-image-unorder-list" width="20" height="20" viewBox="0 0 20 20" preserveAspectRatio="none">\n        <path d="M 5 5 L 5 6.5 L 6.5 6.5 L 6.5 5 L 5 5 z M 7.5 5 L 7.5 6.5 L 15 6.5 L 15 5 L 7.5 5 z M 5 9.5 L 5 11 L 6.5 11 L 6.5 9.5 L 5 9.5 z M 7.5 9.5 L 7.5 11 L 15 11 L 15 9.5 L 7.5 9.5 z M 5 14 L 5 15.5 L 6.5 15.5 L 6.5 14 L 5 14 z M 7.5 14 L 7.5 15.5 L 15 15.5 L 15 14 L 7.5 14 z " />    \n    </symbol>\n    <symbol id="season-topic-predefine-image-order-list" width="20" height="20" viewBox="0 0 20 20" preserveAspectRatio="none">\n        <path d="M 6.125 5 L 4.5 5.742 L 4.559 5.859 C 4.717 5.79 4.852 5.756 4.963 5.756 C 5.032 5.756 5.093 5.774 5.145 5.811 C 5.199 5.845 5.237 5.889 5.256 5.941 C 5.276 5.991 5.285 6.116 5.285 6.32 L 5.285 8.609 C 5.285 8.887 5.27 9.065 5.242 9.141 C 5.214 9.217 5.16 9.273 5.08 9.312 C 4.999 9.359 4.864 9.383 4.676 9.383 L 4.559 9.383 L 4.559 9.504 L 6.887 9.504 L 6.887 9.383 L 6.785 9.383 C 6.618 9.383 6.498 9.359 6.422 9.312 C 6.349 9.265 6.298 9.204 6.271 9.131 C 6.245 9.055 6.232 8.881 6.232 8.609 L 6.232 5 L 6.125 5 z M 7.5 5 L 7.5 6.5 L 15 6.5 L 15 5 L 7.5 5 z M 8.314 9.5 L 8.314 11 L 15 11 L 15 9.5 L 8.314 9.5 z M 5.939 11 C 5.627 11 5.35 11.1 5.111 11.3 C 4.873 11.5 4.695 11.81 4.578 12.24 L 4.697 12.24 C 4.882 11.91 5.143 11.74 5.477 11.74 C 5.681 11.74 5.853 11.82 5.994 11.97 C 6.135 12.12 6.205 12.3 6.205 12.53 C 6.205 12.84 6.119 13.16 5.947 13.49 C 5.778 13.82 5.296 14.46 4.5 15.41 L 4.5 15.51 L 7.098 15.51 L 7.346 14.26 L 7.229 14.26 C 7.156 14.39 7.095 14.49 7.049 14.56 C 7.003 14.63 6.944 14.66 6.873 14.66 L 6.418 14.66 L 5.463 14.66 C 6.201 13.94 6.679 13.38 6.898 12.98 C 7.059 12.68 7.141 12.39 7.141 12.1 C 7.141 11.94 7.087 11.77 6.982 11.59 C 6.878 11.41 6.735 11.27 6.551 11.16 C 6.366 11.05 6.163 11 5.939 11 z M 8.314 14 L 8.314 15.5 L 15 15.5 L 15 14 L 8.314 14 z " />\n    </symbol>\n    <symbol id="season-topic-predefine-image-open" width="96" height="96" viewBox="0 0 96 96" preserveAspectRatio="none">\n        <path d="m 11.94,75.97 c 0,0 0.1,0 0.11,0 H 74 L 87.6,46.8 C 88.57,44.77 87.71,42.34 85.69,41.37 85.28,41.18 84.85,41.05 84.4,41 H 80 v -9 c 0,-2.2 -1.79,-3.99 -4,-4 H 46.28 c -0.18,0 -0.36,0 -0.51,-0.15 L 35,20.7 C 34.34,20.27 33.58,20.03 32.8,20 H 14 c -2.21,0 -3.99,1.79 -4,4 v 49.98 c 0,1.08 0.86,1.96 1.94,1.99 z M 84.29,43 c 1.13,0.2 1.88,1.28 1.68,2.4 0,0.18 -0.1,0.35 -0.16,0.51 v 0 0 L 72.75,73.94 v 0 H 14.1 c 0,0 0,0 0,0 0,0 0,0 0,0 L 26.43,44.01 C 26.72,43.4 27.33,43.01 28,43 Z M 12,24 c 0,-1.11 0.9,-2 2,-2 h 18.8 c 0.41,0 0.81,0.17 1.15,0.4 l 10.71,7.11 C 45.14,29.83 45.7,30 46.28,30 H 76 c 1.1,0 2,0.89 2,2 v 8.99 H 29 c -0.1,0 -0.1,0 -0.16,0 H 28 c -1.47,0 -2.79,0.87 -3.4,2.2 L 12.02,73.76 z" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-nodepad" width="96" height="96" viewBox="0 0 96 96" preserveAspectRatio="none">\n        <rect width="60" height="80" x="18" y="8" />\n        <path d="M 28,35 h 20 0 M 28,25 h 17 v 0 M 28,45 h 40 v 0 M 28,55 h 40 v 0 M 28,65 h 40 v 0 M 28,75 h 40 v 0" />\n        <circle cx="60" cy="25" r="8" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-picture" width="96" height="96" viewBox="0 0 96 96" preserveAspectRatio="none">\n        <path d="M 10 19 L 10 77 L 86 77 L 86 19 L 10 19 z M 12 21 L 84 21 L 84 75 L 12 75 L 12 21 z M 27 28 C 25.3 28 24 29.3 24 31 C 24 32.7 25.3 34 27 34 C 28.7 34 30 32.7 30 31 C 30 29.3 28.7 28 27 28 z M 27 30 C 27.6 30 28 30.4 28 31 C 28 31.6 27.6 32 27 32 C 26.4 32 26 31.6 26 31 C 26 30.4 26.4 30 27 30 z M 40 30 C 39.7 30 39.3 30.2 39.2 30.5 L 27.3 49.3 C 27.2 49.4 27.1 49.6 27 49.7 L 17.1 65.5 C 16.8 66 16.9 66.6 17.4 66.9 C 17.6 66.9 17.8 67 18 67 L 77 67 C 77.6 67 78 66.6 78 66 C 78 65.8 78 65.7 77.9 65.5 L 63.9 41.5 C 63.7 41.2 63.4 41 63 41 C 62.6 41 62.3 41.2 62.1 41.5 L 55.8 53.2 L 40.8 30.4 C 40.7 30.2 40.3 30 40 30 z M 40 32.9 L 50.1 48.2 L 44 44.6 C 43.6 44.4 43.1 44.4 42.8 44.8 L 40 47.6 L 37.7 45.3 C 37.4 45 37 44.9 36.6 45.1 L 30.7 47.7 L 40 32.9 z M 63 44.1 L 75.3 65 L 63.5 65 L 57 55.1 L 63 44.1 z M 43.7 46.7 L 52.5 51.8 L 61.1 65 L 19.8 65 L 28.8 50.8 L 36.8 47.2 L 39.3 49.7 C 39.7 50.1 40.3 50.1 40.7 49.7 L 43.7 46.7 z" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-pencil" width="96" height="96" viewBox="0 0 96 96" preserveAspectRatio="none">\n        <path d="m 86.82,16.2 -7.03,-7 c -1.56,-1.6 -4.1,-1.6 -5.66,0 0,0 0,0 0,0 L 14.03,69.3 8,88.1 26.75,82 v 0 L 86.82,21.9 c 1.56,-1.6 1.56,-4.1 0,-5.7 z m -19.76,2.9 9.88,9.9 -2.14,2.1 -9.88,-9.9 z m -41.44,61.2 -11.13,3.6 -2.3,-2.3 3.57,-11.2 c 2.03,-1.6 5.58,-0.9 8.17,1.7 2.58,2.6 3.28,6.1 1.69,8.2 z m -0.28,-9.6 c -1.79,-1.9 -4.22,-3 -6.8,-3.1 l 44.97,-45 9.88,9.9 -44.95,45 c -0.13,-2.6 -1.24,-5 -3.1,-6.8 z m 60.06,-50.2 -7.05,7 -9.88,-9.8 7.07,-7.1 c 0.78,-0.8 2.05,-0.8 2.83,0 0,0 0,0 0,0 l 7.03,7.1 c 0.78,0.7 0.78,2 0,2.8 z" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-delete" width="96" height="96" viewBox="0 0 96 96" preserveAspectRatio="none">\n        <path d="M 42 10 C 39.24 10 37 12.2 37 15 L 37 18 L 19 18 C 16.79 18 15.01 19.8 15 22 L 15 28 L 81 28 L 81 22 C 81 19.8 79.21 18 77 18 L 59 18 L 59 15 C 59 12.2 56.76 10 54 10 L 42 10 z M 42 12 L 54 12 C 55.66 12 57 13.3 57 15 L 57 18 L 39 18 L 39 15 C 39 13.3 40.34 12 42 12 z M 19 20 L 77 20 C 78.11 20 79 20.9 79 22 L 79 26 L 17 26 L 17 22 C 17 20.9 17.89 20 19 20 z M 20.5 31 C 19.67 31 19 31.67 19 32.5 C 19 32.59 19.01 32.68 19.03 32.77 C 19.01 32.86 19 32.95 19 33.04 L 19 80.04 C 19 80.12 19.01 80.19 19.02 80.27 C 19.01 80.35 19 80.42 19 80.5 C 19 81.33 19.67 82 20.5 82 L 75.5 82 C 76.33 82 77 81.33 77 80.5 C 77 80.42 76.99 80.35 76.98 80.27 C 76.99 80.19 77 80.12 77 80.04 L 77 33.04 C 77 32.95 76.99 32.86 76.97 32.77 C 76.99 32.68 77 32.59 77 32.5 C 77 31.67 76.33 31 75.5 31 L 20.5 31 z M 22 34 L 74 34 L 74 79 L 22 79 L 22 34 z M 34 38 C 33.17 38 32.5 38.59 32.5 39.32 L 32.5 73.68 C 32.5 74.41 33.17 75 34 75 C 34.83 75 35.5 74.41 35.5 73.68 L 35.5 39.32 C 35.5 38.59 34.83 38 34 38 z M 48 38 C 47.17 38 46.5 38.59 46.5 39.32 L 46.5 73.68 C 46.5 74.41 47.17 75 48 75 C 48.83 75 49.5 74.41 49.5 73.68 L 49.5 39.32 C 49.5 38.59 48.83 38 48 38 z M 62 38 C 61.17 38 60.5 38.59 60.5 39.32 L 60.5 73.68 C 60.5 74.41 61.17 75 62 75 C 62.83 75 63.5 74.41 63.5 73.68 L 63.5 39.32 C 63.5 38.59 62.83 38 62 38 z" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-eraser" width="96" height="96" viewBox="0 0 96 96" preserveAspectRatio="none">\n        <path d="M 84.09,39.93 58.63,14.43 c -1.95,-1.9 -5.12,-1.9 -7.07,0 l -39.6,39.6 c -1.95,2 -1.95,5.1 0,7.1 l 22.22,22.19 h 43.85 v -2 h -28.3 l 34.36,-34.4 c 1.95,-1.9 1.95,-5.1 0,-6.99 z M 35.03,81.32 H 35 L 13.38,59.72 c -1.17,-1.19 -1.17,-3.09 0,-4.3 0,0 0,0 0,0 l 19.09,-19.1 29.7,29.7 -15.27,15.3 z M 82.67,45.53 63.58,64.62 33.88,34.93 52.98,15.82 c 1.17,-1.1 3.07,-1.1 4.24,0 l 25.45,25.5 c 1.17,1.2 1.17,3.1 0,4.21 z" />\n    </symbol>\n    <symbol id="season-topic-predefine-image-cross" width="96" height="96" viewBox="0 0 96 96" preserveAspectRatio="none">\n        <path d="M 83,21.4 74.6,13 48,39.6 21.4,13 13,21.4 39.6,48 13,74.6 21.4,83 48,56.4 74.6,83 83,74.6 56.4,48 Z" />\n    </symbol>\n</defs>\n<defs season-topic-image-storage="">\n</defs>\n<g season-topic-root-node=""></g>\n</svg>\n';var a=e.querySelector("svg");a.setAttribute("season-mind-map-svg",i()),a.$scale=1,e.style.overflow="hidden";var s=getComputedStyle(e).position;return"relative"!==s&&"absolute"!==s&&(e.style.position="relative"),$(k(o),{env:r,svgElement:a,stageContainer:a.querySelector("g[season-topic-root-node]"),eventContainer:a}),N(k(o),te,new ResizeObserver(o[ee].bind(k(o)))).observe(e),o[Q]({width:e.clientWidth,height:e.clientHeight}),o}return x(n,[{key:"define",value:function(e){this.svgElement.insertBefore(e,this.stageContainer)}},{key:"undefine",value:function(e){this.svgElement.querySelectorAll(e).forEach((function(e){return e.remove()}))}},{key:Q,value:function(e){var t=this.svgElement,n=Number(t.$scale);n>0||(n=1);var r=t.viewBox.baseVal;t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("viewBox","".concat(r.x," ").concat(r.y," ").concat(e.width/n," ").concat(e.height/n))}},{key:"scale",get:function(){return Number(this.svgElement.$scale)||1}},{key:"scale",set:function(e){(e=Number(e))>0||(e=1);var t=this.svgElement;t.$scale=e;var n=t.viewBox.baseVal,r=Number(t.width.baseVal.value),i=Number(t.height.baseVal.value);t.setAttribute("viewBox","".concat(n.x," ").concat(n.y," ").concat(r/e," ").concat(i/e)),this.env.fireEvent("topic-event-view-resize")}},{key:"move",value:function(e,t){var n=this.svgElement,r=n.viewBox.baseVal,i=r.x+(Number(e)||0),o=r.y+(Number(t)||0),a=o+r.height,s=i+r.width,c=this.stageContainer.getBBox(),u=c.x,l=c.y,f=c.width;l+c.height<o||l>a||u>s||u+f<i||n.setAttribute("viewBox","".concat(i," ").concat(o," ").concat(r.width," ").concat(r.height))}},{key:ee,value:function(e){var t=this,n=this.svgElement.parentNode;e.forEach((function(e){e.target===n&&t[Q](e.contentRect)})),this.env.fireEvent("topic-event-view-resize")}},{key:"createDomEvent",value:function(e,t){return new CustomEvent("topic-domevent-".concat(e),{detail:t})}},{key:"addEventListener",value:function(){var e;return(e=this.env).addEventListener.apply(e,arguments),this}},{key:"removeEventListener",value:function(){var e;return(e=this.env).addEventListener.apply(e,arguments),this}},{key:"dispose",value:function(){L(this,te)&&L(this,te).disconnect(),this.svgElement.remove()}},{key:G,value:function(e){var t=this;try{var n=e.target;if(n)if("mousedown"===e.type)n.$mousedownTimeStamp=e.timeStamp,n.$mouseEventX=e.offsetX,n.$mouseEventY=e.offsetY;else if("click"===e.type){var r=e.timeStamp-(Number(n.$mousedownTimeStamp)||0),i=Math.abs(e.offsetX-(Number(n.$mouseEventX)||Number.MAX_VALUE)),o=Math.abs(e.offsetY-(Number(n.$mouseEventY)||Number.MAX_VALUE));if(n.$mousedownTimeStamp=0,n.$mouseEventX=Number.MAX_VALUE,n.$mouseEventY=Number.MAX_VALUE,r>1e3&&(i>10||o>10))return}var a=this.eventContainer,s=void 0;e.composedPath().forEach((function(n){void 0===s&&n.hasAttribute("season-topic-content-type")&&(s=n.getAttribute("season-topic-content-type"));var r=y.GetInstance(n);if(r&&r.handleDomEvent||n===a){var i="topic-domevent-".concat(e.type),o={eventName:i,triggerContentType:s,eventTarget:r,originEvent:e,preventDefault:!1,stopPropagation:!1};throw r&&r.fireEvent(i,o),t.env.fireEvent(t.createDomEvent(e.type,o)),o.preventDefault&&e.preventDefault(),o.stopPropagation&&e.stopPropagation(),null}}))}catch(t){null!==t&&this.env.warn("Exception raised when dispatch dom event",e,t)}}}]),n}(c);function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e){return function(e){if(Array.isArray(e))return re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function ce(e,t){le(e,t),t.add(e)}function ue(e,t,n){le(e,t),t.set(e,n)}function le(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fe(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var pe="season-topic-focus",he=Symbol("topic.children.group.node"),de=Symbol("topic.level"),ve=Symbol("topic.direction"),me=Symbol("topic.fold"),ge=new WeakMap,ye=new WeakSet,be=new WeakSet,we=new WeakSet,xe=new WeakSet,ke=new WeakSet,Ae=new WeakSet,Ee=new WeakSet,Se=new WeakSet,_e=new WeakSet,Te=new WeakSet,Ce=new WeakSet,Le=function(e){E(n,e);var t=se(n);function n(e,r,i,o){var a;b(this,n),ce(k(a=t.apply(this,arguments)),Ce),ce(k(a),Te),ce(k(a),_e),ce(k(a),Se),ce(k(a),Ee),ce(k(a),Ae),ce(k(a),ke),ce(k(a),xe),ce(k(a),we),ce(k(a),be),ce(k(a),ye),ue(k(a),ge,{writable:!0,value:void 0}),$(k(a),{env:a.$env,handleDomEvent:!0,eventSelectorPrefix:":scope > [season-topic-content-group] > "});var s=N(k(a),ge,a.$assignedNode.querySelector(":scope > [season-topic-content-group]"));if(!a.$stubFlag){s.setAttribute("season-topic-content-group",a.id);var c=a[he];if(c&&(c.innerHTML="",c.setAttribute("season-topic-children-group",a.id),r.children instanceof Array)){var u=a[de]+1;r.children.forEach((function(t){e.generate(c,n,t,u,o)})),delete r.children}}return a}return x(n,[{key:"initMetadata",value:function(e,t,n,r,o){j(o instanceof X,M,-1,"_env must be an instance of MindmapEnvironment"),$(e,"env",o),e[he]=n.querySelector(":scope > [season-topic-children-group]"),e[de]=Number(r)||0,e[ve]=void 0,e[me]=!1;var a=t.id,s=null==a;s&&(a=i());try{Object.defineProperty(t,"id",{value:a,writable:!1,configurable:!1,enumerable:!0})}catch(e){if(s)throw e}}},{key:"id",get:function(){return this.data.id}},{key:"level",get:function(){return this[de]}},{key:"direction",get:function(){return this[ve]}},{key:"parentTopic",get:function(){var e=this.$assignedNode.parentNode,t=e&&e.parentNode;return t&&t.hasAttribute("season-topic-global")?n.GetInstance(t):void 0}},{key:"hasChildren",get:function(){var e=fe(this,be,Me).call(this);return e&&e.length>0}},{key:"rootTopic",get:function(){return n.getFirstChildTopic(fe(this,ye,Ne).call(this))}},{key:"firstChildTopic",get:function(){return n.getFirstChildTopic(this)}},{key:"getChildrenTopics",value:function(){return ie(fe(this,be,Me).call(this)).map((function(e){return n.GetInstance(e)}))}},{key:"enumerateChilrenTopics",value:P.mark((function e(){var t,r,i,o;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=fe(this,be,Me).call(this),r=t&&t.length,i=0;case 3:if(!(i<r)){e.next=11;break}if(!((o=n.GetInstance(t[i]))instanceof n)){e.next=8;break}return e.next=8,o;case 8:i++,e.next=3;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"enumerateDescendantTopics",value:P.mark((function e(){var t,r,i,o;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=fe(this,be,Me).call(this),r=t&&t.length,i=0;case 3:if(!(i<r)){e.next=12;break}if(!((o=n.GetInstance(t[i]))instanceof n)){e.next=9;break}return e.next=8,o;case 8:return e.delegateYield(o.enumerateDescendantTopics(),"t0",9);case 9:i++,e.next=3;break;case 12:case"end":return e.stop()}}),e,this)}))},{key:"enumerateTopics",value:P.mark((function e(){return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this;case 2:return e.delegateYield(this.enumerateDescendantTopics(),"t0",3);case 3:case"end":return e.stop()}}),e,this)}))},{key:"nextSiblingTopic",get:function(){for(var e=this.$assignedNode.nextSibling;e;e=e.nextSibling){var t=n.GetInstance(e);if(t instanceof n)return t}return null}},{key:"previousSiblingTopic",get:function(){for(var e=this.$assignedNode.previousSibling;e;e=e.previousSibling){var t=n.GetInstance(e);if(t instanceof n)return t}return null}},{key:"getTopicByID",value:function(e){return String(this.id)===String(e)?this:n.getTopicByID(this.$assignedNode,e)}},{key:"topicNode",get:function(){return this.$assignedNode}},{key:"exportTopicData",value:function(e){var t=F({},this.data);e&&delete t.id;var n,r=[],i=oe(this.enumerateChilrenTopics());try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(o.exportTopicData())}}catch(e){i.e(e)}finally{i.f()}return r.length>0&&(t.children=r),t}},{key:"collectImageStorage",value:function(){try{var e=this.$assignedNode.ownerSVGElement.querySelector("[season-topic-image-storage]"),t=fe(this,ye,Ne).call(this);if(e&&t){var n=e.querySelectorAll(":scope > *");n&&n.forEach((function(e){var n=e.getAttribute("id");n&&t.querySelector('use[href="#'.concat(n,'"]'))||e.remove()}))}}catch(e){this.env.warn("Fail in collecting the images in the storage",e)}}},{key:"enumerateImageInStorage",value:P.mark((function e(){var t,n,r,i,o,a;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=this.$assignedNode.ownerSVGElement.querySelector("[season-topic-image-storage]"))){e.next=22;break}n=ie(t.querySelectorAll(":scope > *")),r=oe(n),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return o=i.value,a=o.querySelector(":scope > image"),e.next=12,{id:o.getAttribute("id"),href:a&&a.getAttribute("href"),width:o.$width||Number(o.getAttribute("width"))||0,height:o.$height||Number(o.getAttribute("height"))||0,sourceURL:o.getAttribute("d-url"),sourceHRef:o.getAttribute("d-href")};case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(0),this.env.warn("Fail in enumerating the images in the storage",e.t1);case 27:case"end":return e.stop()}}),e,this,[[0,24],[5,16,19,22]])}))},{key:"showInCenterOfView",value:function(){var e=L(this,ge).getBBox(),t=e.width,n=e.height,r=L(this,ge).getCTM(),i=r.e/r.a,o=r.f/r.d,a=L(this,ge).ownerSVGElement,s=a.viewBox.baseVal||{x:0,y:0,width:0,height:0},c=s.x,u=s.y,l=s.width,f=s.height;return l<=0&&(l=a.width.baseVal.value),f<=0&&(f=a.height.baseVal.value),i=parseInt(i+t/2),o=parseInt(o+n/2),c-=parseInt(l/2)-i,u-=parseInt(f/2)-o,a.setAttribute("viewBox","".concat(c," ").concat(u," ").concat(l," ").concat(f)),this.notify("topic-event-view-move"),this}},{key:"showInView",value:function(){return n.showNodeInSvgView(L(this,ge),this.$assignedNode.ownerSVGElement),this.notify("topic-event-view-move"),this}},{key:"notify",value:function(e,t){return"object"===S(t)?t.eventTarget=this:t={eventTarget:this},this.fireEvent(e,t),this.env.fireEvent(e,t),this}},{key:"on-ebevent-rendering",value:function(e,t,r,i,o){var a=this,s=this[de];this.$assignedNode.setAttribute("season-topic-global",e.id),this.$assignedNode.setAttribute("d-topic-level",s),s>0&&(this[ve]=i);var c=L(this,ge);c.setAttribute("d-topic-id",e.id),c.setAttribute("d-topic-level",s);var u=c.querySelector(".season-topic-title");u&&((u.textContent=e.title)||(u.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"));var l=u.getBBox(),f=l.width,p=l.height,h=c.querySelector("[season-topic-extends]");fe(this,Te,Fe).call(this,h,o,e,this,r,i);var d,v,m=h.getBBox(),g=m.width,y=m.height,b=0,w=0,x=e.image&&this.env.translateHRefToURL(e.image.src);x?(v=this.acquireNode(":scope > [season-topic-content-group] > .season-topic-image",L(this,ge),"beforeend"),b=Number(e.image.width)||Math.max(f,Number(o.suitableTitleLineWidth)||X.DefaultConfig.suitableTitleLineWidth),(w=Number(e.image.height)||0)||(w=b/4*3),v?(v.setAttribute("width",b),v.setAttribute("height",w),fe(this,_e,Pe).call(this,x.destination,x.source,v,b,w,o),d=2*o.padding+w):d=o.padding):((v=this.acquireNode(":scope > [season-topic-content-group] > .season-topic-image"))&&v.remove(),v=void 0,d=o.padding);var k,A,E=f+(g>0?o.padding+g:0),S=Number(o.suitableTitleLineWidth)||X.DefaultConfig.suitableTitleLineWidth;E>b&&(f>S||g>S)&&g>f?(k=Math.max(f,b,g),u.setAttribute("transform","translate(".concat(f>=k?o.padding:o.padding+(k-f)/2,", ").concat(d,")")),h.setAttribute("transform","translate(".concat(g>=k?o.padding:o.padding+(k-g)/2,", ").concat(d+=o.padding+p,")")),d+=y):(E<b?(A=o.padding+(b-E)/2,k=b):(A=o.padding,k=E),u.setAttribute("transform","translate(".concat(A,", ").concat(d,")")),h.setAttribute("transform","translate(".concat(A+o.padding+f,", ").concat(d,")")),d+=Math.max(p,y)),v&&v.setAttribute("transform","translate(".concat(b>=k?o.padding:o.padding+(k-b)/2,", ").concat(o.padding,")"));var _=c.querySelector(".season-topic-box"),T=t.contentWidth=2*o.padding+k,C=t.contentHeight=o.padding+d;if(_){_.setAttribute("href","#".concat(o.topicBoxRefID||"topic-default-box")),_.setAttribute("width",T),_.setAttribute("height",C);var N=_.style;N.setProperty("--topic-rect-width","".concat(T,"px")),N.setProperty("--topic-rect-height","".concat(C,"px")),N.setProperty("--topic-title-top","".concat(d,"px"))}c.setAttribute("d-topic-rect-width",T),c.setAttribute("d-topic-rect-height",C);var M,I=t.childrenNodes=fe(this,be,Me).call(this);if(s>0&&I&&I.length>0){M=!(r>s||(isNaN(r)||r<=0)&&!this[me]),this[me]=M;var O=this.acquireNode(':scope > [season-topic-content-group] > [season-topic-content-type="fold"]',L(this,ge),"beforeend");if(O){O.setAttribute("href",M?"#topic-fold-icon-plus":"#topic-fold-icon-minus"),c.insertAdjacentElement("beforeend",O);var R=O.getBBox(),D=R.width,z=R.height;O.setAttribute("transform","translate(".concat(i?T-D/2:0-D/2,", ").concat((C-z)/2,")"))}}else{M=this[me]=!1;var B=this.acquireNode(':scope > [season-topic-content-group] > [season-topic-content-type="fold"]');B&&B.remove()}var P=this[he];if(M)P&&P.remove();else try{P&&P.isConnected||this.$assignedNode.insertAdjacentElement("afterbegin",P);var j=t.dirIndexThresold=parseInt((I.length+1)/2),F=t.rightPriority="left"!==String(o.directionPriority).toLowerCase();I.forEach((function(e,t){var o=n.GetInstance(e);o&&fe(o,Ce,$e).call(o,r,a[de]<=0?F^t>=j:i)}))}catch(e){console.error("Exception raised in rendering children",e)}}},{key:"on-ebevent-rendered",value:function(e,t,r,i,o){var a=t.childrenNodes,s=this[he];if(a&&a.length>0&&s){var c,u;this.level+1>=o.secondaryTopicLevel?(c=o.secondarySiblingMargin,u=o.secondaryLevelMargin):(c=o.siblingMargin,u=o.levelMargin);var l=t.contentWidth,f=t.contentHeight;if(this[de]<1){var p={itemList:[],_config:o,siblingMargin:c,levelMargin:u,contentWidth:l,listHeight:0},h={itemList:[],_config:o,siblingMargin:c,levelMargin:u,contentWidth:l,listHeight:0},d=t.dirIndexThresold,v=t.rightPriority;a.forEach((function(e,t){var r=n.GetInstance(e);r&&(v^t>=d?fe(r,we,Ie).call(r,h):fe(r,xe,Oe).call(r,p))})),p.listHeight-=c,h.listHeight-=c,fe(this,ke,Re).call(this,p,h),fe(this,Ae,De).call(this,h),fe(this,Ae,De).call(this,p);var m=(h.listHeight>=p.listHeight?h.listHeight:p.listHeight)/2;fe(this,Ee,ze).call(this,h,s,m),fe(this,Ee,ze).call(this,p,s,m)}else if(!this[me]){var g={itemList:[],_config:o,siblingMargin:c,levelMargin:u,contentWidth:l,listHeight:0};i?t.childrenNodes.forEach((function(e){var t=n.GetInstance(e);t&&fe(t,we,Ie).call(t,g)})):t.childrenNodes.forEach((function(e){var t=n.GetInstance(e);t&&fe(t,xe,Oe).call(t,g)})),g.listHeight-=c,fe(this,Ae,De).call(this,g);var y=g.listHeight/2;fe(this,Ee,ze).call(this,g,s,y)}var b=s.getBBox(),w=b.y,x=b.height;s.setAttribute("transform","translate(0, ".concat((f-(x+w))/2,")"))}}},{key:"render",value:function(){var e;return this.env.fireEvent("topic-event-before-render"),fe(e=this[de]<1?this:this.rootTopic,Ce,$e).apply(e,arguments),this.env.fireEvent("topic-event-after-render"),this}},{key:"getFocus",value:function(){return n.getFocusTopic(fe(this,ye,Ne).call(this))}},{key:"killFocus",value:function(){return(this.$assignedNode.hasAttribute(pe)||L(this,ge).hasAttribute(pe))&&(this.notify("topic-event-cancel-edit"),this.notify("topic-event-kill-focus"),this.$assignedNode.removeAttribute(pe),L(this,ge).removeAttribute(pe)),this}},{key:"setFocus",value:function(e){var t=this.getFocus();return this.equal(t)?!e&&this:(t instanceof n&&t.killFocus(),this.$assignedNode.setAttribute(pe,"true"),L(this,ge).setAttribute(pe,"true"),this.notify("topic-event-set-focus"),!!e||this)}},{key:"hasFocus",get:function(){return this.$assignedNode.hasAttribute(pe)}},{key:"createChild",value:function(e,t,r){var i=this.factor.generate(this[he],n,e,this[de]+1,this.env);return i&&(t instanceof n&&this.equal(t.parentTopic)&&t.$assignedNode.insertAdjacentElement("beforebegin",i.$assignedNode),!r&&i.notify("topic-event-change",{action:"create"})),i}},{key:"changeData",value:function(e,t,n){if(e){var r=n||F({},this.data);void 0===t?delete this.data[e]:this.data[e]=t,!n&&this.notify("topic-event-change",{action:"changeData",key:e,originValue:r})}return this}},{key:"moveTo",value:function(e,t,r){if(e instanceof n){var i=this.parentTopic,o=this.nextSiblingTopic;if(!n.equal(i,e)){var a=this.$assignedNode.parentNode,s=a&&a.querySelector('path[d-topic-id="'.concat(this.id,'"]'));s&&s.remove()}t&&n.equal(t.parentTopic,e)?t.$assignedNode.insertAdjacentElement("beforebegin",this.$assignedNode):e[he]&&e[he].insertAdjacentElement("beforeend",this.$assignedNode),fe(this,Se,Be).call(this,e[de]+1),!r&&this.notify("topic-event-change",{action:"move",originParent:i,originSibling:o})}else this.env.warn("No effect if the _parentTopic is not an instance of Topic");return this}},{key:"drop",value:function(e,t){var n;if(this.level>0||"function"==typeof e&&e(n=parseInt(100*Math.random()))===n+1){this.level>0&&!t&&this.notify("topic-event-change",{action:"drop"}),this.killFocus();var r,i=oe(this.enumerateDescendantTopics());try{for(i.s();!(r=i.n()).done;){var o=r.value;o[he]=void 0,o.unmount()}}catch(e){i.e(e)}finally{i.f()}var a=this.parentTopic;if(a){var s=a[he].querySelector('path[d-topic-id="'.concat(this.id,'"]'));s&&s.remove()}this[he]=void 0,this.unmount()}}},{key:"getRect",value:function(e){var t=e?L(this,ge).querySelector(e):L(this,ge).querySelector(".season-topic-box")||L(this,ge),n=t&&t.getBoundingClientRect();if(n){if(!e||".season-topic-box"===e){var r=Number(L(this,ge).getAttribute("d-topic-rect-width")),i=Number(L(this,ge).getAttribute("d-topic-rect-height"));r&&(n.width=r),i&&(n.height=i)}return n}return new DOMRect}},{key:"getBBox",value:function(e){var t=e?L(this,ge).querySelector(e):L(this,ge).querySelector(".season-topic-box")||L(this,ge),n=t instanceof SVGGraphicsElement&&t.getBBox();if(n){if(!e||".season-topic-box"===e){var r=Number(L(this,ge).getAttribute("d-topic-rect-width")),i=Number(L(this,ge).getAttribute("d-topic-rect-height"));r&&(n.width=r),i&&(n.height=i)}return n}return{x:0,y:0,width:0,height:0}}},{key:"getGraphicRect",value:function(e){var t=e?L(this,ge).querySelector(e):L(this,ge).querySelector(".season-topic-box")||L(this,ge);if(t instanceof SVGGraphicsElement){var n=t.getCTM()||t.getScreenCTM(),r=t.getBBox(),i=L(this,ge).ownerSVGElement.getScreenCTM().inverse().translate(n.e,n.f),o=i.e,a=i.f,s=n.translate(r.width,r.height),c=s.e,u=s.f;if(!n||e&&".season-topic-box"!==e)c-=n.e,u-=n.f;else{var l=Number(L(this,ge).getAttribute("d-topic-rect-width"));l&&(c=l),(l=Number(L(this,ge).getAttribute("d-topic-rect-height")))&&(u=l)}return{x:o,y:a,width:c,height:u}}return{x:0,y:0,width:0,height:0}}},{key:"getMatrix",value:function(e){var t=e?L(this,ge).querySelector(e):L(this,ge).querySelector(".season-topic-box")||L(this,ge);return t instanceof SVGGraphicsElement&&(t.getCTM()||t.getScreenCTM())||new DOMMatrix([1,0,0,1,0,0])}},{key:"getRectInViewport",value:function(e){var t=e?L(this,ge).querySelector(e):L(this,ge).querySelector(".season-topic-box")||L(this,ge);if(t instanceof SVGGraphicsElement){var n=t.getCTM()||t.getScreenCTM(),r=t.getBBox(),i=n.translate(r.x,r.y),o=n.translate(r.x+r.width,r.y+r.height);if(e&&".season-topic-box"!==e)return{x:i.e,y:i.f,width:o.e-i.e,height:o.f-i.f};var a=Number(L(this,ge).getAttribute("d-topic-rect-width")),s=Number(L(this,ge).getAttribute("d-topic-rect-height"));return{x:i.e,y:i.f,width:a||o.e-i.e,height:s||o.f-i.f}}return{x:0,y:0,width:0,height:0}}},{key:"getGlobalRect",value:function(){var e=fe(this,ye,Ne).call(this),t=e?e.getBBox():{x:0,y:0,width:0,height:0},n=Number(L(this,ge).getAttribute("d-topic-rect-width"));n&&(t.width=n),(n=Number(L(this,ge).getAttribute("d-topic-rect-height")))&&(t.height=n)}},{key:"visible",get:function(){return"none"!=this.$assignedNode.style.display},set:function(e){var t=e?"":"none";this.$assignedNode.style.display=t;var n=this.$assignedNode.parentNode.querySelector('path[d-topic-id="'.concat(this.id,'"]'));n&&(n.style.display=t)}},{key:"getExtensionInstance",value:function(e){if(e){var t=void 0;try{var n=L(this,ge).querySelector("[season-topic-extends]"),r=n&&n.querySelectorAll(":scope > *");r&&r.forEach((function(n){var r=q.GetInstance(n);if(r&&r.name===e)throw t=r,null}))}catch(t){t&&this.env.warn("Fail in get extension instance of",e,t)}return t}}},{key:"exportImage",value:function(e){var t,n=this.hasFocus;this.env.fireEvent("topic-event-before-render"),n&&this.killFocus();try{e||(e={});var r=this.$assignedNode.ownerSVGElement,i=r.cloneNode(!0),o=i.querySelector("g[season-topic-root-node]");if(o){var a=this.$assignedNode.getBBox(),s=a.x,c=a.y,u=a.width,l=a.height;i.setAttribute("overflow","hidden"),i.setAttribute("width",u),i.setAttribute("height",l),i.setAttribute("viewBox","".concat(s," ").concat(c," ").concat(u," ").concat(l)),i.style.fontSize=getComputedStyle(r)["font-size"],o.innerHTML="";var f=this.$assignedNode.cloneNode(!0);f.removeAttribute("transform"),f.style.transform="",o.appendChild(f),o.querySelectorAll("[season-topic-focus]").forEach((function(e){return e.removeAttribute("season-topic-focus")}));var p='<?xml version="1.0" standalone="no"?>\r\n'+(new XMLSerializer).serializeToString(i);t=this.env.getImageData("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(p),Object.assign({},e,{width:u,height:l}))}}catch(e){t=Promise.resolve(void 0),this.env.warn("Exception raised in export image from topic",e)}return n&&this.setFocus(),this.env.fireEvent("topic-event-after-render"),t}},{key:"on-topic-domevent-click",value:function(e){if(e.preventDefault=!0,this.setFocus(!0))e.triggerContentType=void 0,this.notify("topic-event-trigger",e);else{var t=e.triggerContentType;"fold"===t?(this[me]=!this[me],this.render()):(e.extensionInstance=this.getExtensionInstance(t),this.notify("topic-event-trigger",e))}}},{key:"on-topic-domevent-dblclick",value:function(e){e.preventDefault=!0,this.env.editable&&(this.showInView(),this.notify("topic-event-edit",e))}},{key:"on-topic-domevent-mousedown",value:function(e){if(1===e.originEvent.buttons&&!this.env.dragContext&&this.env.editable&&this.env.dragable&&this[de]>0){var t={sourceTopic:this,parentTopic:this.parentTopic,draging:!1,timeStamp:Date.now()};this.env.dragContext=t}}},{key:"on-topic-domevent-mousemove",value:function(e){var t=this.env.dragContext;if(t&&!t.draging){var n=this.env.config,r=Date.now()-t.timeStamp;(this.hasFocus&&r>=n.dragStartFocusFilterTimer||r>=n.dragStartNoFocusFilterTimer)&&(this.equal(t.sourceTopic)?(this.notify("topic-event-cancel-edit"),e.preventDefault=!0,t.draging=!0,this.factor.prepareDragTipElements(this,t),this.visible=!1):this.factor.clearDragContext(this.env))}}},{key:"on-topic-domevent-mouseover",value:function(e){var t=this,n=this.env.dragContext;n&&n.draging&&!this.equal(n.parentTopic)&&(this.factor.clearDragoverTimer(n),n.dragoverTopic=this,n.dragoverTimer=setTimeout((function(){n.parentTopic=n.dragoverTopic,t.factor.updateDragTipElements(n),t.factor.clearDragoverTimer(n)}),1e3))}},{key:"on-topic-domevent-mouseout",value:function(e){var t=this.env.dragContext;t&&this.equal(t.dragoverTopic)&&this.factor.clearDragoverTimer(t)}}],[{key:"enumerateReferenceResource",value:P.mark((function e(t,r){var i,o,a,s,c,u,l;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof X&&r)){e.next=40;break}if(!r.image||!r.image.src){e.next=4;break}return e.next=4,r.image.src;case 4:i=[];try{t.extensionFactors.forEach((function(e){var n=e.callScript("getReferenceResources",void 0,t,r);n&&(n instanceof Array?i=i.concat(n):i.push(n))}))}catch(e){t.warn("Exception raised in enumerateReferenceResource",e)}o=oe(i),e.prev=7,o.s();case 9:if((a=o.n()).done){e.next=15;break}return s=a.value,e.next=13,s;case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),o.e(e.t0);case 20:return e.prev=20,o.f(),e.finish(20);case 23:if(!(r.children instanceof Array)){e.next=40;break}c=oe(r.children),e.prev=25,c.s();case 27:if((u=c.n()).done){e.next=32;break}return l=u.value,e.delegateYield(n.enumerateReferenceResource(t,l),"t1",30);case 30:e.next=27;break;case 32:e.next=37;break;case 34:e.prev=34,e.t2=e.catch(25),c.e(e.t2);case 37:return e.prev=37,c.f(),e.finish(37);case 40:case"end":return e.stop()}}),e,null,[[7,17,20,23],[25,34,37,40]])}))},{key:"getFirstChildTopic",value:function(e){var t=void 0;if(e instanceof Node)t=e.querySelector(":scope > g[season-topic-global]");else if(e instanceof n){var r=e[he];r&&r.isConnected&&(t=r.querySelector(":scope > g[season-topic-global]"))}return n.GetInstance(t)}},{key:"getMindRootNode",value:function(e){return e instanceof SVGSVGElement?e.querySelector("g[season-topic-root-node]"):e instanceof SVGElement?e.ownerSVGElement.querySelector("g[season-topic-root-node]"):void 0}},{key:"getTopicByID",value:function(e,t){return n.GetInstance(e instanceof Node&&e.querySelector('g[season-topic-global="'.concat(t,'"]')))}},{key:"getFocusTopic",value:function(e){try{if(e instanceof Node){var t=e.querySelector("g[eblock-template][".concat(pe,"]"));return n.GetInstance(t)}}catch(e){return null}}},{key:"convertWindowPointToGraphic",value:function(e,t,n){e instanceof SVGSVGElement||(e=e instanceof SVGGraphicsElement&&e.ownerSVGElement);var r=e&&(e.getCTM()||e.getScreenCTM());return r?{x:(r=new DOMMatrix([r.a,r.b,r.c,r.d,0,0]).inverse().translate(t,n)).e,y:r.f}:{x:t,y:n}}},{key:"showNodeInSvgView",value:function(e,t){var r,i,o=e.getBoundingClientRect(),a=t.getBoundingClientRect();i=o.top<a.top?a.top-o.top:o.bottom>a.bottom?Math.max(a.bottom-o.bottom,a.top-o.top):0,r=o.left<a.left?a.left-o.left:o.right>a.right?Math.max(a.right-o.right,a.left-o.left):0;var s=t.viewBox.baseVal||{x:0,y:0,width:0,height:0},c=s.x,u=s.y,l=s.width,f=s.height;l<=0&&(l=t.width.baseVal.value),f<=0&&(f=t.height.baseVal.value);var p=n.convertWindowPointToGraphic(t,r,i);t.setAttribute("viewBox","".concat(c-p.x," ").concat(u-p.y," ").concat(l," ").concat(f))}}]),n}(y);function Ne(){return Le.getMindRootNode(this.$assignedNode)}function Me(){return this[he]&&this[he].querySelectorAll(":scope > g[season-topic-global]")}function Ie(e){var t=this.$assignedNode,n=t.getBBox(),r=n.y,i=n.height,o={startX:e.contentWidth,endX:e.contentWidth+e.levelMargin,endY:e.listHeight,id:this.data.id,itemOffsetY:r,itemHeight:i,itemNode:t};e.listHeight+=i+e.siblingMargin,e.itemList.push(o)}function Oe(e){var t=this.$assignedNode,n=t.getBBox(),r=n.y,i=n.height,o=L(this,ge).getBBox(),a=o.x,s=o.width,c={startX:0,endX:0-e.levelMargin,endY:e.listHeight,id:this.data.id,itemOffsetY:r,itemHeight:i,itemContentWidth:s+a,itemNode:t};e.listHeight+=i+e.siblingMargin,e.itemList.push(c)}function Re(e,t){if(e.listHeight>t.listHeight){var n=(e.listHeight-t.listHeight)/2;t.itemList.forEach((function(e){e.endY+=n}))}else if(t.listHeight>e.listHeight){var r=(t.listHeight-e.listHeight)/2;e.itemList.forEach((function(e){e.endY+=r}))}}function De(e){e.itemList.forEach((function(e){e.itemNode.setAttribute("transform","translate(".concat(e.itemContentWidth?e.endX-e.itemContentWidth:e.endX,", ").concat(e.endY-e.itemOffsetY,")")),e.endY+=e.itemHeight/2}))}function ze(e,t,n){e.itemList.forEach((function(e){var r=t.querySelector('path[d-topic-id="'.concat(e.id,'"]'));r||(r=document.createElementNS("http://www.w3.org/2000/svg","path"),t.appendChild(r),r.setAttribute("d-topic-id",e.id)),r.setAttribute("class","season-topic-connect-line");var i=(e.endX-e.startX)/2+e.startX;r.setAttribute("d","M".concat(e.startX," ").concat(n,"C").concat(i," ").concat(n," ").concat(i," ").concat(e.endY," ").concat(e.endX," ").concat(e.endY))}))}function Be(e){this[de]=e;var t=fe(this,be,Me).call(this),n=e+1;t&&t.forEach((function(e){var t=e&&Le.GetInstance(e);t instanceof Le&&fe(t,Se,Be).call(t,n)}))}function Pe(e,t,n,r,i,o){return je.apply(this,arguments)}function je(){return je=O(P.mark((function e(t,n,r,o,a,s){var c,u,l,f,p,h;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(c=this.$assignedNode.ownerSVGElement.querySelector("[season-topic-image-storage]"))){e.next=26;break}if(!(u=c.querySelector('symbol[d-url="'.concat(t,'"]')))){e.next=8;break}r.setAttribute("href","#"+u.getAttribute("id")),e.next=24;break;case 8:return l="storeimg-"+i(),(u=document.createElementNS("http://www.w3.org/2000/svg","symbol")).setAttribute("id",l),u.setAttribute("d-href",n),u.setAttribute("d-url",t),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("width",o),u.setAttribute("height",a),u.setAttribute("viewBox","0 0 ".concat(o," ").concat(a)),u.insertAdjacentHTML("afterbegin",'<use href="#'.concat(s.placeholderImageId||X.DefaultConfig.placeholderImageId,'" width="').concat(o,'" height="').concat(a,'" style="mix-blend-mode:difference;fill:#000;" stroke="none" />')),c.appendChild(u),r.setAttribute("href","#"+l),e.next=22,this.env.getImageData(t,{type:"png"});case 22:(f=e.sent)?(p=f.width,h=f.height,u.setAttribute("width",u.$width=p),u.setAttribute("height",u.$height=h),u.setAttribute("viewBox","0 0 ".concat(p," ").concat(h)),u.innerHTML='<image class="season-topic-image" x="0" y="0" width="'.concat(p,'" height="').concat(h,'" href="').concat(f.data,'" />')):this.env.warn("Fail in loading image",t);case 24:e.next=27;break;case 26:throw"Fail in locating the storage node for images";case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(0),this.env.warn("Exception in loadImageInStorage:",t,e.t0);case 32:case"end":return e.stop()}}),e,this,[[0,29]])}))),je.apply(this,arguments)}function Fe(e,t,n){for(var r=this,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];if(e&&n){var s={},c=e.querySelectorAll(":scope > *");c&&c.forEach((function(e){var t=q.GetInstance(e);t&&t.name&&(s[t.name]=t)})),c=[],this.env.extensionFactors.forEach((function(t){var i,a=t.$info&&t.$info.name;a in s?i=s[a]:a in n&&(i=t.generate(e,q,n,r)),i&&(i.render.apply(i,o),i.$assignedNode.isConnected&&c.push(i.$assignedNode))}));var u=0;c.forEach((function(e){var t=e.getBBox();e.$width=t.width;var n=e.$height=t.height;u<n&&(u=n)}));var l=Number(t.secondaryPadding)||0,f=0;c.forEach((function(e){e.setAttribute("transform","translate(".concat(f,", ").concat((u-e.$height)/2,")")),f+=e.$width+l}))}}function $e(){var e=Array.prototype.splice.call(arguments,0);return e[2]||(e[2]=this.env.config),y.prototype.render.apply(this,e),this}function Ue(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return qe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e){var t=new WeakMap;return $(e,{binding:function(n){if(t.has(n))return t.get(n);var r=e.bind(n);return t.set(n,r),r},deleteBinding:function(e){return t.delete(e)}})}var We=["top","left","right","bottom"];function Ve(e,t,n,r){var i=(e-=2*t)/2;r+r>e&&(r=i);var o=i+n-r;o<0&&(o=0);var a=e-o-2*r;return a<0&&(a=0,o=e-2*r),[o,a]}function Ge(e,t){if(e&&t){for(var n=function(t){var n=e["@"+t.type];"function"==typeof n&&n.call(e,t)},r=n.$installed=new Set,i=Object.getPrototypeOf(e);i;){var o,a=Ue(Object.getOwnPropertyNames(i));try{for(a.s();!(o=a.n()).done;){var s=o.value;s.startsWith("@")&&!r.has(s)&&"function"==typeof e[s]&&(r.add(s),t.addEventListener(s.substring(1),n))}}catch(e){a.e(e)}finally{a.f()}i=Object.getPrototypeOf(i)}for(var c in e)c.startsWith("@")&&!r.has(c)&&"function"==typeof e[c]&&(r.add(c),t.addEventListener(c.substring(1),n));return n}}function Ye(e,t){_obj&&e&&t&&t.$installed instanceof Set&&t.$installed.forEach((function(n){e.removeEventListener(n.substring(1),t)}))}
/**
  	                           * @author season <season-studio@outlook.com>
  	                           * @license Apache-2.0
  	                           */function Ze(e){var t=e.target;if(t instanceof SVGGraphicsElement){t instanceof SVGSVGElement||(t=t.ownerSVGElement);var n=t.getScreenCTM().inverse(),r=t.getBoundingClientRect(),i=n.translate(e.clientX-r.x,e.clientY-r.y);return{x:i.e,y:i.f}}return{x:0,y:0}}function Xe(e){e&&(e.dragStubNode&&e.dragStubNode.remove(),e.dragStubNode=void 0,e.dragLine&&e.dragLine.remove(),e.dragLine=void 0)}function Ke(e,t){if(e){var n=e.dragStubNode,r=0,i=0;if(n){var o=t instanceof MouseEvent?Ze(t):{x:n.$x,y:n.$y},a=o.x,s=o.y;n.setAttribute("transform","translate(".concat(a+2,", ").concat(s+2,")")),r=a+1+n.$width/2,i=s+1+n.$height/2,n.$x=a,n.$y=s}var c=e.dragLine;if(c&&e.parentTopic){var u=e.parentTopic.getGraphicRect();c.setAttribute("d","M".concat(u.x+u.width/2," ").concat(u.y+u.height/2,"L").concat(r," ").concat(i))}}}function Je(e){e&&(e.dragoverTimer&&clearTimeout(e.dragoverTimer),e.dragoverTimer=void 0,e.dragoverTopic=void 0)}function Qe(e){if(e){var t=e.dragContext;t&&(Je(t),Xe(t),t.sourceTopic&&(t.sourceTopic.visible=!0),t.sourceTopic=void 0,e.dragContext=void 0)}}var et=He((function(e){var t=e.detail.originEvent,n=this.env.dragContext;0!=(1&t.buttons)?n&&n.draging&&n.sourceTopic&&Ke(n,t):n&&Qe(this.env)})),tt=He((function(e){var t=e.detail,n=t.originEvent;if(0==(1&n.buttons)){var r=this.env.dragContext;if(r){if(r.draging){t.preventDefault=!0;var i,o=Ze(n),a=r.parentTopic,s=r.sourceTopic;if(a.level>0)for(i=a.firstChildTopic;i;i=i.nextSiblingTopic){var c=i.getGraphicRect();if(!i.equal(s)&&c.y>=o.y)break}else{var u=a.getGraphicRect(),l=u.x+u.width/2,f=o.x>=l,p=!1;for(i=a.firstChildTopic;i;i=i.nextSiblingTopic){var h=i.getGraphicRect();if(f===h.x>=l){if(p=!0,!i.equal(s)&&h.y>=o.y)break}else if(p)break}}y.equal(a,s.parentTopic)&&y.equal(i,s.nextSiblingTopic)||s.moveTo(a,i),s.queueAction((function(){s.render(),s.$assignedNode.ownerSVGElement.focus()}))}Qe(this.env)}}})),nt=He((function(e){var t=e.detail,n=t.originEvent;"escape"===String(n.key).toLowerCase()&&(Qe(this.env),t.preventDefault=!0)})),rt=new u((new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs eblock-predefined=""><path id="topic-fold-icon-plus" fill="#fff" fill-opacity="0.8" stroke="#000" stroke-width="1" transform="translate(-3, -1), scale(1.5, 1.5)" d="M1 4A3 3 0 1 0 8 4A3 3 0 1 0 1 4M2.5 4L6.5 4M4.5 2L4.5 6"/><path id="topic-fold-icon-minus" fill="#fff" fill-opacity="0.8" stroke="#000" stroke-width="1" transform="translate(-3, -1), scale(1.5, 1.5)" d="M1 4A3 3 0 1 0 8 4A3 3 0 1 0 1 4M2.5 4L6.5 4"/><pattern id="season-topic-drag-mask" x="0" y="0" width="4" height="4" patternUnits="userSpaceOnUse"><rect x="2" y="0" width="2" height="2" fill="#000" stroke="none"/><rect x="0" y="2" width="2" height="2" fill="#000" stroke="none"/></pattern><style><![CDATA[.topic-box-inner-rect{width:calc(var(--topic-rect-width) - var(--topic-border-size));height:calc(var(--topic-rect-height) - var(--topic-border-size));x: calc(var(--topic-border-size)/2);y: calc(var(--topic-border-size)/2);stroke-width:var(--topic-border-size);rx: var(--topic-box-radius) !important;ry: var(--topic-box-radius) !important;}]]></style><symbol id="topic-default-box" preserveAspectRatio="none"><rect rx="6" ry="6" class="topic-box-inner-rect" pathLength="100"></rect></symbol></defs><style eblock-predefined="">.season-topic-drag-mask{rx: var(--topic-box-radius, 6px);ry: var(--topic-box-radius, 6px);fill:url(#season-topic-drag-mask);fill-opacity:.3;stroke:none}.season-topic-drag-line{fill:none;stroke:#2c3e50;stroke-width:3px;stroke-dasharray:5,5;stroke-opacity:.6}.season-topic-drag-group,[season-topic-root-node]{--topic-base-fill-color:#ff6600;--topic-base-line-color:#ff6600;--topic-base-font-color:#fff}[season-topic-global]{--topic-fill-color:var(--topic-base-fill-color);--topic-font-color:#000;--topic-font-weight:400;--topic-font-size:1em;--topic-line-color:var(--topic-base-line-color);--topic-line-size:2px;--topic-line-dasharray:none;--topic-line-opacity:1;--topic-border-color:var(--topic-line-color);--topic-border-opacity:0.3;--topic-border-size:0.5px;--topic-border-dasharray:1,0.3;--topic-box-opacity:0.01;--topic-box-radius:6px}[season-topic-global] *{outline:0}[season-topic-content-group]{font-size:var(--topic-font-size)}.season-topic-box{fill:var(--topic-fill-color);fill-opacity:var(--topic-box-opacity);stroke:var(--topic-border-color);stroke-opacity:var(--topic-border-opacity);stroke-dasharray:var(--topic-border-dasharray);stroke-width:var(--topic-border-size)}.season-topic-title{alignment-baseline:before-edge;dominant-baseline:text-before-edge;fill:var(--topic-font-color);font-weight:var(--topic-font-weight)}.season-topic-connect-line{fill:none;stroke:var(--topic-line-color);stroke-width:var(--topic-line-size);stroke-opacity:var(--topic-line-opacity);stroke-dasharray:var(--topic-line-dasharray)}[season-topic-content-group][d-topic-level="0"]{--topic-font-size:1.3em;--topic-font-color:#fff;--topic-font-weight:700;--topic-box-opacity:1;--topic-border-size:1.5px;--topic-border-opacity:1;--topic-border-dasharray:none}[season-topic-content-group][d-topic-level="1"]{--topic-font-weight:700;--topic-box-opacity:0.17;--topic-border-size:1px;--topic-border-opacity:0.6;--topic-border-dasharray:none}[season-topic-content-group][season-topic-focus]{--topic-fill-color:var(--topic-base-fill-color);--topic-font-color:var(--topic-base-font-color);--topic-border-color:#F04137;--topic-font-weight:700;--topic-box-opacity:1;--topic-border-opacity:1;--topic-border-size:2px;--topic-border-dasharray:none}</style><g eblock-template="" season-topic-global=""><g season-topic-children-group=""/><g season-topic-content-group="" tabindex="0"><use class="season-topic-box"/><text class="season-topic-title" season-topic-content-type="title"/><use class="season-topic-image" season-topic-content-type="image" href=""/><g season-topic-extends=""/><use href="#" season-topic-content-type="fold"/></g></g></svg>',"image/svg+xml").querySelector("svg"));function it(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}$(rt,{getEventPointInGraphic:Ze,clearDragoverTimer:Je,prepareDragTipElements:function(e,t){if(e instanceof y&&e.$assignedNode instanceof SVGGraphicsElement&&t){var n=e.$assignedNode.ownerSVGElement;if(n){var r=n.querySelector(".season-topic-drag-group");if(!r&&(r=t.dragStubNode=document.createElementNS("http://www.w3.org/2000/svg","g"))){r.setAttribute("class","season-topic-drag-group"),r.setAttribute("season-topic-global",e.$assignedNode.getAttribute("season-topic-global"));var i=e.acquireNode(":scope > [season-topic-content-group]"),o={$width:0,$height:0,$x:0,$y:0};if(i){(i=i.cloneNode(!0)).removeAttribute("season-topic-focus");var a=i.querySelector(".season-topic-box");a&&(a=a.cloneNode())&&(a.setAttribute("class","season-topic-drag-mask"),o.$width=parseInt(a.getAttribute("width"))||0,o.$height=parseInt(a.getAttribute("height"))||0),i.appendChild(a),(a=i.querySelector('[season-topic-content-type="fold"]'))&&a.remove(),r.appendChild(i)}n.appendChild(r),Object.assign(r,o)}var s=n.querySelector(".season-topic-drag-line");s||(s=t.dragLine=document.createElementNS("http://www.w3.org/2000/svg","path"))&&(s.setAttribute("class","season-topic-drag-line"),n.appendChild(s))}}},clearDragTipElements:Xe,updateDragTipElements:Ke,clearDragContext:Qe,onFactorRegister:function(e){j(e instanceof c,M,-1,"_container must be an instance of EBlockContainer"),e.enableDomEvent("click"),e.enableDomEvent("dblclick"),e.enableDomEvent("mousedown"),e.enableDomEvent("mousemove"),e.enableDomEvent("mouseover"),e.enableDomEvent("mouseout"),e.enableDomEvent("mouseup"),e.enableDomEvent("keydown"),e.addEventListener("topic-domevent-mousemove",et.binding(e)),e.addEventListener("topic-domevent-mouseup",tt.binding(e)),e.addEventListener("topic-domevent-keydown",nt.binding(e))},onFactorUnregister:function(e){j(e instanceof c,M,-1,"_container must be an instance of EBlockContainer"),e.disableDomEvent("click"),e.disableDomEvent("dblclick"),e.disableDomEvent("mousedown"),e.disableDomEvent("mousemove"),e.disableDomEvent("mouseover"),e.disableDomEvent("mouseout"),e.disableDomEvent("mouseup"),e.disableDomEvent("keydown"),e.removeEventListener("topic-domevent-mousemove",et.binding(e)),e.removeEventListener("topic-domevent-mouseup",tt.binding(e)),e.removeEventListener("topic-domevent-keydown",nt.binding(e)),et.deleteBinding(e),tt.deleteBinding(e),nt.deleteBinding(e)}});var st=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,ft=function(){function e(t){b(this,e),at(this,st,{writable:!0,value:void 0}),at(this,ct,{writable:!0,value:void 0}),at(this,ut,{writable:!0,value:void 0}),at(this,lt,{writable:!0,value:void 0}),j(t instanceof X,M,-1,"_env must be an instance of MindmapEnvironment"),$(this,"env",t),N(this,st,{}),N(this,ct,[]),N(this,ut,Ge(this,t)),N(this,lt,!1)}var t;return x(e,[{key:"sheetCount",get:function(){return L(this,ct).length}},{key:"firstSheet",get:function(){return L(this,ct)[_index]}},{key:"getSheetByID",value:function(e){var t;try{L(this,ct).forEach((function(n){e===n.id&&(t=n)}))}catch(e){e&&console.warn(e)}return t}},{key:"switchToSheet",value:function(e,t){var n=this.getSheetByID(e);return n?(t&&this.synchronizeSheetWithView(),this.env.fireEvent("topic-event-view-switch-sheet",{sheet:n})):this.env.warn("sheet[".concat(e,"] no found")),this}},{key:"enumerateSheet",value:P.mark((function e(){var t;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=P.keys(L(this,ct));case 1:if((e.t1=e.t0()).done){e.next=7;break}return t=e.t1.value,e.next=5,{index:t,sheet:L(this,ct)[t]};case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"removeSheet",value:function(e,t){var n,r;for(r in t&&this.synchronizeSheetWithView(),L(this,ct))if(L(this,ct)[r].id===e){n=L(this,ct).splice(r,1),N(this,lt,!0),r>0&&(r-=1);break}var i=L(this,ct)[r];return i||(i=F({},this.constructor.DefaultSheetTemplate),this.addSheet(i)),this.env.fireEvent("topic-event-view-switch-sheet",{sheet:i}),n}},{key:"addSheet",value:function(e,t){return e&&(e.id||(e.id=i()),j(!this.getSheetByID(e.id),M,-1,"The id of the sheet had been contained in the document"),isNaN(t)?L(this,ct).push(e):L(this,ct).splice(t,0,e),N(this,lt,!0),this.env.fireEvent("topic-event-sheet-list-changed")),this}},{key:"synchronizeSheetWithView",value:function(){var e={sheets:[],attachments:{}};this.env.fireEvent("topic-event-view-submit",e);var t,n=0,r=it(e.sheets);try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.sheetID,a=i.topicData;n++;var s=this.getSheetByID(o);s?s.topic=a:this.addSheet({topic:a})}}catch(e){r.e(e)}finally{r.f()}for(var c in n>0&&N(this,lt,!0),e.attachments)this.hasAttachment(c)||this.setAttachment(c,e.attachments[c]);return this}},{key:"enumerateAttachment",value:P.mark((function e(){var t;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=P.keys(L(this,st));case 1:if((e.t1=e.t0()).done){e.next=7;break}return t=e.t1.value,e.next=5,{name:t,data:L(this,st)[t]};case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"removeAttachment",value:function(e){var t=L(this,st)[e];return t instanceof Blob&&t.$url&&URL.revokeObjectURL(t.$url),delete L(this,st)[e],N(this,lt,!0),this}},{key:"getAttachment",value:function(e){return L(this,st)[e]}},{key:"setAttachment",value:function(e,t){return this.removeAttachment(e),L(this,st)[e]=t,N(this,lt,!0),this}},{key:"clearAttachment",value:function(){for(var e in L(this,st)){var t=L(this,st)[e];t instanceof Blob&&t.$url&&URL.revokeObjectURL(t.$url)}return N(this,st,{}),N(this,lt,!0),this}},{key:"hasAttachment",value:function(e){return e in L(this,st)}},{key:"collectAttachments",value:function(){var e=this,t=new Set,n="".concat(this.env.config.resourceScheme,":"),r=n.length;L(this,ct)instanceof Array&&L(this,ct).forEach((function(i){var o,a=it(Le.enumerateReferenceResource(e.env,i.topic));try{for(a.s();!(o=a.n()).done;){var s=o.value;String(s).startsWith(n)&&(s=String(s).substring(r)),t.add(s)}}catch(e){a.e(e)}finally{a.f()}})),Object.getOwnPropertyNames(L(this,st)).forEach((function(n){t.has(n)||e.removeAttachment(n)}))}},{key:"newDocument",value:(t=O(P.mark((function e(t){var n,r,o,a,s=arguments;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.clearAttachment(),N(this,ct,[]),n=s.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=s[o];if(a="function"==typeof t&&t.apply(this,r),e.t0=a instanceof Promise,!e.t0){e.next=8;break}return e.next=8,a;case 8:return L(this,ct).length<=0&&N(this,ct,[F({id:i()},this.constructor.DefaultSheetTemplate)]),this.env.fireEvent("topic-event-sheet-list-changed"),this.env.fireEvent("topic-event-view-switch-sheet",{sheet:L(this,ct)[0]}),N(this,lt,!1),e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"saveDocument",value:function(e,t){return t||this.env.fireEvent("topic-event-cancel-edit"),this.synchronizeSheetWithView(),"function"==typeof e&&e.apply(this,Array.prototype.slice.call(arguments,1))}},{key:"getThumbImage",value:function(e,t){t||this.env.fireEvent("topic-event-cancel-edit");var n={image:void 0,option:{toBlob:e||!1}};return this.env.fireEvent("topic-event-view-export-image",n),n.image instanceof Promise?n.image:Promise.resolve(n.image)}},{key:"dispose",value:function(){Ye(this.env,L(this,ut))}},{key:"dirty",get:function(){return L(this,lt)}},{key:"clearDirtyFlag",value:function(e){var t;"function"==typeof e&&e(t=parseInt(100*Math.random()))===t+1&&N(this,lt,!1)}},{key:"@topic-event-translate-href-url",value:function(e){var t=e.detail;if(t){var n=String(t.source),r=String(this.env.config.resourceScheme||"").length;if(n.startsWith("".concat(this.env.config.resourceScheme,":"))){n=t.source=n.substring(r+1);var i=L(this,st)[n];i instanceof Blob?t.destination=i.$url||(i.$url=URL.createObjectURL(i)):i&&(t.destination=String(i))}}}},{key:"@topic-event-get-href-type",value:function(e){var t=e.detail;t&&String(t.href).startsWith("".concat(this.env.config.resourceScheme,":"))&&(t.type="resource")}},{key:"@topic-event-update-attachment",value:function(e){var t=e.detail;if(t&&t.resource){var n=t.name||i();this.setAttachment(n,t.resource),t.href=this.env.config.resourceScheme+":"+n}}}]),e}();function pt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function vt(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}B(ft,"DefaultSheetTemplate",{title:"Untitled Sheet",topic:{title:"Main Topic"}}),B(ft,"DefaultTopicTemplate",{title:"New Topic"});var mt=new WeakMap,gt=new WeakMap,yt=new WeakMap,bt=function(e){E(n,e);var t=dt(n);function n(e,r){var i;b(this,n),j(e instanceof ft,M,-1,"_doc must be an instance of MindmapDocument"),vt(k(i=t.call(this,r,e.env)),mt,{writable:!0,value:void 0}),vt(k(i),gt,{writable:!0,value:void 0}),vt(k(i),yt,{writable:!0,value:void 0}),B(k(i),"UIControlMap",{"ctrl+wheel":{action:"zoom-view",args:[{}]},mouseleft:{action:"move-view"},arrowright:{action:"goto-topic-with-direction",args:["right"]},arrowleft:{action:"goto-topic-with-direction",args:["left"]},arrowup:{action:"gotoPreviousSiblingTopic"},arrowdown:{action:"gotoNextSiblingTopic"},f2:{action:"editFocusTopic"},delete:{action:"deleteFocusTopic"},tab:{action:"createChildTopic"},enter:{action:"createSiblingTopic"},home:{action:"gotoRootTopic"}});var o=e.env;return $(k(i),"doc",e),i.enableDomEvent("wheel"),i.enableDomEvent("contextmenu"),rt.register(k(i)),N(k(i),gt,void 0),N(k(i),mt,Ge(k(i),o)),N(k(i),yt,{}),o.syncConfig(),i}return x(n,[{key:"dispose",value:function(){Ye(this.doc.env,L(this,mt)),this.disableDomEvent("wheel"),this.disableDomEvent("contextmenu"),ne.prototype.dispose.call(this)}},{key:"sheetID",get:function(){return L(this,gt)}},{key:"rootTopic",get:function(){return Le.getFirstChildTopic(this.stageContainer)}},{key:"focusTopic",get:function(){return Le.getFocusTopic(this.stageContainer)}},{key:"getTopicByID",value:function(e){return Le.getTopicByID(this.stageContainer,e)}},{key:"createChildTopic",value:function(){var e=this.focusTopic;return e&&(e=e.createChild(F({},this.doc.constructor.DefaultTopicTemplate))),e&&e.setFocus().render().showInView().notify("topic-event-edit",{eventTarget:e}),this}},{key:"createSiblingTopic",value:function(){var e=this.focusTopic,t=e&&(e.parentTopic||e);return t&&(e=t.createChild(F({},this.doc.constructor.DefaultTopicTemplate),e.nextSiblingTopic)),e&&e.setFocus().render().showInView().notify("topic-event-edit",{eventTarget:e}),this}},{key:"editFocusTopic",value:function(e){var t=this.focusTopic;return t&&t.showInView().notify("topic-event-edit",{eventTarget:t,triggerContentType:e||"title"}),this}},{key:"deleteFocusTopic",value:function(){var e=this.focusTopic,t=e&&(e.nextSiblingTopic||e.previousSiblingTopic||e.parentTopic);return e&&e.drop(),t&&t.setFocus().render().showInView(),this}},{key:"gotoNextSiblingTopic",value:function(){var e=this.focusTopic;return e&&(e=e.nextSiblingTopic),e&&e.setFocus().showInView(),this}},{key:"gotoPreviousSiblingTopic",value:function(){var e=this.focusTopic;return e&&(e=e.previousSiblingTopic),e&&e.setFocus().showInView(),this}},{key:"gotoParentTopic",value:function(){var e=this.focusTopic;return e&&(e=e.parentTopic),e&&e.setFocus().showInView(),this}},{key:"gotoChildrenTopic",value:function(){var e=this.focusTopic;return e&&(e=e.firstChildTopic),e&&e.setFocus().showInView(),this}},{key:"gotoRootTopic",value:function(){var e=this.rootTopic;return e&&e.setFocus().showInView(),this}},{key:"render",value:function(){var e;return(e=this.rootTopic).render.apply(e,arguments),this}},{key:"exportImage",value:function(e){e||(e={}),e.keepWorkState||this.env.fireEvent("topic-event-cancel-edit");var t=this.focusTopic;t&&!e.keepWorkState&&t.killFocus();var n=this.stageContainer.getBBox(),r=n.x,i=n.y,o=n.width,a=n.height,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),s.setAttribute("overflow","hidden"),s.setAttribute("width",o),s.setAttribute("height",a),s.setAttribute("viewBox","".concat(r," ").concat(i," ").concat(o," ").concat(a)),s.style.fontSize=getComputedStyle(this.svgElement)["font-size"],s.insertAdjacentHTML("afterbegin",this.svgElement.innerHTML);var c='<?xml version="1.0" standalone="no"?>\r\n'+(new XMLSerializer).serializeToString(s);return t&&!e.keepWorkState&&t.setFocus(),this.env.getImageData("data:image/svg+xml;charset=utf-8,"+encodeURIComponent(c),Object.assign({},e,{width:o,height:a}))}},{key:"@topic-event-report-configuration",value:function(e){var t=e&&e.detail,n=t&&t.result||{};try{for(var r,i=document.evaluate('./*[local-name(.) = "desc" and @season-topic-parameters]',this.svgElement,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),o=0;r=i.snapshotItem(o++);)try{Object.assign(n,JSON.parse(String(r.textContent).trim()))}catch(e){this.env.warn("Exception raised in parse parameter item",e)}}catch(e){this.env.warn("Exception raised in query parameters",e)}t&&(t.result=n)}},{key:"@topic-event-sync-configuration",value:function(e){try{var t=e&&e.detail,n=this.svgElement.style,r=String(this.svgElement.getAttribute("d-custom-style-props")||"").trim();if(r&&r.split(";").forEach((function(e){(e=e.trim())&&n.removeProperty(e)})),this.svgElement.removeAttribute("d-custom-style-props"),t){var i=[];Object.entries(t).forEach((function(e){var t="--"+String(e[0]||"").replace(/[A-Z]/g,(function(e){return"-"+e.toLocaleLowerCase()}));i.push(t),n.setProperty(t,e[1])})),i.length>0&&this.svgElement.setAttribute("d-custom-style-props",i.join(";"))}}catch(e){this.env.warn("Exception raised in update parameters as the svg custom style value",e)}}},{key:"@topic-event-view-export-image",value:function(e){e&&e.detail&&(e.detail.image=this.exportImage(e.detail.option))}},{key:"@topic-event-view-switch-sheet",value:function(e){if(e.detail){this.env.fireEvent("topic-event-cancel-edit");var t=e.detail&&e.detail.sheet;if(t&&t.id){var n=this.rootTopic;n&&n.drop((function(e){return e+1})),N(this,gt,t.id),n=rt.generate(this.stageContainer,Le,F({},t.topic),0,this.env).render().queueAction((function(){n&&n.showInCenterOfView()}))}}}},{key:"@topic-event-view-submit",value:function(e){var t=this.rootTopic.exportTopicData(),n=e&&e.detail;if(t&&n){var r=n.sheets;if(r instanceof Array&&r.push({sheetID:L(this,gt),topicData:t}),this.rootTopic.collectImageStorage(),n.attachments){var i,o=pt(this.rootTopic.enumerateImageInStorage());try{for(o.s();!(i=o.n()).done;){var a=i.value;n.attachments[a.sourceHRef]=a.href}}catch(e){o.e(e)}finally{o.f()}}}}},{key:"@topic-domevent-mousedown",value:function(e){var t=e&&e.detail,r=t&&t.originEvent;t&&!t.eventTarget&&n.dispatchControlMapAction(r,this)}},{key:"@topic-domevent-mousemove",value:function(e){var t=this,r=e&&e.detail,i=r&&r.originEvent;r&&!r.eventTarget&&(n.dispatchControlMapAction(i,this,(function(e){L(t,yt).type&&L(t,yt).type!==e.action&&(L(t,yt).type=void 0)}))||L(this,yt).type&&(L(this,yt).type=void 0))}},{key:"@topic-domevent-mouseup",value:function(e){var t=e&&e.detail,n=t&&t.originEvent;t&&!t.eventTarget&&L(this,yt).type&&this[L(this,yt).type](n)}},{key:"@topic-domevent-click",value:function(e){var t=e&&e.detail,n=t&&!t.eventTarget&&this.focusTopic&&this.focusTopic;n&&n.killFocus()}},{key:"@topic-domevent-wheel",value:function(e){var t=e&&e.detail,r=t&&t.originEvent;t&&n.dispatchControlMapAction(r,this)}},{key:"@topic-domevent-keydown",value:function(e){var t=e&&e.detail,r=t&&t.originEvent;n.dispatchControlMapAction(r,this)&&(r.preventDefault(),r.stopPropagation())}},{key:"@topic-domevent-contextmenu",value:function(e){var t=e&&e.detail,n=t&&t.originEvent;n.preventDefault(),n.stopPropagation()}},{key:"move-view",value:function(e){if(e instanceof WheelEvent)this.move(e.deltaX,e.deltaY),e.preventDefault(),e.stopPropagation();else if(e instanceof MouseEvent){var t=L(this,yt);if("mousedown"===e.type)t.type="move-view",t.x=e.clientX,t.y=e.clientY,this.svgElement.style.cursor="grabbing";else if("mousemove"===e.type){if("move-view"===t.type){var n=t.x-e.clientX,r=t.y-e.clientY;t.x=e.clientX,t.y=e.clientY;var i=Le.convertWindowPointToGraphic(this.svgElement,n,r);this.move(i.x,i.y)}e.preventDefault(),e.stopPropagation()}else t.type=null,this.svgElement.style.cursor=""}}},{key:"zoom-view",value:function(e,t){if(t||(t={}),e instanceof WheelEvent){var n="x"===t.by?e.deltaX>0:"z"===t.by?e.deltaZ>0:e.deltaY>0;n=n?this.scale-(Number(t.delta)||.02):this.scale+(Number(t.delta)||.02),this.scale=Math.min(Math.max(n,Number(t.min)||.1),Number(t.max)||2),e.preventDefault(),e.stopPropagation()}else if(e instanceof MouseEvent){var r=L(this,yt);if("mousedown"===e.type)r.type="zoom-view",r.x=e.clientX,r.y=e.clientY,this.svgElement.style.cursor="zoom-in";else if("mousemove"===e.type){if("zoom-view"===r.type){var i="x"===t.by?r.x<e.clientX:r.y<e.clientY;i=i?0-(Number(t.delta)||.02):Number(t.delta)||.02,r.x=e.clientX,r.y=e.clientY,this.svgElement.style.cursor=i>0?"zoom-in":"zoom-out",this.scale=Math.min(Math.max(this.scale+i,Number(t.min)||.1),Number(t.max)||2)}}else r.type=null,this.svgElement.style.cursor="";e.preventDefault(),e.stopPropagation()}}},{key:"goto-topic-with-direction",value:function(e,t){var n="right"===t,r=this.focusTopic;if(r){if(r.level<1){for(r=r.firstChildTopic;r;r=r.nextSiblingTopic)if(r.direction==n){r.setFocus();break}}else r.direction==n?this.gotoChildrenTopic():this.gotoParentTopic();e.preventDefault(),e.stopPropagation()}}}],[{key:"getContrlMapKey",value:function(e,t){var n=[];if(e instanceof UIEvent)if(e.ctrlKey&&n.push(t?"Ctrl":"ctrl"),e.altKey&&n.push(t?"Alt":"alt"),e.shiftKey&&n.push(t?"Shift":"shift"),e.metaKey&&n.push(t?"Meta":"meta"),e instanceof MouseEvent)e instanceof WheelEvent&&n.push("wheel"),0!=(1&e.buttons)&&n.push("mouseleft"),0!=(2&e.buttons)&&n.push("mouseright"),0!=(4&e.buttons)&&n.push("mousemiddle"),0!=(8&e.buttons)&&n.push("mouseback"),0!=(16&e.buttons)&&n.push("mouseforward");else if(e instanceof KeyboardEvent){var r=String(e.key);t?(1===r.length&&r[0]>="a"&&r[0]<="z"&&(r=r.toLocaleUpperCase()),n.push(r)):n.push(r.toLocaleLowerCase())}return n.join("+")}},{key:"dispatchTopicEventAction",value:function(e,t){var n=e instanceof Event?e.detail:e,r=n&&this[n.triggerContentType||"title"],i=r&&r[t||e instanceof Event&&String(e.type).replace(/^topic-event-/gi,"")];return"function"==typeof i&&(i(n),!0)}},{key:"dispatchControlMapAction",value:function(e,t,r){var i=n.getContrlMapKey(e),o=t.UIControlMap[i];if(o){var a,s=o.action;if("function"==typeof s||(s=t[s]),"function"==typeof s)return"function"==typeof r&&r(o),(a=s).call.apply(a,[t,e].concat(ie(o.args||[]))),o}}}]),n}(ne);
/**
  	                           * @author season <season-studio@outlook.com>
  	                           * @license Apache-2.0
  	                           */function wt(e,t,n){return new H((new DOMParser).parseFromString(e,t||"image/svg+xml").querySelector(n||"svg"))}var xt=[wt('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs eblock-predefined="" d-tag="topic-priority"><symbol id="topic-priority-1" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#f00" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M8 7L10.5 6V16"></path></symbol><symbol id="topic-priority-2" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#f00" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M7 8C10.5 1 20 8 7 14M6 14H16"></path></symbol><symbol id="topic-priority-3" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#f0f" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M7 7C10.5 1 20 8 10 10C21 10 10.5 21 6 12"></path></symbol><symbol id="topic-priority-4" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#f0f" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M12 4Q10 10 6 13M5 13H15M13 8L11 16"></path></symbol><symbol id="topic-priority-5" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#06f" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M9 4Q9 7 8 9M7 9C18 5 16 20 6 14M9 5H14"></path></symbol><symbol id="topic-priority-6" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#06f" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M7 9C13 7 16 13 10 15C4 15 4 9 13 4"></path></symbol><symbol id="topic-priority-7" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#093" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M7 8V6Q11 7 13 6.5Q10 12 9 16"></path></symbol><symbol id="topic-priority-8" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#093" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M10 9C6 8 7 3 12 4C15 5 15 10 10 9C16 10 16 16.5 10 16C4 15 4 9 10 9"></path></symbol><symbol id="topic-priority-9" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#993" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M15 10C6 16 5 3.5 12 4.5C18 6 16 17 7 16"></path></symbol></defs><script eblock-script=""><![CDATA[        declarer.getExtensionInfo = function () {            return {                name: "priority"            };        };        declarer.onRendering = function (_data) {            if (_data) {                let priority = Number(_data.priority);                if (priority && (priority > 0) && (priority < 10)) {                    this.$assignedNode.setAttribute("href", "#topic-priority-" + priority);                } else {                    this.unmount();                }            }        };    ]]><\/script><use eblock-template="" season-topic-content-type="priority" ebevent-rendering="onRendering" width="22" height="22"/></svg>'),wt('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs eblock-predefined="" d-tag="topic-task-marker"><symbol id="topic-task-marker-0" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#fff" fill-opacity="0.8" stroke="#093" stroke-width="1" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M8 14V5L15 10L8 15V6"></path></symbol><symbol id="topic-task-marker-1" width="20" height="20" viewBox="-1 -1 22 22"><circle cx="10.5" cy="10.5" r="10" stroke="none" fill="#093" fill-opacity="0.8"></circle><path stroke="none" fill="#fff" fill-opacity="0.8" d="M10.5 10.5V2A8.5 8.5 180 1 0 16.5 4.5L10.5 10.5"></path></symbol><symbol id="topic-task-marker-2" width="20" height="20" viewBox="-1 -1 22 22"><circle cx="10.5" cy="10.5" r="10" stroke="none" fill="#093" fill-opacity="0.8"></circle><path stroke="none" fill="#fff" fill-opacity="0.8" d="M10.5 10.5V2A8.5 8.5 180 1 0 19 10.5L10.5 10.5"></path></symbol><symbol id="topic-task-marker-3" width="20" height="20" viewBox="-1 -1 22 22"><circle cx="10.5" cy="10.5" r="10" stroke="none" fill="#093" fill-opacity="0.8"></circle><path stroke="none" fill="#fff" fill-opacity="0.8" d="M10.5 10.5V2A8.5 8.5 180 1 0 16.5 16.5L10.5 10.5"></path></symbol><symbol id="topic-task-marker-4" width="20" height="20" viewBox="-1 -1 22 22"><circle cx="10.5" cy="10.5" r="10" stroke="none" fill="#093" fill-opacity="0.8"></circle><path stroke="none" fill="#fff" fill-opacity="0.8" d="M10.5 10.5V2A8.5 8.5 180 0 0 10.5 19L10.5 10.5"></path></symbol><symbol id="topic-task-marker-5" width="20" height="20" viewBox="-1 -1 22 22"><circle cx="10.5" cy="10.5" r="10" stroke="none" fill="#093" fill-opacity="0.8"></circle><path stroke="none" fill="#fff" fill-opacity="0.8" d="M10.5 10.5V2A8.5 8.5 180 0 0 4.5 16.5L10.5 10.5"></path></symbol><symbol id="topic-task-marker-6" width="20" height="20" viewBox="-1 -1 22 22"><circle cx="10.5" cy="10.5" r="10" stroke="none" fill="#093" fill-opacity="0.8"></circle><path stroke="none" fill="#fff" fill-opacity="0.8" d="M10.5 10.5V2A8.5 8.5 180 0 0 2 10.5L10.5 10.5"></path></symbol><symbol id="topic-task-marker-7" width="20" height="20" viewBox="-1 -1 22 22"><circle cx="10.5" cy="10.5" r="10" stroke="none" fill="#093" fill-opacity="0.8"></circle><path stroke="none" fill="#fff" fill-opacity="0.8" d="M10.5 10.5V2A8.5 8.5 180 0 0 4.5 4.5L10.5 10.5"></path></symbol><symbol id="topic-task-marker-8" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#093" fill-opacity="0.8" stroke="#fff" stroke-width="2" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M15 6L10 13L6 9"></path></symbol><symbol id="topic-task-marker-unknown" width="20" height="20" viewBox="-1 -1 22 22"><path fill="#fff" fill-opacity="0.8" stroke="#093" stroke-width="1" stroke-opacity="0.8" d="M1 10A9 9 0 1 1 20 10A9 9 0 1 1 1 10M7 8A3.5 3.5 0 1 1 10.5 10.5V13M10.5 14V16M9.5 15H11.5"></path></symbol></defs><script eblock-script=""><![CDATA[        declarer.getExtensionInfo = function () {            return {                name: "task-marker"            };        };        declarer.onRendering = function (_data) {            if (_data && ("task-marker" in _data)) {                let task = Number(_data["task-marker"]);                if ((task >= 0) && (task <= 8)) {                    this.$assignedNode.setAttribute("href", "#topic-task-marker-" + task);                } else {                    this.$assignedNode.setAttribute("href", "#topic-task-marker-unknown");                }            } else {                this.unmount();            }        };    ]]><\/script><use eblock-template="" season-topic-content-type="task-marker" ebevent-rendering="onRendering" width="22" height="22"/></svg>'),wt('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style eblock-predefined="" d-tag="topic-href">.season-topic-href{fill:rgba(255,255,255,.05);stroke:none}.season-topic-href>use{fill:var(--topic-font-color)}.season-topic-href:hover{fill:var(--topic-ui-focus-color);fill-opacity:.3;stroke:none}.season-topic-href:hover>use{fill-opacity:1}</style><defs eblock-predefined="" d-tag="topic-href"><symbol id="topic-href-link-icon" width="20" height="20" viewBox="0 0 20 20"><path d="M 19,7.115 13.63,2.5 v 2.692 c -8.226,0.08 -8.339,8.658 -8.339,8.658 0,0 1.746,-4.562 8.339,-4.619 v 2.499 z"></path><path d="M 5 3.625 C 3.892 3.625 3 4.517 3 5.625 L 3 14.62 C 3 15.73 3.892 16.62 5 16.62 L 15.01 16.62 C 16.12 16.62 17.01 15.73 17.01 14.62 L 17.01 10.33 L 15.81 11.35 L 15.81 13.76 C 15.81 14.68 15.07 15.42 14.15 15.42 L 5.857 15.42 C 4.939 15.42 4.199 14.68 4.199 13.76 L 4.199 6.482 C 4.199 5.564 4.939 4.824 5.857 4.824 L 12.49 4.824 L 12.5 3.625 L 5 3.625 z"></path></symbol><symbol id="topic-href-resource-icon" width="20" height="20" viewBox="0 0 20 20"><path d="m 4.407,16.36 c -1.535,-1.53 -1.536,-4.02 -0,-5.55 L 11.87,3.344 c 1.11,-1.125 2.97,-1.125 4.09,0 1.12,1.126 1.12,2.968 0,4.094 L 9.086,14.31 c -0.729,0.73 -1.902,0.73 -2.632,0 -0.731,-0.72 -0.729,-1.9 0,-2.63 L 9.97,8.17 10.84,9.045 7.332,12.56 c -0.245,0.25 -0.247,0.63 0,0.87 0.248,0.25 0.63,0.25 0.876,0 L 15.08,6.56 c 0.65,-0.643 0.65,-1.696 0,-2.34 -0.65,-0.642 -1.7,-0.642 -2.34,0 l -7.457,7.47 c -1.05,1.04 -1.047,2.73 0,3.79 1.052,1.05 2.746,1.05 3.797,0 l 3.08,-3.08 0.88,0.87 -3.08,3.08 c -1.537,1.54 -4.022,1.53 -5.557,0 z"></path></symbol></defs><script eblock-script=""><![CDATA[        declarer.getExtensionInfo = function () {            return {                name: "href"            };        };        declarer.onRendering = function (_data, _, _topic) {            if (!_data || !_data.href) {                this.unmount();            } else {                let type = _topic.env.getHRefType(_data.href);                let node = this.$assignedNode.querySelector(":scope > use");                node && node.setAttribute("href", (type === "link") ? "#topic-href-link-icon" : "#topic-href-resource-icon");            }        };    ]]><\/script><g eblock-template="" season-topic-content-type="href" class="season-topic-href" ebevent-rendering="onRendering"><rect width="20" height="20" rx="3" ry="3"/><use href="#topic-href-link-icon" width="20" height="20"/></g></svg>'),wt('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style eblock-predefined="" d-tag="topic-labels">.season-topic-label>rect{fill:rgba(255,255,255,.7);stroke-width:.5px;stroke-dasharray:2;stroke:#666;rx: 5px;ry: 5px;}.season-topic-label>text{alignment-baseline:before-edge;dominant-baseline:text-before-edge;font-size:.8em;fill:#666}</style><script eblock-script=""><![CDATA[        declarer.getExtensionInfo = function () {            return {                name: "labels"            };        };        declarer.onRendering = function (_data, _, _topic) {            const labels = (_data && _data.labels);            if (!labels || !_data.labels.length) {                this.unmount();            } else {                const renderedLabels = [];                this.$assignedNode.querySelectorAll(".season-topic-label").forEach(item => {                    let labelVal = item.getAttribute("d-label");                    if (!labels.includes(labelVal)) {                        item.remove();                    } else {                        renderedLabels.push(labelVal);                    }                });                labels.forEach(item => {                    if (!renderedLabels.includes(item)) {                        let gNode = document.createElementNS("http://www.w3.org/2000/svg", "g");                        gNode.setAttribute("class", "season-topic-label");                        gNode.innerHTML = \'<text transform="translate(2, 2)">\' + item + \'</text>\';                        this.$assignedNode.appendChild(gNode);                        let box = gNode.getBBox();                        gNode.insertAdjacentHTML("afterbegin", \'<rect x="0" y="0" width="\' + String(parseInt(box.width) + 4) + \'" height="\' + String(parseInt(box.height) + 4) + \'" />\');                    }                });                let x = 0;                this.$assignedNode.querySelectorAll(".season-topic-label").forEach(item => {                    item.setAttribute("transform", "translate(" + x + ",0)");                    let box = item.getBBox();                    x += box.width + 2;                });            }        };    ]]><\/script><g eblock-template="" season-topic-content-type="labels" class="season-topic-labels" ebevent-rendering="onRendering"></g></svg>'),wt('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style eblock-predefined="" d-tag="topic-notes">.season-topic-notes{fill:rgba(255,255,255,.05);stroke:none}.season-topic-notes>use{fill:rgba(255,255,255,.3);stroke-width:1.5px;stroke:#111}.season-topic-notes:hover>use{fill:#fff;stroke-width:1.5px;stroke:#000}</style><script eblock-script=""><![CDATA[        declarer.getExtensionInfo = function () {            return {                name: "notes"            };        };        declarer.onRendering = function (_data, _, _topic) {            if (!_data || !_data.notes) {                this.unmount();            }        };    ]]><\/script><g eblock-template="" season-topic-content-type="notes" class="season-topic-notes" ebevent-rendering="onRendering"><use href="#season-topic-predefine-image-nodepad" width="20" height="20"/></g></svg>')];function kt(e,t,n,r){var i=e.getAttribute("mmap-layout-background"),o=i&&(r[i]||Tt.backgroundGenerator[i]);if("function"==typeof o){var a=e.getBBox(),s=a.x>=0?0:a.x,c=a.y>=0?0:a.y,u=a.width+2*Math.abs(a.x),l=a.height+2*Math.abs(a.y);(t=o.call(this,t,{left:s,top:c,width:u,height:l},e,n,r))&&(t.classList.add("mmap-layout-background"),e.insertAdjacentElement("afterbegin",t))}}function At(e,t,n){var r=this;e.querySelectorAll(":scope > *").forEach((function(e){return St.call(r,e,t,n)}))}function Et(e,t){var n,r,i=(n=e.getAttribute("mmap-layout-max-width"),r=t.maxWidth,Math.min(Number(n)||Number.MAX_VALUE,Number(r)||Number.MAX_VALUE)),o=Number(e.getAttribute("mmap-layout-margin")||void 0);isNaN(o)&&(o=Number(t.margin)||0);var a=Number(e.getAttribute("mmap-layout-padding")||void 0);return isNaN(a)&&(a=Number(t.padding)||0),{maxWidth:i,margin:o,padding:a}}function St(e,t,n){t||(t={});var r=e.querySelector(":scope > .mmap-layout-background");r&&r.remove();var i=e.getAttribute("mmap-layout"),o=Tt.layout[i]||At;"function"==typeof o&&o.call(this,e,t,n),kt.call(this,e,r,t,n)}var _t=new WeakMap;function Tt(e,t,n){var r,i=this;if(!(this instanceof Tt))return D(Tt,Array.prototype.slice.call(arguments));if(j(e instanceof SVGGraphicsElement,Error,"_parentNode must be an instance of SVGGraphicsElement"),j(t,Error,"_content must be an instance of Node or a XML snippet of the content"),n||(n={}),n.singletonStamp){var o=e.querySelector(':scope > [mmap-singleton="'.concat(n.singletonStamp,'"]')),a=o&&_t.get(o);if(a instanceof Tt){if(void 0===n.singletonMutex||String(n.singletonMutex)===o.getAttribute("mmap-singleton-mutex"))return a;a.close()}}if(t instanceof Node?r=t:(r=document.createElementNS("http://www.w3.org/2000/svg","g")).insertAdjacentHTML("afterbegin",t),n.singletonStamp&&(r.setAttribute("mmap-singleton",n.singletonStamp),void 0!==n.singletonMutex&&r.setAttribute("mmap-singleton-mutex",n.singletonMutex)),e.appendChild(r),_t.set(r,this),n.rootAttrs)for(var s in n.rootAttrs)r.setAttribute(s,n.rootAttrs[s]);var c=function(){r.remove()}.bind(this),u=function(){e.appendChild(r),"relayout"===r.getAttribute("mmap-bind-hide-in-render")&&this.relayout()}.bind(this),l=function(e){var t=this;try{e.composedPath().forEach((function(i){var o=i.getAttribute("mmap-event-click"),a=o&&n[o];if("function"==typeof a)throw a.call(t,e,i,n,o),e.preventDefault(),e.stopPropagation(),null;if(i===r)throw e.preventDefault(),e.stopPropagation(),null}))}catch(e){e&&console.warn("Fail in processing click event in MindmapAddinPanel",e)}}.bind(this),f=function(e){var t=this;try{e.composedPath().forEach((function(i){var o=i.getAttribute("mmap-event-dblclick"),a=o&&n[o];if("function"==typeof a)throw a.call(t,e,i,n,o),e.preventDefault(),e.stopPropagation(),null;if(i===r)throw e.preventDefault(),e.stopPropagation(),null}))}catch(e){e&&console.warn("Fail in processing dblclick event in MindmapAddinPanel",e)}}.bind(this),p=function(e){var t=this;try{e.composedPath().forEach((function(i){var o=i.getAttribute("mmap-event-keydown"),a=o&&n[o];if("function"==typeof a)throw a.call(t,e,i,n,o),null;if(i===r)throw"input"!==String(e.target.nodeName).toLowerCase()&&!Boolean(e.target.getAttribute("contenteditable"))&&e.preventDefault(),null}))}catch(e){e&&console.warn("Fail in processing dblclick event in MindmapAddinPanel",e)}finally{e.stopPropagation()}}.bind(this),h=function(e){var t=e.detail,n=t&&t.triggerContentType,i=r.getAttribute("topic-event-trigger"===e.type?"mmap-bind-filter-trigger":"mmap-bind-filter-edit");(i?n!==i:n&&"title"!==n)&&this.close()}.bind(this);function d(e){e.stopPropagation()}function v(e){e.stopPropagation()}var m=function(){"function"==typeof n.onClose&&n.onClose.call(this,n),n.env&&(n.env.removeEventListener("topic-event-cancel-edit",m),n.env.removeEventListener("topic-event-before-render",c),n.env.removeEventListener("topic-event-after-render",u),n.env.removeEventListener("topic-event-trigger",h),n.env.removeEventListener("topic-event-edit",h)),r.removeEventListener("click",l),r.removeEventListener("dblclick",f),r.removeEventListener("mousedown",d),r.removeEventListener("mouseup",v),r.removeEventListener("keydown",p);var t=r.ownerSVGElement;t?t.focus():e.focus(),r.remove()}.bind(this);$(this,{rootNode:r,relayout:function(){"function"==typeof n.onBeforeLayout&&n.onBeforeLayout.call(i,n),St.call(i,r,void 0,n),"function"==typeof n.onAfterLayout&&n.onAfterLayout.call(i,n)},close:m}),r.addEventListener("click",l),r.addEventListener("dblclick",f),r.addEventListener("mousedown",d),r.addEventListener("mouseup",v),r.addEventListener("keydown",p),n.env&&(r.hasAttribute("mmap-bind-cancel-edit")&&n.env.addEventListener("topic-event-cancel-edit",m),r.hasAttribute("mmap-bind-hide-in-render")&&(n.env.addEventListener("topic-event-before-render",c),n.env.addEventListener("topic-event-after-render",u)),r.hasAttribute("mmap-bind-filter-trigger")&&n.env.addEventListener("topic-event-trigger",h),r.hasAttribute("mmap-bind-filter-edit")&&n.env.addEventListener("topic-event-edit",h)),"function"==typeof n.onInitialize&&n.onInitialize.call(this,n),this.relayout()}var Ct="fill:#fff;stroke-width:0.5px;stroke:#ccc;filter:drop-shadow(0px 3px 5px #aaa);";function Lt(e,t){if(t.attrs)for(var n in t.attrs)e.setAttribute(n,t.attrs[n]);if(t.style)for(var r in t.style)e.style[r]=t.style[r]}function Nt(e){return new Promise(((t,n)=>{try{const r=document.createElement("input");r.type="file",e&&(r.accept=e),r.addEventListener("change",(()=>{const e=r.files;e.length>0?t(e[0]):n(0)})),r.click()}catch(e){n(e)}}))}$(Tt,{layout:$({},{line:function(e,t,n){var r=this,i=Et(e,t),o=i.maxWidth,a=i.margin,s=i.padding,c=s,u=s,l=0;e.querySelectorAll(":scope > *").forEach((function(e){if(St.call(r,e,i,n),e instanceof SVGGraphicsElement){var t=e.getBBox(),f=t.width,p=t.height;if(f>0){var h=e.getAttribute("predefine-transform");c+f+s>o?(c=s,u+=l+a,l=p):l<p&&(l=p),e.setAttribute("transform",h?"translate(".concat(c,",").concat(u,"),").concat(h):"translate(".concat(c,",").concat(u,")")),c+=f+a}}}))},row:function(e,t,n){var r=this,i=Et(e,t),o=i.margin,a=i.padding,s=[],c=a,u=a;e.querySelectorAll(":scope > *").forEach((function(e){if(St.call(r,e,i,n),e instanceof SVGGraphicsElement){var t=e.getBBox(),a=t.width,l=t.height;if(a>0&&l>0){if("right"===e.getAttribute("mmap-layout-align"))s.push({y:c,node:e,width:a});else{var f=e.getAttribute("predefine-transform");e.setAttribute("transform",f?"translate(".concat(u,",").concat(c,"),").concat(f):"translate(".concat(u,",").concat(c,")"))}c+=l+o}}}));var l=e.getBBox().width;s.forEach((function(e){var t=e.node.getAttribute("predefine-transform");e.node.setAttribute("transform",t?"translate(".concat(l-e.width,",").concat(e.y,"),").concat(t):"translate(".concat(l-e.width,",").concat(e.y,")"))}))}}),InstanceMap:_t,backgroundGenerator:$({},{dialogBubble:function(e,t,n,r,i,o){var a=t.left,s=t.top,c=t.width,u=t.height;return e instanceof SVGPathElement||(e&&e.remove(),e=document.createElementNS("http://www.w3.org/2000/svg","path")),e&&(o||(o={}),e.setAttribute("d",function(e,t,n,r,i,o,a,s,c){We.includes(c)||(c="top");var u=[];if(u.push("M".concat(e+i," ").concat(t)),"top"===c){var l=Ve(n,i,s,a);l[0]>0&&u.push("h".concat(l[0])),u.push("l".concat(a," ").concat(0-o,"l").concat(a," ").concat(o)),l[1]>0&&u.push("h".concat(l[1]))}else u.push("h".concat(n-2*i));if(u.push("a".concat(i," ").concat(i," 0 0 1 ").concat(i," ").concat(i)),"right"===c){var f=Ve(r,i,s,a);f[0]>0&&u.push("v".concat(f[0])),u.push("l".concat(o," ").concat(a,"l").concat(0-o," ").concat(a)),f[1]>0&&u.push("v".concat(f[1]))}else u.push("v".concat(r-2*i));if(u.push("a".concat(i," ").concat(i," 0 0 1 ").concat(0-i," ").concat(i)),"bottom"===c){var p=Ve(n,i,s,a);p[1]>0&&u.push("h".concat(0-p[1])),u.push("l".concat(0-a," ").concat(o,"l").concat(0-a," ").concat(0-o)),p[0]>0&&u.push("h".concat(0-p[0]))}else u.push("h".concat(0-n+2*i));if(u.push("a".concat(i," ").concat(i," 0 0 1 ").concat(0-i," ").concat(0-i)),"left"===c){var h=Ve(r,i,s,a);h[1]>0&&u.push("v".concat(0-h[1])),u.push("l".concat(0-o," ").concat(0-a,"l").concat(o," ").concat(0-a)),h[0]>0&&u.push("v".concat(0-h[0]))}else u.push("v".concat(0-r+2*i));return u.push("a".concat(i," ").concat(i," 0 0 1 ").concat(i," ").concat(0-i,"z")),u.join("")}(a,s,c,u,Number(o.cornerRadius)||7,Number(o.raiseHeight)||10,Number(o.raiseBase)||10,Number(o.raiseOffset)||0,o.raiseEdge)),e.setAttribute("style",Ct),Lt(e,o)),e},roundRect:function(e,t,n,r,i,o){var a=t.left,s=t.top,c=t.width,u=t.height;return e instanceof SVGRectElement||(e&&e.remove(),e=document.createElementNS("http://www.w3.org/2000/svg","rect")),e&&(e.setAttribute("style",Ct),e.setAttribute("rx",Number(o&&o.cornerRadius)||7),e.setAttribute("ry",Number(o&&o.cornerRadius)||7),e.setAttribute("x",a),e.setAttribute("y",s),e.setAttribute("width",c),e.setAttribute("height",u),Lt(e,o)),e},auto:function(e){function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n,r,i,o){var a=t.left,s=t.top,c=t.width,u=t.height;if(e instanceof SVGRectElement||(e&&e.remove(),e=document.createElementNS("http://www.w3.org/2000/svg","rect")),e){o||(o={});var l=n.hasAttribute("d-auto-background")&&JSON.parse("{".concat(String(n.getAttribute(d-auto-background)).replace("'",'"'),"}"));l&&(o=Object.assign(l,o)),e.setAttribute("x",a),e.setAttribute("y",s),e.setAttribute("width",c),e.setAttribute("height",u),Lt(e,o)}return e}))})});var Mt={rootAttrs:{"mmap-layout":"line","mmap-layout-margin":"0","mmap-layout-padding":"5","mmap-layout-background":"dialogBubble","mmap-bind-cancel-edit":"","mmap-bind-hide-in-render":"relayout","mmap-bind-filter-edit":"href","mmap-bind-filter-trigger":"href"},singletonStamp:"topic-href-editor",onInitialize:function(e){var t=this.inputNode=this.rootNode.querySelector(".season-topic-href-editor");t&&e.topic instanceof Le&&(t.value=e.topic.data.href||"",t.select())},onAfterLayout:function(e){var t=this.rootNode.getBBox(),n=e.topic.getGraphicRect();this.rootNode.setAttribute("transform","translate(".concat(n.x+(n.width-t.width)/2,", ").concat(n.y+n.height+11,")")),Le.showNodeInSvgView(this.rootNode,this.rootNode.ownerSVGElement),this.inputNode.focus()},browser:function(e,t,n,r){var i=this;return O(P.mark((function e(){var t,r;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nt();case 3:(t=e.sent)instanceof Blob&&(r={name:(n.env.config.defaultResourceAttachmentPrefix||"")+t.name,resource:t},n.env.fireEvent("topic-event-update-attachment",r),r.href&&(i.inputNode.value=r.href),i.close()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.env.warn("Fail in pickup file as the attachment of the topic",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},delete:function(e,t,n,r){this.inputNode.value="",this.close()},onClose:function(e){var t=e.topic;if(t instanceof Le){var n=String(this.inputNode.value).trim();n!==t.data.href&&(t.changeData("href",n||void 0),t.queueAction((function(){return t.render()})))}}};function It(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=O(P.mark((function e(t){var n,r,i,o,a,s,c,u,l;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nt(".jpg,.jpeg,.png,.gif,.ico,.bmp,.svg");case 2:if(!((n=e.sent)instanceof Blob)){e.next=24;break}if(r={name:(t.env.config.defaultResourceAttachmentPrefix||"")+n.name,resource:n},t.env.fireEvent("topic-event-update-attachment",r),!r.href){e.next=24;break}if(!(i=t.data.image)){e.next=12;break}t.changeData("image",{src:r.href,width:i.width,height:i.height}),e.next=23;break;case 12:return o=t.env.config,a=t.getRect().width-2*o.padding,s=Math.max(a,Number(o.suitableTitleLineWidth)||X.DefaultConfig.suitableTitleLineWidth),(c=new Image).src=URL.createObjectURL(n),e.next=19,c.decode();case 19:URL.revokeObjectURL(c.src),u=c.width,l=c.height,u>s&&(l=l/u*s,u=s),t.changeData("image",{src:r.href,width:u,height:l});case 23:t.queueAction((function(){return t.render()}));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rt(){return(Rt=O(P.mark((function e(t){var n;return P.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.force){e.next=5;break}return j((n=t.eventTarget)instanceof Le,M,-1,"Cannot invoke the image edit action without an instance of Topic"),e.next=5,It(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e,t){if(e&&t instanceof Node){var n=document.createElementNS("http://www.w3.org/2000/svg","g");n.setAttribute("class","season-topic-label-edit-item"),n.setAttribute("d-label",e),n.innerHTML="<text>".concat(e,"</text>"),t.appendChild(n);var r=n.getBBox(),i=r.width,o=r.height;n.insertAdjacentHTML("afterbegin",'<rect x="0" y="0" width="'.concat(i+o,'" height="').concat(o,'" />')),n.insertAdjacentHTML("beforeend",'<g class="season-topic-label-edit-delete" transform="translate('.concat(i,',0)" mmap-event-click="delete">\n            <rect x="0" y="0"  width="').concat(o,'" height="').concat(o,'" />\n            <use href="#season-topic-predefine-image-cross" width="').concat(o,'" height="').concat(o,'" />\n        </g>'))}}var zt={rootAttrs:{"mmap-layout":"row","mmap-layout-margin":"5","mmap-layout-padding":"10","mmap-layout-background":"dialogBubble","mmap-bind-cancel-edit":"","mmap-bind-hide-in-render":"relayout","mmap-bind-filter-edit":"labels","mmap-bind-filter-trigger":"labels"},singletonStamp:"topic-labels-editor",onInitialize:function(e){var t=e.topic instanceof Le&&e.topic.data.labels;t=Array.from(t instanceof Array?t:[]),this.labels=t;var n=this.rootNode.querySelector(".season-topic-labels-edit-list");t.forEach((function(e){return Dt(e,n)}))},onAfterLayout:function(e){var t=this.rootNode.getBBox(),n=e.topic.getGraphicRect();this.rootNode.setAttribute("transform","translate(".concat(n.x+(n.width-t.width)/2,", ").concat(n.y+n.height+11,")")),Le.showNodeInSvgView(this.rootNode,this.rootNode.ownerSVGElement)},onInputKeydown:function(e,t,n){var r=e.target;if(r){var i=String(e.key).toLowerCase();if("enter"===i){i=void 0;var o=String(r.value).trim();this.labels.includes(o)||(r.value="",this.labels.push(o),Dt(o,this.rootNode.querySelector(".season-topic-labels-edit-list")),this.relayout())}else"tab"===i?i=void 0:"escape"===i&&(i=void 0,r.value="");i||(e.preventDefault(),e.stopPropagation())}},onClose:function(e){var t=e.topic;if(t instanceof Le){var n=this.labels;String(n)!==String(t.data.labels)&&(t.changeData("labels",n.length>0?n:void 0),t.queueAction((function(){return t.render()})))}},delete:function(e,t,n){for(;t&&!t.hasAttribute("d-label");)(t=t.parentNode)===this.rootNode&&(t=void 0);if(t&&this.labels){var r=t.getAttribute("d-label"),i=this.labels.indexOf(r);i>=0&&this.labels.splice(i,1),t.remove(),this.relayout()}}},Bt="<p><br /></p>",Pt=[{key:"bold",tag:"b"},{key:"underline",tag:"u"},{key:"italic",tag:"i"},{key:"code",tag:"code"},{key:"color",tag:"span",formatter:function(e){return' style="color:'.concat(e.color,';"')}}],jt={"<":"&lt;",">":"&gt;"};function Ft(e){return jt[e]||"&nbsp;"}var $t={bullet:{prefix:"<ul>",tag:"li",suffix:"</ul>"},ordered:{prefix:"<ol>",tag:"li",suffix:"</ol>"}};function Ut(e,t){var n,r=[],i=[];r.push(i),t.ops instanceof Array&&t.ops.forEach((function(e){if(e){var t=e.attributes;String(e.insert||"").split("\n").forEach((function(e,n){var o,a,s,c;n>0&&(i.$type=t&&t.list,r.push(i=[])),e&&(o=i,a=e,(s=t)&&(c=[],Pt.forEach((function(e){if(s[e.key]){var t=e.tag,n=e.class,r=e.style,i=e.formatter;o.push("<".concat(t).concat(n?' class="'.concat(n,'"'):"").concat(r?' style="'.concat(r,'"'):"").concat(i?i(s):"",">")),c.unshift("</".concat(t,">"))}}))),o.push(a.replace(/[\s<>]/gi,Ft)),c&&c.length>0&&o.push.apply(o,c))}))}})),0===i.length&&r.pop(),e.innerHTML=r.map((function(e){var t=$t[e.$type],r=[];return t!==n&&(n&&r.push(n.suffix),t&&r.push(t.prefix)),n=t,r.push("<".concat(t?t.tag:"p",">")),r.push(e.join("")||"<br />"),r.push("</".concat(t?t.tag:"p",">")),r.join("")})).join("")||Bt}var qt=[{key:"fo:font-weight",value:"bold",tag:"b"},{key:"fo:font-style",value:"italic",tag:"i"},{key:"fo:text-decoration",value:"underline",tag:"u"}];function Ht(e,t){var n=[];t.paragraphs instanceof Array&&t.paragraphs.forEach((function(e){n.push("<p>"),e.spans instanceof Array&&e.spans.forEach((function(e){return function(e,t){if(t.text){var n,r=t.style&&t.style.properties;r&&(n=[],qt.forEach((function(t){if(r[t.key]===t.value){var i=t.tag,o=t.class,a=t.style;e.push("<".concat(i).concat(o?' class="'.concat(o,'"'):"").concat(a?' style="'.concat(a,'"'):"",">")),n.unshift("</".concat(i,">"))}}))),e.push(t.text.replace(/\s/gi,"&nbsp;")),n&&n.length>0&&e.push.apply(e,n)}else e.push("<br />")}(n,e)})),n.push("</p>")})),e.innerHTML=n.join("")||Bt}function Wt(e,t){e instanceof Node&&(t||(t={}),t.ops?Ut(e,t.ops):t.html&&t.html.content?Ht(e,t.html.content):t.plain?function(e,t){e.innerHTML=t.content?"<p>".concat(String(t.content).split("\n").map((function(e){return e.replace(/\s/gi,"&nbsp;")})).join("</p><p>"),"</p>"):Bt}(e,t.plain):e.innerHTML=Bt)}function Vt(e,t,n,r){var i=t||[];return e&&(e.normalize(),e.childNodes.forEach((function(t){if(t instanceof HTMLBRElement)e.childElementCount>1&&i.push(n=[]);else if(t.nodeType===Node.TEXT_NODE)n||i.push(n=[]),n.push({attr:r,text:t.textContent});else{if(t.childNodes.length<=0)return;if(t instanceof HTMLParagraphElement)i.push(n=[]),n=Vt(t,i,n,r).paragraph;else if(t instanceof HTMLLIElement)i.push(n=[]),n.$type=e instanceof HTMLUListElement?"bullet":"ordered",Vt(t,i,n,r).paragraph,n=void 0;else if(t instanceof HTMLUListElement||t instanceof HTMLOListElement)n=Vt(t,i,void 0,r).paragraph;else if(t instanceof HTMLSpanElement){var o=Object.assign({},r),a=t.style;a.color&&(o.color=a.color),n=Vt(t,i,n,o).paragraph}else if(t instanceof HTMLElement){var s=String(t.nodeName).toLowerCase();if("code"===s){var c=Object.assign({},r);c.code=!0,n=Vt(t,i,n,c).paragraph}else if("b"===s){var u=Object.assign({},r);u.bold=!0,n=Vt(t,i,n,u).paragraph}else if("i"===s){var l=Object.assign({},r);l.italic=!0,n=Vt(t,i,n,l).paragraph}else if("u"===s){var f=Object.assign({},r);f.underline=!0,n=Vt(t,i,n,f).paragraph}else n=Vt(t,i,n,Object.assign({},r)).paragraph}}}))),{paragraphSet:i,paragraph:n}}function Gt(e){var t=[];return e.forEach((function(e){var n=[];t.push({spans:n}),e instanceof Array&&e.forEach((function(e){if(e.attr){var t={},r={type:"text",properties:t};e.attr.bold&&(t["fo:font-weight"]="bold"),e.attr.italic&&(t["fo:font-style"]="italic"),e.attr.underline&&(t["fo:text-decoration"]="underline"),n.push({style:r,text:e.text})}else n.push({text:e.text})}))})),t}function Yt(e){var t,n,r,i=Vt(e).paragraphSet;return{plain:{content:e.textContent},ops:{ops:(t=i,n=[],r=[],t.forEach((function(e){e instanceof Array&&(e.forEach((function(e){e.attr?(r.length>0&&n.push({insert:r.join("")}),r=[],n.push({attributes:e.attr,insert:e.text||""})):r.push(e.text||"")})),e.$type?(r.length>0&&n.push({insert:r.join("")}),r=[],n.push({attributes:{list:e.$type},insert:"\n"})):r.push("\n"))})),r.length>0&&n.push({insert:r.join("")}),n)},html:{content:{paragraphs:Gt(i)}}}}var Zt=Symbol("season.topic.notes.normalize"),Xt={p:"p",b:"b",u:"u",i:"i",ul:"ul",ol:"ol",li:"li",br:"br",h1:"p",h2:"p",h3:"p",h4:"p",h5:"p",h6:"p",div:"p",code:"code"};function Kt(e){if(!(e instanceof Node)||e[Zt])return e;switch(e.nodeType){case Node.ELEMENT_NODE:e.normalize();var t,n=Xt[String(e.nodeName).toLocaleLowerCase()];return t="string"==typeof n?document.createElementNS(e.namespaceURI,n):"function"==typeof n?n(e):function(e){var t;if(e.getAttribute("style")){var n=e.style.color;n?(t=document.createElement("span"),n&&(t.style.color=n)):e.childElementCount&&(t=document.createElement("span"))}else e.childElementCount&&(t=document.createElement("span"));return t||document.createTextNode(e.textContent)}(e),t&&(t[Zt]=!0,t instanceof Element&&e.childNodes.forEach((function(e){(e=Kt(e))&&t.appendChild(e)}))),t.normalize(),(t.childNodes.length>0||t instanceof HTMLBRElement||t.nodeType===Node.TEXT_NODE)&&t;case Node.TEXT_NODE:var r=e.cloneNode(!0);return r[Zt]=!0,r;default:return null}}function Jt(e){try{var t=e.clipboardData||window.clipboardData;if(t){var n=t.getData("text/html");if(n){var r=(new DOMParser).parseFromString(n,"text/html");if(r&&!r.querySelector("parsererror")){var i=[];r.body.childNodes.forEach((function(e){var t=Kt(e);t instanceof Node&&i.push(t.nodeType===Node.TEXT_NODE?t.wholeText:t.outerHTML)})),document.execCommand("insertHTML",!1,i.join(""))}e.preventDefault()}}}catch(t){e.preventDefault(),console.warn("Fail in filte the paste content for the note's editor. The action is cancelled.",t)}}var Qt={rootAttrs:{"mmap-layout":"row","mmap-layout-margin":"5","mmap-layout-padding":"10","mmap-layout-background":"dialogBubble","mmap-bind-cancel-edit":"","mmap-bind-hide-in-render":"relayout","mmap-bind-filter-edit":"notes","mmap-bind-filter-trigger":"notes"},singletonStamp:"topic-notes-shower",onInitialize:function(e){var t=this.editorNode=this.rootNode.querySelector(".season-topic-notes-editor-box");t&&(t.addEventListener("paste",this.onPaste=Jt.bind(this)),e.topic instanceof Le&&Wt(t,e.topic.data.notes))},onAfterLayout:function(e){var t=this.rootNode.getBBox(),n=e.topic.getGraphicRect();this.rootNode.setAttribute("transform","translate(".concat(n.x+(n.width-t.width)/2,", ").concat(n.y+n.height+11,")")),Le.showNodeInSvgView(this.rootNode,this.rootNode.ownerSVGElement)},setBold:function(e,t,n){document.execCommand("bold",!1)},setItalic:function(e,t,n){document.execCommand("italic",!1)},setUnderline:function(e,t,n){document.execCommand("underline",!1)},setUnorderList:function(e,t,n){document.execCommand("insertUnorderedList",!1)},setOrderList:function(e,t,n){document.execCommand("insertOrderedList",!1)},delete:function(e,t,n){this.editorNode&&(this.editorNode.innerHTML=Bt),this.close()},onClose:function(e){if(this.editorNode){this.editorNode.removeEventListener("paste",this.onPaste);var t=Yt(this.editorNode);t&&!String(t.plain.content).trim()&&(t=void 0);var n=e.topic;if(n instanceof Le){var r=n.data.notes;n.changeData("notes",t),(r&&!0)^(t&&!0)&&n.queueAction((function(){return n.render()}))}}}};function en(e){var t=e.eventTarget;t instanceof Le&&Tt(t.$assignedNode.ownerSVGElement,'<style>.season-topic-notes-editor-button>rect{width:20px;height:20px;x: 0px;y: 0px;rx: 5px;ry: 5px;fill:rgba(255,255,255,.1);stroke:none}.season-topic-notes-editor-button>use{fill:#000;stroke:none}.season-topic-notes-editor-button>path{fill:#000;stroke:none}.season-topic-notes-editor-button:hover>use{fill:var(--topic-ui-hover-front-color);stroke:none}.season-topic-notes-editor-button:hover>path{fill:var(--topic-ui-hover-front-color);stroke:none}.season-topic-notes-editor-button:hover>rect{fill:var(--topic-ui-hover-back-color)}.season-topic-notes-editor-delete:hover>rect{fill:var(--topic-ui-danger-color)}.season-topic-notes-editor-toolbar>g>rect{rx: 5px;ry: 5px;width:20px;height:20px;x: 0px;y: 0px;}</style><g mmap-layout="line" mmap-layout-margin="5" mmap-layout-padding="0" class="season-topic-notes-editor-toolbar"><g class="season-topic-svg-button" mmap-event-click="setBold"><rect/><use href="#season-topic-predefine-image-bold" width="20" height="20"/></g><g class="season-topic-svg-button" mmap-event-click="setItalic"><rect/><use href="#season-topic-predefine-image-italic" width="20" height="20"/></g><g class="season-topic-svg-button" mmap-event-click="setUnderline"><rect/><use href="#season-topic-predefine-image-underline" width="20" height="20"/></g><g class="season-topic-svg-button" mmap-event-click="setUnorderList"><rect/><use href="#season-topic-predefine-image-unorder-list" width="20" height="20"/></g><g class="season-topic-svg-button" mmap-event-click="setOrderList"><rect/><use href="#season-topic-predefine-image-order-list" width="20" height="20"/></g><rect width="60" height="20" fill="rgba(255,255,255,0.05)" stroke="none"/><g class="season-topic-svg-button" d-svg-button-danger="" mmap-event-click="delete"><rect/><use href="#season-topic-predefine-image-delete" width="20" height="20"/></g></g><foreignObject width="210" height="170"><style>.season-topic-notes-editor-box{overflow:scroll;border:1px solid #666;box-sizing:border-box;width:100%;height:100%;outline:0;font-size:12px;word-break:break-all}.season-topic-notes-editor-box p{margin:0}.season-topic-notes-editor-box ol,.season-topic-notes-editor-box ul{margin:0;padding-left:2em}.season-topic-notes-editor-box code{background-color:#ddd;color:#ff8c00}</style><div class="season-topic-notes-editor-box" contenteditable="true"><p><br/></p></div></foreignObject>',Object.assign({topic:t,env:t.env,singletonMutex:t.id},Qt))}var tn={rootAttrs:{"mmap-layout":"row","mmap-layout-margin":"5","mmap-layout-padding":"5","mmap-layout-background":"dialogBubble","mmap-bind-cancel-edit":"","mmap-bind-hide-in-render":"relayout","mmap-bind-filter-edit":"priority","mmap-bind-filter-trigger":"priority"},singletonStamp:"topic-priority-editor",onInitialize:function(e){var t=this.rootNode.querySelector('g[d-priority-value="'.concat(e.topic.data.priority,'"]'));t&&t.setAttribute("d-priority-selected","")},onAfterLayout:function(e){var t=this.rootNode.getBBox(),n=e.topic.getGraphicRect();this.rootNode.setAttribute("transform","translate(".concat(n.x+(n.width-t.width)/2,", ").concat(n.y+n.height+11,")")),Le.showNodeInSvgView(this.rootNode,this.rootNode.ownerSVGElement)},selectPriority:function(e,t,n,r){var i=Number(t.getAttribute("d-priority-value"))||0;n.topic&&i!==n.topic.data.priority&&(n.topic.changeData("priority",i),n.topic.queueAction((function(){return n.topic.render()}))),this.close()},deletePriority:function(e,t,n,r){n.topic&&(n.topic.changeData("priority"),n.topic.queueAction((function(){return n.topic.render()}))),this.close()}},nn={rootAttrs:{"mmap-layout":"row","mmap-layout-margin":"5","mmap-layout-padding":"5","mmap-layout-background":"dialogBubble","mmap-bind-cancel-edit":"","mmap-bind-hide-in-render":"relayout","mmap-bind-filter-edit":"task-marker","mmap-bind-filter-trigger":"task-marker"},singletonStamp:"topic-task-marker-editor",onInitialize:function(e){if(void 0!==e.topic.data["task-marker"]){var t=Number(e.topic.data["task-marker"]),n=this.rootNode.querySelector('g[d-task-marker-value="'.concat(t>=0&&t<=8?t:"unknown",'"]'));n&&n.setAttribute("d-task-marker-selected","")}},onAfterLayout:function(e){var t=this.rootNode.getBBox(),n=e.topic.getGraphicRect();this.rootNode.setAttribute("transform","translate(".concat(n.x+(n.width-t.width)/2,", ").concat(n.y+n.height+11,")")),Le.showNodeInSvgView(this.rootNode,this.rootNode.ownerSVGElement)},selectTaskMarker:function(e,t,n,r){var i=Number(t.getAttribute("d-task-marker-value"));isNaN(i)&&(i="unknown"),n.topic&&i!==n.topic.data["task-marker"]&&(n.topic.changeData("task-marker",i),n.topic.queueAction((function(){return n.topic.render()}))),this.close()},deleteTaskMarker:function(e,t,n,r){n.topic&&(n.topic.changeData("task-marker"),n.topic.queueAction((function(){return n.topic.render()}))),this.close()}},rn={rootAttrs:{"mmap-bind-cancel-edit":"","mmap-bind-hide-in-render":"relayout","mmap-bind-filter-edit":"title","mmap-bind-filter-trigger":"title"},singletonStamp:"topic-title-editor",onInitialize:function(e){this.mainNode=this.rootNode.querySelector("foreignObject"),this.inputNode=this.rootNode.querySelector(".season-topic-title-editor"),this.topic=e.topic,this.onSubmit=function(){var e=this,t=String(this.inputNode.value).trim();t!==this.topic.data.title&&(this.topic.changeData("title",t),this.topic.queueAction((function(){return e.topic.render()})))}.bind(this),this.onBlur=function(){this.onSubmit(),this.close()}.bind(this),this.inputNode.addEventListener("blur",this.onBlur)},onAfterLayout:function(e){var t=this,n=this.topic.env.config,r=Number(n.secondaryPadding)||5;this.inputNode.value=String(this.topic.data.title||"").trim(),this.inputNode.style.padding=this.inputNode.style.borderRadius="".concat(r,"px");var i=this.topic.getGraphicRect(),o=this.topic.getGraphicRect(".season-topic-title"),a=this.topic.$assignedNode.querySelector(".season-topic-image")?o.y-i.y-r:1,s=i.height-a-1;this.mainNode.setAttribute("x",1),this.mainNode.setAttribute("y",a),this.mainNode.setAttribute("width",i.width-2),this.mainNode.setAttribute("height",s);var c=this.topic.$assignedNode.querySelector(":scope > [season-topic-content-group] > .season-topic-title"),u=getComputedStyle(c);u&&(this.inputNode.style.fontSize=u["font-size"],this.inputNode.style.fontWeight=u["font-weight"]),this.topic.queueAction((function(){t.inputNode.focus(),t.inputNode.select()}))},onKeydown:function(e,t,n){var r=String(e.key).toLowerCase();"enter"===r?(r=void 0,this.onSubmit(),this.close()):"tab"===r?r=void 0:"escape"===r&&(r=void 0,this.close()),r||(e.preventDefault(),e.stopPropagation())},onClose:function(){this.inputNode.removeEventListener("blur",this.onBlur)}},on={title:{edit:function(e){var t=e.eventTarget;t instanceof Le&&Tt(t.$assignedNode,'<foreignObject><style>.season-topic-title-editor{outline:0;border:1px solid #777;box-sizing:border-box;width:100%;height:100%;color:#000;background-color:#fff}</style><input xmlns="http://www.w3.org/1999/xhtml" class="season-topic-title-editor" tabindex="0" mmap-event-keydown="onKeydown"></foreignObject>',Object.assign({topic:t,env:t.env},rn))}},image:{edit:function(e){return Rt.apply(this,arguments)},trigger:function(e){return new Promise((function(t,n){try{var r=e.eventTarget;if(r instanceof Le){var i=r.$assignedNode.ownerSVGElement.querySelector("foreignObject[season-topic-image-trigger]");i||(i=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"));var o=r.$assignedNode.ownerSVGElement.querySelector("foreignObject[season-topic-image-trigger-toolbar]");if(o||(o=document.createElementNS("http://www.w3.org/2000/svg","g")),i&&o)return function(e,t,n){var r=e.$assignedNode.querySelector(":scope > [season-topic-content-group] > .season-topic-image");if(e.data.image&&r){var i=function(){var r=e.getGraphicRect(),i=e.getGraphicRect(".season-topic-image");y=i.width,b=i.height,w=i.x-r.x-m,x=i.y-r.y-m,t.setAttribute("x",w),t.setAttribute("y",x),t.setAttribute("width",y+2*m),t.setAttribute("height",b+2*m),n.setAttribute("transform","translate(".concat(r.width-m-48,", -26)"))},o=function(){k&&(k=void 0,i())},a=function(){var t=O(P.mark((function t(n){return P.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:It(e),n.preventDefault(),n.stopPropagation();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(t){e.changeData("image"),e.queueAction((function(){return e.render()})),h(),t.preventDefault(),t.stopPropagation()},c=function(e){if(0!=(1&e.buttons)){if(k){var n=t.ownerSVGElement.getScreenCTM().inverse().translate(e.clientX,e.clientY),r=n.e,i=n.f;y=k.oriWidth+(r-=k.startX)*k.dx,b=k.oriHeight+(i-=k.startY)*k.dy,k.dx<0&&(w=k.oriX+r),k.dy<0&&(x=k.oriY+i),y<0&&(k.dx<0&&(w+=y),y=0),b<0&&(k.dy<0&&(x+=b),b=0),t.setAttribute("x",w),t.setAttribute("y",x),t.setAttribute("width",y+2*m),t.setAttribute("height",b+2*m)}}else o()},u=function(e){for(var n in A)if(e.target.matches(n)){var r=A[n],i=r.dx,o=r.dy,a=t.ownerSVGElement.getScreenCTM().inverse().translate(e.clientX,e.clientY);k={dx:i,dy:o,startX:a.e,startY:a.f,oriWidth:y,oriHeight:b,oriX:w,oriY:x},e.preventDefault(),e.stopPropagation();break}},l=function(t){if(0==(1&t.buttons)&&k){if(y>0&&b>0){var n=e.data.image;n&&e.changeData("image",{src:n.src,width:y,height:b}),e.queueAction((function(){return e.render().queueAction(i)}))}k=void 0,t.preventDefault(),t.stopPropagation()}},f=function(e){e.preventDefault(),e.stopPropagation()},p=function(e){"escape"===String(e.key).toLowerCase()&&o()},h=function(){e.notify("topic-event-image-trigger-clear"),t.remove(),n.remove()},d=function(e){var t=e.detail;t&&"image"!==t.triggerContentType&&h()},v=function r(){t.removeEventListener("mousedown",u),t.removeEventListener("click",f),t.removeEventListener("dblclick",a),t.ownerSVGElement.removeEventListener("mousemove",c),t.ownerSVGElement.removeEventListener("mouseup",l),t.ownerSVGElement.removeEventListener("keydown",p),e.env.removeEventListener("topic-event-cancel-edit",h),e.env.removeEventListener("topic-event-trigger",d),e.env.removeEventListener("topic-event-image-trigger-clear",r);var i=n.querySelector('[d-btn-action="browser"]');i&&i.removeEventListener("click",a),(i=n.querySelector('[d-btn-action="delete"]'))&&i.removeEventListener("click",s)},m=e.env.config.padding,g=e.env.config.secondaryPadding,y=0,b=0,w=0,x=0,k=null;t.setAttribute("style","--padding:".concat(m,"px;--secondary-padding:").concat(g,"px;")),t.setAttribute("class","season-topic-image-trigger"),t.setAttribute("season-topic-image-trigger",""),t.innerHTML="",e.$assignedNode.appendChild(t),t.insertAdjacentHTML("afterbegin",'<style>.season-topic-image-trigger{position:relative}.season-topic-image-size-box{box-sizing:border-box;position:absolute;top:var(--padding);left:var(--padding);right:var(--padding);bottom:var(--padding);border:1px dashed #666;background:0 0}.season-topic-image-size-corner{box-sizing:border-box;position:absolute;--corner-size:calc((var(--padding) + 1px) / 2);border:var(--corner-size) solid rgba(0,0,0,.3);width:calc(var(--corner-size) + var(--corner-size));height:calc(var(--corner-size) + var(--corner-size))}.season-topic-image-size-corner:hover{border-color:rgba(0,0,0,.6)}.season-topic-image-size-corner-lefttop{border-right:none;border-bottom:none;top:calc(0px - var(--corner-size));left:calc(0px - var(--corner-size));cursor:nwse-resize}.season-topic-image-size-corner-leftbottom{border-right:none;border-top:none;bottom:calc(0px - var(--corner-size));left:calc(0px - var(--corner-size));cursor:nesw-resize}.season-topic-image-size-corner-righttop{border-left:none;border-bottom:none;top:calc(0px - var(--corner-size));right:calc(0px - var(--corner-size));cursor:nesw-resize}.season-topic-image-size-corner-rightbottom{border-left:none;border-top:none;bottom:calc(0px - var(--corner-size));right:calc(0px - var(--corner-size));cursor:nwse-resize}</style><div class="season-topic-image-size-box"><div class="season-topic-image-size-corner season-topic-image-size-corner-lefttop"></div><div class="season-topic-image-size-corner season-topic-image-size-corner-leftbottom"></div><div class="season-topic-image-size-corner season-topic-image-size-corner-righttop"></div><div class="season-topic-image-size-corner season-topic-image-size-corner-rightbottom"></div></div>'),e.$assignedNode.appendChild(n),n.insertAdjacentHTML("afterbegin",'<style>.season-topic-image-trigger-toolbutton>rect{rx: 6px;ry: 6px;width:24px;height:24px}</style><g class="season-topic-svg-3d-button season-topic-image-trigger-toolbutton" d-btn-action="browser"><rect/><use x="1" width="22" height="22" href="#season-topic-predefine-image-picture"/></g><g class="season-topic-svg-3d-button season-topic-image-trigger-toolbutton" d-svg-button-danger="" d-btn-action="delete" transform="translate(26, 0)"><rect/><use x="1" width="22" height="22" href="#season-topic-predefine-image-delete"/></g>');var A={".season-topic-image-size-corner-rightbottom":{dx:1,dy:1},".season-topic-image-size-corner-righttop":{dx:1,dy:-1},".season-topic-image-size-corner-lefttop":{dx:-1,dy:-1},".season-topic-image-size-corner-leftbottom":{dx:-1,dy:1}};!function(){e.notify("topic-event-image-trigger-clear"),i(),t.addEventListener("mousedown",u),t.addEventListener("click",f),t.addEventListener("dblclick",a),t.ownerSVGElement.addEventListener("mousemove",c),t.ownerSVGElement.addEventListener("mouseup",l),t.ownerSVGElement.addEventListener("keydown",p),e.env.addEventListener("topic-event-cancel-edit",h,{once:!0}),e.env.addEventListener("topic-event-trigger",d,{once:!0}),e.env.addEventListener("topic-event-image-trigger-clear",v,{once:!0});var r=n.querySelector('[d-btn-action="browser"]');r&&r.addEventListener("click",a),(r=n.querySelector('[d-btn-action="delete"]'))&&r.addEventListener("click",s)}()}else t.remove()}(r,i,o),void t()}n(M(-1,"cannot setup the trigger"))}catch(e){n(e)}}))}},priority:{edit:function(e){var t=e.eventTarget;t instanceof Le&&Tt(t.$assignedNode.ownerSVGElement,'<style>.topic-priority-edit-item>rect{width:20px;height:20px;x: 0; y: 0;rx: 5px;ry: 5px;}.topic-priority-edit-item[d-priority-selected]>rect{fill:var(--topic-ui-focus-color);stroke:var(--topic-ui-focus-border-color);stroke-width:1px;stroke-dasharray:2}.topic-priority-placeholder{fill:none;stroke:none;width:20px;height:20px;x: 0; y: 0;rx: 5px;ry: 5px;}</style><g mmap-layout="line"><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="1"><rect/><use href="#topic-priority-1" width="22" height="22"/></g><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="2"><rect/><use href="#topic-priority-2" width="22" height="22"/></g><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="3"><rect/><use href="#topic-priority-3" width="22" height="22"/></g><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="4"><rect/><use href="#topic-priority-4" width="22" height="22"/></g></g><g mmap-layout="line"><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="5"><rect/><use href="#topic-priority-5" width="22" height="22"/></g><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="6"><rect/><use href="#topic-priority-6" width="22" height="22"/></g><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="7"><rect/><use href="#topic-priority-7" width="22" height="22"/></g><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="8"><rect/><use href="#topic-priority-8" width="22" height="22"/></g></g><g mmap-layout="line"><g class="topic-priority-edit-item season-topic-svg-button" mmap-event-click="selectPriority" d-priority-value="9"><rect/><use href="#topic-priority-9" width="22" height="22"/></g><rect class="topic-priority-placeholder"/><rect class="topic-priority-placeholder"/><g class="topic-priority-edit-item season-topic-svg-button" d-svg-button-danger="" mmap-event-click="deletePriority"><rect/><use href="#season-topic-predefine-image-delete" width="20" height="20"/></g></g>',Object.assign({topic:t,env:t.env,singletonMutex:t.id},tn))}},href:{edit:function(e){var t=e.eventTarget;t instanceof Le&&Tt(t.$assignedNode.ownerSVGElement,'<style>.topic-href-edit-button>rect{x: 0;y: 0;rx: 5px;ry: 5px;width:26px;height:26px}</style><foreignObject width="100" height="26" style="padding:0 5px 0 0"><style>.season-topic-href-editor{outline:0;border:1px solid #777;box-sizing:border-box;width:100%;height:100%;color:#000;background-color:#fff;font-size:12px}</style><input xmlns="http://www.w3.org/1999/xhtml" class="season-topic-href-editor" tabindex="0"></foreignObject><g class="season-topic-svg-button topic-href-edit-button" mmap-event-click="browser"><rect/><use href="#season-topic-predefine-image-open" width="26" height="26"/></g><g class="season-topic-svg-button topic-href-edit-button" d-svg-button-danger="" mmap-event-click="delete"><rect/><use href="#season-topic-predefine-image-delete" width="26" height="26"/></g>',Object.assign({topic:t,env:t.env,singletonMutex:t.id},Mt))},trigger:function(e){var t=e.eventTarget;t instanceof Le&&t.env.activeLink(t.env.translateHRefToURL(t.data.href).destination)}},"task-marker":{edit:function(e){var t=e.eventTarget;t instanceof Le&&Tt(t.$assignedNode.ownerSVGElement,'<style>.topic-task-marker-item>rect{width:20px;height:20px;x: 0; y: 0;rx: 5px;ry: 5px;}.topic-task-marker-item[d-task-marker-selected]>rect{fill:var(--topic-ui-focus-color);stroke:var(--topic-ui-focus-border-color);stroke-width:1px;stroke-dasharray:2}.topic-task-marker-placeholder{fill:none;stroke:none;width:20px;height:20px;x: 0;y: 0;rx: 5px;ry: 5px;}</style><g mmap-layout="line"><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="0"><rect/><use href="#topic-task-marker-0" width="22" height="22"/></g><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="1"><rect/><use href="#topic-task-marker-1" width="22" height="22"/></g><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="2"><rect/><use href="#topic-task-marker-2" width="22" height="22"/></g><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="3"><rect/><use href="#topic-task-marker-3" width="22" height="22"/></g></g><g mmap-layout="line"><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="4"><rect/><use href="#topic-task-marker-4" width="22" height="22"/></g><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="5"><rect/><use href="#topic-task-marker-5" width="22" height="22"/></g><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="6"><rect/><use href="#topic-task-marker-6" width="22" height="22"/></g><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="7"><rect/><use href="#topic-task-marker-7" width="22" height="22"/></g></g><g mmap-layout="line"><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="8"><rect/><use href="#topic-task-marker-8" width="22" height="22"/></g><g class="topic-task-marker-item season-topic-svg-button" mmap-event-click="selectTaskMarker" d-task-marker-value="unknown"><rect/><use href="#topic-task-marker-unknown" width="22" height="22"/></g><rect class="topic-task-marker-placeholder"/><g class="topic-task-marker-item season-topic-svg-button" d-svg-button-danger="" mmap-event-click="deleteTaskMarker"><rect/><use href="#season-topic-predefine-image-delete" width="20" height="20"/></g></g>',Object.assign({topic:t,env:t.env,singletonMutex:t.id},nn))}},labels:{edit:function(e){var t=e.eventTarget;t instanceof Le&&Tt(t.$assignedNode.ownerSVGElement,'<style>.season-topic-label-edit-item{font-size:12px}.season-topic-label-edit-item>text{alignment-baseline:before-edge;dominant-baseline:text-before-edge;fill:#666}.season-topic-label-edit-item>rect{fill:none;stroke-width:.5px;stroke:#666;stroke-dasharray:2}.season-topic-label-edit-delete>rect{fill:#ddd;stroke:none}.season-topic-label-edit-delete>use{fill:#fff;stroke:none}.season-topic-label-edit-delete:hover>rect{fill:var(--topic-ui-danger-color);stroke:none}</style><g mmap-layout="line" mmap-layout-max-width="120" mmap-layout-margin="5" mmap-layout-padding="0" class="season-topic-labels-edit-list"></g><foreignObject width="120" height="26"><style>.season-topic-label-edit-input{width:100%;height:100%;outline:0;border:1px solid #ccc;box-sizing:border-box;font-size:12px}</style><input class="season-topic-label-edit-input" placeholder="new label..." mmap-event-keydown="onInputKeydown"/></foreignObject>',Object.assign({topic:t,env:t.env,singletonMutex:t.id},zt))}},notes:{edit:en,trigger:en}};e.CreateTopicExtensionFactor=wt,e.DefaultTopicEventActions=on,e.DefaultTopicExtensions=xt,e.EBlockFactor=u,e.MindmapAddinPanel=Tt,e.MindmapContainer=ne,e.MindmapDocument=ft,e.MindmapEnvironment=X,e.MindmapViewer=bt,e.Topic=Le,e.TopicExtension=q,e.TopicExtensionFactor=H,e.TopicFactor=rt,e.generateID=i,Object.defineProperty(e,"__esModule",{value:!0})}(t,w())}(0,y.exports);var x=e({__proto__:null,default:i(y.exports)},[y.exports]);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}var A={},E=void 0,S=!1,_={},T=void 0;function C(){return this.message||""}function L(e){var t=E&&E[e]||e;return t&&"object"===k(t)&&(t.toString=C),S&&(_[e]=t),t}L.config=function(e){e||(e={}),A=e.data||{},T=e.loader},L.install=function(e,t){e&&(L.config(t),e.prototype.$T=L)},Object.defineProperties(L,{enableRecord:{get:function(){return S},set:function(e){return S=e}},record:{get:function(){return JSON.stringify(_)}}}),L.setLocale=function(){var e=n(c.mark((function e(t){var n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=String(t).toLowerCase(),(E=A&&A[t])||!T){e.next=23;break}if(e.prev=3,"function"!=typeof T){e.next=15;break}if(!((n=T(t))instanceof Promise)){e.next=12;break}return e.next=9,n;case 9:E=e.sent,e.next=13;break;case 12:E=n;case 13:e.next=18;break;case 15:return e.next=17,fetch("".concat(T).concat(t,".json")).then((function(e){return e.json()}));case 17:E=e.sent;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),E={};case 23:return e.abrupt("return",E);case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t){return e.apply(this,arguments)}}();var N=L;function M(e,t,n,r){if(e&&t)if("object"===k(t)){var i=!(arguments.length>2)||n;for(var o in t)Object.defineProperty(e,o,{value:t[o],writable:!1,enumerable:i})}else Object.defineProperty(e,t,{value:n,writable:!1,enumerable:!(arguments.length>3)||r});return e}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function F(e,t){if(e&&t)for(var n in Object.assign(e,t),e){var r=e[n];r&&"object"===k(r)&&(e[n]=F(r instanceof Array?[]:{},t[n]))}return e}function $(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function U(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,$(e,t,"get"))}function q(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,$(e,t,"set"),n),n}var H="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},W=[],V=[],G="undefined"!=typeof Uint8Array?Uint8Array:Array,Y=!1;function Z(){Y=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)W[t]=e[t],V[e.charCodeAt(t)]=t;V["-".charCodeAt(0)]=62,V["_".charCodeAt(0)]=63}function X(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(W[(i=r)>>18&63]+W[i>>12&63]+W[i>>6&63]+W[63&i]);return o.join("")}function K(e){var t;Y||Z();for(var n=e.length,r=n%3,i="",o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(X(e,s,s+a>c?c:s+a));return 1===r?(t=e[n-1],i+=W[t>>2],i+=W[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=W[t>>10],i+=W[t>>4&63],i+=W[t<<2&63],i+="="),o.push(i),o.join("")}function J(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?i-1:0,p=n?-1:1,h=e[t+f];for(f+=p,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)}function Q(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?p/c:p*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=d,a/=256,u-=8);e[n+h-d]|=128*v}var ee={}.toString,te=Array.isArray||function(e){return"[object Array]"==ee.call(e)};function ne(){return ie.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function re(e,t){if(ne()<t)throw new RangeError("Invalid typed array length");return ie.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ie.prototype:(null===e&&(e=new ie(t)),e.length=t),e}function ie(e,t,n){if(!(ie.TYPED_ARRAY_SUPPORT||this instanceof ie))return new ie(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return se(this,e)}return oe(this,e,t,n)}function oe(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);ie.TYPED_ARRAY_SUPPORT?(e=t).__proto__=ie.prototype:e=ce(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!ie.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|fe(t,n),i=(e=re(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(le(t)){var n=0|ue(t.length);return 0===(e=re(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?re(e,0):ce(e,t);if("Buffer"===t.type&&te(t.data))return ce(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function ae(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function se(e,t){if(ae(t),e=re(e,t<0?0:0|ue(t)),!ie.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function ce(e,t){var n=t.length<0?0:0|ue(t.length);e=re(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function ue(e){if(e>=ne())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ne().toString(16)+" bytes");return 0|e}function le(e){return!(null==e||!e._isBuffer)}function fe(e,t){if(le(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Pe(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return je(e).length;default:if(r)return Pe(e).length;t=(""+t).toLowerCase(),r=!0}}function pe(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Te(this,t,n);case"utf8":case"utf-8":return Ae(this,t,n);case"ascii":return Se(this,t,n);case"latin1":case"binary":return _e(this,t,n);case"base64":return ke(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function he(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function de(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=ie.from(t,r)),le(t))return 0===t.length?-1:ve(e,t,n,r,i);if("number"==typeof t)return t&=255,ie.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):ve(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function ve(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var f=!0,p=0;p<c;p++)if(u(e,o+p)!==u(t,p)){f=!1;break}if(f)return o}return-1}function me(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function ge(e,t,n,r){return Fe(Pe(t,e.length-n),e,n,r)}function ye(e,t,n,r){return Fe(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function be(e,t,n,r){return ye(e,t,n,r)}function we(e,t,n,r){return Fe(je(t),e,n,r)}function xe(e,t,n,r){return Fe(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function ke(e,t,n){return 0===t&&n===e.length?K(e):K(e.slice(t,n))}function Ae(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=Ee)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Ee));return n}(r)}ie.TYPED_ARRAY_SUPPORT=void 0===H.TYPED_ARRAY_SUPPORT||H.TYPED_ARRAY_SUPPORT,ne(),ie.poolSize=8192,ie._augment=function(e){return e.__proto__=ie.prototype,e},ie.from=function(e,t,n){return oe(null,e,t,n)},ie.TYPED_ARRAY_SUPPORT&&(ie.prototype.__proto__=Uint8Array.prototype,ie.__proto__=Uint8Array),ie.alloc=function(e,t,n){return function(e,t,n,r){return ae(t),t<=0?re(e,t):void 0!==n?"string"==typeof r?re(e,t).fill(n,r):re(e,t).fill(n):re(e,t)}(null,e,t,n)},ie.allocUnsafe=function(e){return se(null,e)},ie.allocUnsafeSlow=function(e){return se(null,e)},ie.isBuffer=function(e){return null!=e&&(!!e._isBuffer||$e(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&$e(e.slice(0,0))}(e))},ie.compare=function(e,t){if(!le(e)||!le(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},ie.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ie.concat=function(e,t){if(!te(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ie.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=ie.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!le(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},ie.byteLength=fe,ie.prototype._isBuffer=!0,ie.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)he(this,t,t+1);return this},ie.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)he(this,t,t+3),he(this,t+1,t+2);return this},ie.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)he(this,t,t+7),he(this,t+1,t+6),he(this,t+2,t+5),he(this,t+3,t+4);return this},ie.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Ae(this,0,e):pe.apply(this,arguments)},ie.prototype.equals=function(e){if(!le(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ie.compare(this,e)},ie.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},ie.prototype.compare=function(e,t,n,r,i){if(!le(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n),l=0;l<s;++l)if(c[l]!==u[l]){o=c[l],a=u[l];break}return o<a?-1:a<o?1:0},ie.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},ie.prototype.indexOf=function(e,t,n){return de(this,e,t,n,!0)},ie.prototype.lastIndexOf=function(e,t,n){return de(this,e,t,n,!1)},ie.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return me(this,e,t,n);case"utf8":case"utf-8":return ge(this,e,t,n);case"ascii":return ye(this,e,t,n);case"latin1":case"binary":return be(this,e,t,n);case"base64":return we(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},ie.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ee=4096;function Se(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function _e(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Te(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Be(e[o]);return i}function Ce(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Le(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Ne(e,t,n,r,i,o){if(!le(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Me(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Ie(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Oe(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Re(e,t,n,r,i){return i||Oe(e,0,n,4),Q(e,t,n,r,23,4),n+4}function De(e,t,n,r,i){return i||Oe(e,0,n,8),Q(e,t,n,r,52,8),n+8}ie.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),ie.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=ie.prototype;else{var i=t-e;n=new ie(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},ie.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Le(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},ie.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Le(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},ie.prototype.readUInt8=function(e,t){return t||Le(e,1,this.length),this[e]},ie.prototype.readUInt16LE=function(e,t){return t||Le(e,2,this.length),this[e]|this[e+1]<<8},ie.prototype.readUInt16BE=function(e,t){return t||Le(e,2,this.length),this[e]<<8|this[e+1]},ie.prototype.readUInt32LE=function(e,t){return t||Le(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ie.prototype.readUInt32BE=function(e,t){return t||Le(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ie.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Le(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},ie.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Le(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},ie.prototype.readInt8=function(e,t){return t||Le(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ie.prototype.readInt16LE=function(e,t){t||Le(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},ie.prototype.readInt16BE=function(e,t){t||Le(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},ie.prototype.readInt32LE=function(e,t){return t||Le(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ie.prototype.readInt32BE=function(e,t){return t||Le(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ie.prototype.readFloatLE=function(e,t){return t||Le(e,4,this.length),J(this,e,!0,23,4)},ie.prototype.readFloatBE=function(e,t){return t||Le(e,4,this.length),J(this,e,!1,23,4)},ie.prototype.readDoubleLE=function(e,t){return t||Le(e,8,this.length),J(this,e,!0,52,8)},ie.prototype.readDoubleBE=function(e,t){return t||Le(e,8,this.length),J(this,e,!1,52,8)},ie.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Ne(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},ie.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Ne(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},ie.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,1,255,0),ie.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ie.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Me(this,e,t,!0),t+2},ie.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,2,65535,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Me(this,e,t,!1),t+2},ie.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Ie(this,e,t,!0),t+4},ie.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,4,4294967295,0),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ie(this,e,t,!1),t+4},ie.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Ne(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},ie.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Ne(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},ie.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,1,127,-128),ie.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ie.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Me(this,e,t,!0),t+2},ie.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,2,32767,-32768),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Me(this,e,t,!1),t+2},ie.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,4,2147483647,-2147483648),ie.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Ie(this,e,t,!0),t+4},ie.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Ne(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ie.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ie(this,e,t,!1),t+4},ie.prototype.writeFloatLE=function(e,t,n){return Re(this,e,t,!0,n)},ie.prototype.writeFloatBE=function(e,t,n){return Re(this,e,t,!1,n)},ie.prototype.writeDoubleLE=function(e,t,n){return De(this,e,t,!0,n)},ie.prototype.writeDoubleBE=function(e,t,n){return De(this,e,t,!1,n)},ie.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!ie.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},ie.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!ie.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=le(e)?e:Pe(new ie(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var ze=/[^+\/0-9A-Za-z-_]/g;function Be(e){return e<16?"0"+e.toString(16):e.toString(16)}function Pe(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function je(e){return function(e){var t,n,r,i,o,a;Y||Z();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new G(3*s/4-o),r=o>0?s-4:s;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=V[e.charCodeAt(t)]<<18|V[e.charCodeAt(t+1)]<<12|V[e.charCodeAt(t+2)]<<6|V[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=V[e.charCodeAt(t)]<<2|V[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=V[e.charCodeAt(t)]<<10|V[e.charCodeAt(t+1)]<<4|V[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(ze,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Fe(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function $e(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Ue(){throw new Error("setTimeout has not been defined")}function qe(){throw new Error("clearTimeout has not been defined")}var He=Ue,We=qe;function Ve(e){if(He===setTimeout)return setTimeout(e,0);if((He===Ue||!He)&&setTimeout)return He=setTimeout,setTimeout(e,0);try{return He(e,0)}catch(t){try{return He.call(null,e,0)}catch(t){return He.call(this,e,0)}}}"function"==typeof H.setTimeout&&(He=setTimeout),"function"==typeof H.clearTimeout&&(We=clearTimeout);var Ge,Ye=[],Ze=!1,Xe=-1;function Ke(){Ze&&Ge&&(Ze=!1,Ge.length?Ye=Ge.concat(Ye):Xe=-1,Ye.length&&Je())}function Je(){if(!Ze){var e=Ve(Ke);Ze=!0;for(var t=Ye.length;t;){for(Ge=Ye,Ye=[];++Xe<t;)Ge&&Ge[Xe].run();Xe=-1,t=Ye.length}Ge=null,Ze=!1,function(e){if(We===clearTimeout)return clearTimeout(e);if((We===qe||!We)&&clearTimeout)return We=clearTimeout,clearTimeout(e);try{We(e)}catch(t){try{return We.call(null,e)}catch(t){return We.call(this,e)}}}(e)}}function Qe(e,t){this.fun=e,this.array=t}Qe.prototype.run=function(){this.fun.apply(null,this.array)};function et(){}var tt=et,nt=et,rt=et,it=et,ot=et,at=et,st=et;var ct=H.performance||{},ut=ct.now||ct.mozNow||ct.msNow||ct.oNow||ct.webkitNow||function(){return(new Date).getTime()};var lt=new Date;var ft={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Ye.push(new Qe(e,t)),1!==Ye.length||Ze||Ve(Je)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:tt,addListener:nt,once:rt,off:it,removeListener:ot,removeAllListeners:at,emit:st,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*ut.call(ct),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-lt)/1e3}},pt=ft;function ht(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dt={exports:{}};!function(e,t){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(!s&&ht)return ht(a);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=ht,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,c,u,l=[],f=0,p=e.length,h=p,d="string"!==r.getTypeOf(e);f<e.length;)h=p-f,i=d?(t=e[f++],n=f<p?e[f++]:0,f<p?e[f++]:0):(t=e.charCodeAt(f++),n=f<p?e.charCodeAt(f++):0,f<p?e.charCodeAt(f++):0),a=t>>2,s=(3&t)<<4|n>>4,c=1<h?(15&n)<<2|i>>6:64,u=2<h?63&i:64,l.push(o.charAt(a)+o.charAt(s)+o.charAt(c)+o.charAt(u));return l.join("")},n.decode=function(e){var t,n,r,a,s,c,u=0,l=0,f="data:";if(e.substr(0,f.length)===f)throw new Error("Invalid base64 input, it looks like a data url.");var p,h=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=i.uint8array?new Uint8Array(0|h):new Array(0|h);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(a=o.indexOf(e.charAt(u++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(c=o.indexOf(e.charAt(u++))),p[l++]=t,64!==s&&(p[l++]=n),64!==c&&(p[l++]=r);return p}},{"./support":30,"./utils":32}],2:[function(e,t,n){var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function c(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(c,a),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},c.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new c("Deflate",e)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,l){var f,p,h=e.file,d=e.compression,v=l!==s.utf8encode,m=o.transformTo("string",l(h.name)),g=o.transformTo("string",s.utf8encode(h.name)),y=h.comment,b=o.transformTo("string",l(y)),w=o.transformTo("string",s.utf8encode(y)),x=g.length!==h.name.length,k=w.length!==y.length,A="",E="",S="",_=h.dir,T=h.date,C={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(C.crc32=e.crc32,C.compressedSize=e.compressedSize,C.uncompressedSize=e.uncompressedSize);var L=0;t&&(L|=8),v||!x&&!k||(L|=2048);var N=0,M=0;_&&(N|=16),"UNIX"===a?(M=798,N|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(h.unixPermissions,_)):(M=20,N|=function(e){return 63&(e||0)}(h.dosPermissions)),f=T.getUTCHours(),f<<=6,f|=T.getUTCMinutes(),f<<=5,f|=T.getUTCSeconds()/2,p=T.getUTCFullYear()-1980,p<<=4,p|=T.getUTCMonth()+1,p<<=5,p|=T.getUTCDate(),x&&(E=r(1,1)+r(c(m),4)+g,A+="up"+r(E.length,2)+E),k&&(S=r(1,1)+r(c(b),4)+w,A+="uc"+r(S.length,2)+S);var I="";return I+="\n\0",I+=r(L,2),I+=d.magic,I+=r(f,2),I+=r(p,2),I+=r(C.crc32,4),I+=r(C.compressedSize,4),I+=r(C.uncompressedSize,4),I+=r(m.length,2),I+=r(A.length,2),{fileRecord:u.LOCAL_FILE_HEADER+I+m+A,dirRecord:u.CENTRAL_FILE_HEADER+r(M,2)+I+r(b.length,2)+"\0\0\0\0"+r(N,4)+r(i,4)+m+A+b}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),c=e("../crc32"),u=e("../signature");function l(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,a),l.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return u.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,a){var s=o.transformTo("string",a(i));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},c=n.dir,u=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:c,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function u(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(u(r[o]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),o=i.files,a=0;a<o.length;a++){var s=o[a],c=s.fileNameStr,u=r.resolve(s.fileNameStr);n.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(u).unsafeOriginalName=c)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){t.exports={isNode:!0,newBufferFrom:function(e,t){if(ie.from&&ie.from!==Uint8Array.from)return ie.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new ie(e,t)},allocBuffer:function(e){if(ie.alloc)return ie.alloc(e);var t=new ie(e);return t.fill(0),t},isBuffer:function(e){return ie.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){function r(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},c);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=v(e)),s.createFolders&&(r=d(e))&&m.call(this,r,!0);var f="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!f),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var g=null;g=t instanceof u||t instanceof a?t:p.isNode&&p.isStream(t)?new h(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var y=new l(e,g,s);this.files[e]=y}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),c=e("./defaults"),u=e("./compressedObject"),l=e("./zipObject"),f=e("./generate"),p=e("./nodejsUtils"),h=e("./nodejs/NodejsStreamInputAdapter"),d=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},v=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:c.createFolders,e=v(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function g(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(g(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(g(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=m.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=f.generateWorker(this,n,r)}catch(e){(t=new a("error")).error(e)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new c(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){var r=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),a=e("../base64"),s=e("../support"),c=e("../external"),u=null;if(s.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function l(e,t){return new c.Promise((function(n,i){var o=[],s=e._internalType,c=e._outputType,u=e._mimeType;e.on("data",(function(e,n){o.push(e),t&&t(n)})).on("error",(function(e){o=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return r.transformTo(e,t)}}(c,function(e,t){var n,r=0,i=null,o=0;for(n=0;n<t.length;n++)o+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return ie.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,o),u);n(e)}catch(e){i(e)}o=[]})).resume()}))}function f(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,r.checkSupport(a),this._worker=e.pipe(new i(a)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}f.prototype={accumulate:function(e){return l(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=!0,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),o=a=0;a<c;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,c=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)c[n++]=i;else if(4<(o=s[i]))c[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),r.applyFromCharCode(c)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(u,a),u.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),c=t;a!==t.length&&(i.uint8array?(c=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(c=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(c),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(l,a),l.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("./external");function s(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function l(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=u.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return u.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return u.stringifyByChar(e)}function f(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=l;var p={};p.string={string:s,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,o.allocBuffer(e.length))}},p.array={string:l,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},p.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return f(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:l,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return o.newBufferFrom(e)}},p.nodebuffer={string:l,array:function(e){return f(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return f(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return p[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,s,u){return a.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var l=n.getTypeOf(t);return l?("arraybuffer"===l?t=n.transformTo("uint8array",t):"string"===l&&(u?t=i.decode(t):o&&!0!==s&&(t=function(e){return c(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),c=e("./compressions"),u=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),c=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<u.length;f++)r.prototype[u[f]]=l;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function p(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=d((function(){t(i,r)}));"error"===a.status&&r(a.value)}function d(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==c?f(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=d(p,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(i);++c<n;)l(e[c],c);return u;function l(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(u,a))}),(function(e){r||(r=!0,o.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a,s=-1,c=new this(i);++s<n;)a=e[s],t.resolve(a).then((function(e){r||(r=!0,o.resolve(c,e))}),(function(e){r||(r=!0,o.reject(c,e))}));return c}},{immediate:36}],38:[function(e,t,n){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),c=Object.prototype.toString,u=0,l=-1,f=0,p=8;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({level:l,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==u)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var d;if(d="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,d))!==u)throw new Error(a[n]);this._dict_set=!0}}function d(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(e,t){var n,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===c.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,a))&&n!==u)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==a||(this.onEnd(u),!(s.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=h,n.deflate=d,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),c=e("./zlib/zstream"),u=e("./zlib/gzheader"),l=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function p(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(e,t){var n,s,c,u,f,p,h=this.strm,d=this.options.chunkSize,v=this.options.dictionary,m=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?h.input=o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new i.Buf8(d),h.next_out=0,h.avail_out=d),(n=r.inflate(h,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&v&&(p="string"==typeof v?o.string2buf(v):"[object ArrayBuffer]"===l.call(v)?new Uint8Array(v):v,n=r.inflateSetDictionary(this.strm,p)),n===a.Z_BUF_ERROR&&!0===m&&(n=a.Z_OK,m=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);h.next_out&&(0!==h.avail_out&&n!==a.Z_STREAM_END&&(0!==h.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(h.output,h.next_out),u=h.next_out-c,f=o.buf2string(h.output,c),h.next_out=u,h.avail_out=d-u,u&&i.arraySet(h.output,h.output,c,u,0),this.onData(f)):this.onData(i.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(m=!0)}while((0<h.avail_in||0===h.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(h.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=f,n.inflate=p,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function c(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,c=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),o=a=0;a<c;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return c(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,u=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)u[r++]=i;else if(4<(o=a[i]))u[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return c(u,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),c=e("./messages"),u=0,l=4,f=0,p=-2,h=-1,d=4,v=2,m=8,g=9,y=286,b=30,w=19,x=2*y+1,k=15,A=3,E=258,S=E+A+1,_=42,T=113,C=1,L=2,N=3,M=4;function I(e,t){return e.msg=c[t],t}function O(e){return(e<<1)-(4<e?9:0)}function R(e){for(var t=e.length;0<=--t;)e[t]=0}function D(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function z(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)}function B(e,t){e.pending_buf[e.pending++]=t}function P(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function j(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-S?e.strstart-(e.w_size-S):0,u=e.window,l=e.w_mask,f=e.prev,p=e.strstart+E,h=u[o+a-1],d=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===d&&u[n+a-1]===h&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<p);if(r=E-(p-o),o=p-E,a<r){if(e.match_start=t,s<=(a=r))break;h=u[o+a-1],d=u[o+a]}}}while((t=f[t&l])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function F(e){var t,n,r,o,c,u,l,f,p,h,d=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-S)){for(i.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=n=e.hash_size;r=e.head[--t],e.head[t]=d<=r?r-d:0,--n;);for(t=n=d;r=e.prev[--t],e.prev[t]=d<=r?r-d:0,--n;);o+=d}if(0===e.strm.avail_in)break;if(u=e.strm,l=e.window,f=e.strstart+e.lookahead,h=void 0,(p=o)<(h=u.avail_in)&&(h=p),n=0===h?0:(u.avail_in-=h,i.arraySet(l,u.input,u.next_in,h,f),1===u.state.wrap?u.adler=a(u.adler,l,h,f):2===u.state.wrap&&(u.adler=s(u.adler,l,h,f)),u.next_in+=h,u.total_in+=h,h),e.lookahead+=n,e.lookahead+e.insert>=A)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+A-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<A)););}while(e.lookahead<S&&0!==e.strm.avail_in)}function $(e,t){for(var n,r;;){if(e.lookahead<S){if(F(e),e.lookahead<S&&t===u)return C;if(0===e.lookahead)break}if(n=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-S&&(e.match_length=j(e,n)),e.match_length>=A)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-A),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=A){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(z(e,!1),0===e.strm.avail_out))return C}return e.insert=e.strstart<A-1?e.strstart:A-1,t===l?(z(e,!0),0===e.strm.avail_out?N:M):e.last_lit&&(z(e,!1),0===e.strm.avail_out)?C:L}function U(e,t){for(var n,r,i;;){if(e.lookahead<S){if(F(e),e.lookahead<S&&t===u)return C;if(0===e.lookahead)break}if(n=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=A-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-S&&(e.match_length=j(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===A&&4096<e.strstart-e.match_start)&&(e.match_length=A-1)),e.prev_length>=A&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-A,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-A),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=A-1,e.strstart++,r&&(z(e,!1),0===e.strm.avail_out))return C}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&z(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return C}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<A-1?e.strstart:A-1,t===l?(z(e,!0),0===e.strm.avail_out?N:M):e.last_lit&&(z(e,!1),0===e.strm.avail_out)?C:L}function q(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*x),this.dyn_dtree=new i.Buf16(2*(2*b+1)),this.bl_tree=new i.Buf16(2*(2*w+1)),R(this.dyn_ltree),R(this.dyn_dtree),R(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(k+1),this.heap=new i.Buf16(2*y+1),R(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),R(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=v,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?_:T,e.adler=2===t.wrap?0:1,t.last_flush=u,o._tr_init(t),f):I(e,p)}function V(e){var t=W(e);return t===f&&function(e){e.window_size=2*e.w_size,R(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=A-1,e.match_available=0,e.ins_h=0}(e.state),t}function G(e,t,n,r,o,a){if(!e)return p;var s=1;if(t===h&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||g<o||n!==m||r<8||15<r||t<0||9<t||a<0||d<a)return I(e,p);8===r&&(r=9);var c=new H;return(e.state=c).strm=e,c.wrap=s,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+A-1)/A),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=a,c.method=n,V(e)}r=[new q(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(F(e),0===e.lookahead&&t===u)return C;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,z(e,!1),0===e.strm.avail_out))return C;if(e.strstart-e.block_start>=e.w_size-S&&(z(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===l?(z(e,!0),0===e.strm.avail_out?N:M):(e.strstart>e.block_start&&(z(e,!1),e.strm.avail_out),C)})),new q(4,4,8,4,$),new q(4,5,16,8,$),new q(4,6,32,32,$),new q(4,4,16,16,U),new q(8,16,32,32,U),new q(8,16,128,128,U),new q(8,32,128,256,U),new q(32,128,258,1024,U),new q(32,258,258,4096,U)],n.deflateInit=function(e,t){return G(e,t,m,15,8,0)},n.deflateInit2=G,n.deflateReset=V,n.deflateResetKeep=W,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?p:(e.state.gzhead=t,f):p},n.deflate=function(e,t){var n,i,a,c;if(!e||!e.state||5<t||t<0)return e?I(e,p):p;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==l)return I(e,0===e.avail_out?-5:p);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===_)if(2===i.wrap)e.adler=0,B(i,31),B(i,139),B(i,8),i.gzhead?(B(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),B(i,255&i.gzhead.time),B(i,i.gzhead.time>>8&255),B(i,i.gzhead.time>>16&255),B(i,i.gzhead.time>>24&255),B(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),B(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(B(i,255&i.gzhead.extra.length),B(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(B(i,0),B(i,0),B(i,0),B(i,0),B(i,0),B(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),B(i,3),i.status=T);else{var h=m+(i.w_bits-8<<4)<<8;h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=T,P(i,h),0!==i.strstart&&(P(i,e.adler>>>16),P(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),D(e),a=i.pending,i.pending!==i.pending_buf_size));)B(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),D(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,B(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),D(e),a=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,B(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&D(e),i.pending+2<=i.pending_buf_size&&(B(i,255&e.adler),B(i,e.adler>>8&255),e.adler=0,i.status=T)):i.status=T),0!==i.pending){if(D(e),0===e.avail_out)return i.last_flush=-1,f}else if(0===e.avail_in&&O(t)<=O(n)&&t!==l)return I(e,-5);if(666===i.status&&0!==e.avail_in)return I(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&666!==i.status){var d=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(F(e),0===e.lookahead)){if(t===u)return C;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(z(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===l?(z(e,!0),0===e.strm.avail_out?N:M):e.last_lit&&(z(e,!1),0===e.strm.avail_out)?C:L}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=E){if(F(e),e.lookahead<=E&&t===u)return C;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=A&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+E;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=E-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=A?(n=o._tr_tally(e,1,e.match_length-A),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(z(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===l?(z(e,!0),0===e.strm.avail_out?N:M):e.last_lit&&(z(e,!1),0===e.strm.avail_out)?C:L}(i,t):r[i.level].func(i,t);if(d!==N&&d!==M||(i.status=666),d===C||d===N)return 0===e.avail_out&&(i.last_flush=-1),f;if(d===L&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(R(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),D(e),0===e.avail_out))return i.last_flush=-1,f}return t!==l?f:i.wrap<=0?1:(2===i.wrap?(B(i,255&e.adler),B(i,e.adler>>8&255),B(i,e.adler>>16&255),B(i,e.adler>>24&255),B(i,255&e.total_in),B(i,e.total_in>>8&255),B(i,e.total_in>>16&255),B(i,e.total_in>>24&255)):(P(i,e.adler>>>16),P(i,65535&e.adler)),D(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?f:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==_&&69!==t&&73!==t&&91!==t&&103!==t&&t!==T&&666!==t?I(e,p):(e.state=null,t===T?I(e,-3):f):p},n.deflateSetDictionary=function(e,t){var n,r,o,s,c,u,l,h,d=t.length;if(!e||!e.state)return p;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==_||n.lookahead)return p;for(1===s&&(e.adler=a(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===s&&(R(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,d-n.w_size,n.w_size,0),t=h,d=n.w_size),c=e.avail_in,u=e.next_in,l=e.input,e.avail_in=d,e.next_in=0,e.input=t,F(n);n.lookahead>=A;){for(r=n.strstart,o=n.lookahead-(A-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+A-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=A-1,F(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=A-1,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=c,n.wrap=s,f},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){t.exports=function(e,t){var n,r,i,o,a,s,c,u,l,f,p,h,d,v,m,g,y,b,w,x,k,A,E,S,_;n=e.state,r=e.next_in,S=e.input,i=r+(e.avail_in-5),o=e.next_out,_=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),c=n.dmax,u=n.wsize,l=n.whave,f=n.wnext,p=n.window,h=n.hold,d=n.bits,v=n.lencode,m=n.distcode,g=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{d<15&&(h+=S[r++]<<d,d+=8,h+=S[r++]<<d,d+=8),b=v[h&g];t:for(;;){if(h>>>=w=b>>>24,d-=w,0==(w=b>>>16&255))_[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=v[(65535&b)+(h&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&b,(w&=15)&&(d<w&&(h+=S[r++]<<d,d+=8),x+=h&(1<<w)-1,h>>>=w,d-=w),d<15&&(h+=S[r++]<<d,d+=8,h+=S[r++]<<d,d+=8),b=m[h&y];n:for(;;){if(h>>>=w=b>>>24,d-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=m[(65535&b)+(h&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,d<(w&=15)&&(h+=S[r++]<<d,(d+=8)<w&&(h+=S[r++]<<d,d+=8)),c<(k+=h&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=w,d-=w,(w=o-a)<k){if(l<(w=k-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=p,(A=0)===f){if(A+=u-w,w<x){for(x-=w;_[o++]=p[A++],--w;);A=o-k,E=_}}else if(f<w){if(A+=u+f-w,(w-=f)<x){for(x-=w;_[o++]=p[A++],--w;);if(A=0,f<x){for(x-=w=f;_[o++]=p[A++],--w;);A=o-k,E=_}}}else if(A+=f-w,w<x){for(x-=w;_[o++]=p[A++],--w;);A=o-k,E=_}for(;2<x;)_[o++]=E[A++],_[o++]=E[A++],_[o++]=E[A++],x-=3;x&&(_[o++]=E[A++],1<x&&(_[o++]=E[A++]))}else{for(A=o-k;_[o++]=_[A++],_[o++]=_[A++],_[o++]=_[A++],2<(x-=3););x&&(_[o++]=_[A++],1<x&&(_[o++]=_[A++]))}break}}break}}while(r<i&&o<s);r-=x=d>>3,h&=(1<<(d-=x<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=h,n.bits=d}},{}],49:[function(e,t,n){var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),c=1,u=2,l=0,f=-2,p=1,h=852,d=592;function v(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function g(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=p,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(h),t.distcode=t.distdyn=new r.Buf32(d),t.sane=1,t.back=-1,l):f}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,g(e)):f}function b(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?f:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):f}function w(e,t){var n,r;return e?(r=new m,(e.state=r).window=null,(n=b(e,t))!==l&&(e.state=null),n):f}var x,k,A=!0;function E(e){if(A){var t;for(x=new r.Buf32(512),k=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(c,e.lens,0,288,x,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,k,0,e.work,{bits:5}),A=!1}e.lencode=x,e.lenbits=9,e.distcode=k,e.distbits=5}function S(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=y,n.inflateReset2=b,n.inflateResetKeep=g,n.inflateInit=function(e){return w(e,15)},n.inflateInit2=w,n.inflate=function(e,t){var n,h,d,m,g,y,b,w,x,k,A,_,T,C,L,N,M,I,O,R,D,z,B,P,j=0,F=new r.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return f;12===(n=e.state).mode&&(n.mode=13),g=e.next_out,d=e.output,b=e.avail_out,m=e.next_in,h=e.input,y=e.avail_in,w=n.hold,x=n.bits,k=y,A=b,z=l;e:for(;;)switch(n.mode){case p:if(0===n.wrap){n.mode=13;break}for(;x<16;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(2&n.wrap&&35615===w){F[n.check=0]=255&w,F[1]=w>>>8&255,n.check=o(n.check,F,2,0),x=w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&w)){e.msg="unknown compression method",n.mode=30;break}if(x-=4,D=8+(15&(w>>>=4)),0===n.wbits)n.wbits=D;else if(D>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<D,e.adler=n.check=1,n.mode=512&w?10:12,x=w=0;break;case 2:for(;x<16;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(n.flags=w,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(F[0]=255&w,F[1]=w>>>8&255,n.check=o(n.check,F,2,0)),x=w=0,n.mode=3;case 3:for(;x<32;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}n.head&&(n.head.time=w),512&n.flags&&(F[0]=255&w,F[1]=w>>>8&255,F[2]=w>>>16&255,F[3]=w>>>24&255,n.check=o(n.check,F,4,0)),x=w=0,n.mode=4;case 4:for(;x<16;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(F[0]=255&w,F[1]=w>>>8&255,n.check=o(n.check,F,2,0)),x=w=0,n.mode=5;case 5:if(1024&n.flags){for(;x<16;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(F[0]=255&w,F[1]=w>>>8&255,n.check=o(n.check,F,2,0)),x=w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(_=n.length)&&(_=y),_&&(n.head&&(D=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,h,m,_,D)),512&n.flags&&(n.check=o(n.check,h,_,m)),y-=_,m+=_,n.length-=_),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(_=0;D=h[m+_++],n.head&&D&&n.length<65536&&(n.head.name+=String.fromCharCode(D)),D&&_<y;);if(512&n.flags&&(n.check=o(n.check,h,_,m)),y-=_,m+=_,D)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(_=0;D=h[m+_++],n.head&&D&&n.length<65536&&(n.head.comment+=String.fromCharCode(D)),D&&_<y;);if(512&n.flags&&(n.check=o(n.check,h,_,m)),y-=_,m+=_,D)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;x<16;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(w!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}x=w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;x<32;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}e.adler=n.check=v(w),x=w=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=g,e.avail_out=b,e.next_in=m,e.avail_in=y,n.hold=w,n.bits=x,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){w>>>=7&x,x-=7&x,n.mode=27;break}for(;x<3;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}switch(n.last=1&w,x-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(E(n),n.mode=20,6!==t)break;w>>>=2,x-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}w>>>=2,x-=2;break;case 14:for(w>>>=7&x,x-=7&x;x<32;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&w,x=w=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(_=n.length){if(y<_&&(_=y),b<_&&(_=b),0===_)break e;r.arraySet(d,h,m,_,g),y-=_,m+=_,b-=_,g+=_,n.length-=_;break}n.mode=12;break;case 17:for(;x<14;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(n.nlen=257+(31&w),w>>>=5,x-=5,n.ndist=1+(31&w),w>>>=5,x-=5,n.ncode=4+(15&w),w>>>=4,x-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;x<3;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}n.lens[$[n.have++]]=7&w,w>>>=3,x-=3}for(;n.have<19;)n.lens[$[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,B={bits:n.lenbits},z=s(0,n.lens,0,19,n.lencode,0,n.work,B),n.lenbits=B.bits,z){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;N=(j=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,M=65535&j,!((L=j>>>24)<=x);){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(M<16)w>>>=L,x-=L,n.lens[n.have++]=M;else{if(16===M){for(P=L+2;x<P;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(w>>>=L,x-=L,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}D=n.lens[n.have-1],_=3+(3&w),w>>>=2,x-=2}else if(17===M){for(P=L+3;x<P;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}x-=L,D=0,_=3+(7&(w>>>=L)),w>>>=3,x-=3}else{for(P=L+7;x<P;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}x-=L,D=0,_=11+(127&(w>>>=L)),w>>>=7,x-=7}if(n.have+_>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;_--;)n.lens[n.have++]=D}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,B={bits:n.lenbits},z=s(c,n.lens,0,n.nlen,n.lencode,0,n.work,B),n.lenbits=B.bits,z){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,B={bits:n.distbits},z=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,B),n.distbits=B.bits,z){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=b){e.next_out=g,e.avail_out=b,e.next_in=m,e.avail_in=y,n.hold=w,n.bits=x,a(e,A),g=e.next_out,d=e.output,b=e.avail_out,m=e.next_in,h=e.input,y=e.avail_in,w=n.hold,x=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;N=(j=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,M=65535&j,!((L=j>>>24)<=x);){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(N&&0==(240&N)){for(I=L,O=N,R=M;N=(j=n.lencode[R+((w&(1<<I+O)-1)>>I)])>>>16&255,M=65535&j,!(I+(L=j>>>24)<=x);){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}w>>>=I,x-=I,n.back+=I}if(w>>>=L,x-=L,n.back+=L,n.length=M,0===N){n.mode=26;break}if(32&N){n.back=-1,n.mode=12;break}if(64&N){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&N,n.mode=22;case 22:if(n.extra){for(P=n.extra;x<P;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;N=(j=n.distcode[w&(1<<n.distbits)-1])>>>16&255,M=65535&j,!((L=j>>>24)<=x);){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(0==(240&N)){for(I=L,O=N,R=M;N=(j=n.distcode[R+((w&(1<<I+O)-1)>>I)])>>>16&255,M=65535&j,!(I+(L=j>>>24)<=x);){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}w>>>=I,x-=I,n.back+=I}if(w>>>=L,x-=L,n.back+=L,64&N){e.msg="invalid distance code",n.mode=30;break}n.offset=M,n.extra=15&N,n.mode=24;case 24:if(n.extra){for(P=n.extra;x<P;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,x-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break e;if(_=A-b,n.offset>_){if((_=n.offset-_)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}T=_>n.wnext?(_-=n.wnext,n.wsize-_):n.wnext-_,_>n.length&&(_=n.length),C=n.window}else C=d,T=g-n.offset,_=n.length;for(b<_&&(_=b),b-=_,n.length-=_;d[g++]=C[T++],--_;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;d[g++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;x<32;){if(0===y)break e;y--,w|=h[m++]<<x,x+=8}if(A-=b,e.total_out+=A,n.total+=A,A&&(e.adler=n.check=n.flags?o(n.check,d,A,g-A):i(n.check,d,A,g-A)),A=b,(n.flags?w:v(w))!==n.check){e.msg="incorrect data check",n.mode=30;break}x=w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;x<32;){if(0===y)break e;y--,w+=h[m++]<<x,x+=8}if(w!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}x=w=0}n.mode=29;case 29:z=1;break e;case 30:z=-3;break e;case 31:return-4;default:return f}return e.next_out=g,e.avail_out=b,e.next_in=m,e.avail_in=y,n.hold=w,n.bits=x,(n.wsize||A!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&S(e,e.output,e.next_out,A-e.avail_out)?(n.mode=31,-4):(k-=e.avail_in,A-=e.avail_out,e.total_in+=k,e.total_out+=A,n.total+=A,n.wrap&&A&&(e.adler=n.check=n.flags?o(n.check,d,A,e.next_out-A):i(n.check,d,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==k&&0===A||4===t)&&z===l&&(z=-5),z)},n.inflateEnd=function(e){if(!e||!e.state)return f;var t=e.state;return t.window&&(t.window=null),e.state=null,l},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?f:((n.head=t).done=!1,l):f},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?f:11===n.mode&&i(1,t,r,0)!==n.check?-3:S(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,l):f},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,c,u,l,f,p){var h,d,v,m,g,y,b,w,x,k=p.bits,A=0,E=0,S=0,_=0,T=0,C=0,L=0,N=0,M=0,I=0,O=null,R=0,D=new r.Buf16(16),z=new r.Buf16(16),B=null,P=0;for(A=0;A<=15;A++)D[A]=0;for(E=0;E<c;E++)D[t[n+E]]++;for(T=k,_=15;1<=_&&0===D[_];_--);if(_<T&&(T=_),0===_)return u[l++]=20971520,u[l++]=20971520,p.bits=1,0;for(S=1;S<_&&0===D[S];S++);for(T<S&&(T=S),A=N=1;A<=15;A++)if(N<<=1,(N-=D[A])<0)return-1;if(0<N&&(0===e||1!==_))return-1;for(z[1]=0,A=1;A<15;A++)z[A+1]=z[A]+D[A];for(E=0;E<c;E++)0!==t[n+E]&&(f[z[t[n+E]]++]=E);if(y=0===e?(O=B=f,19):1===e?(O=i,R-=257,B=o,P-=257,256):(O=a,B=s,-1),A=S,g=l,L=E=I=0,v=-1,m=(M=1<<(C=T))-1,1===e&&852<M||2===e&&592<M)return 1;for(;;){for(b=A-L,x=f[E]<y?(w=0,f[E]):f[E]>y?(w=B[P+f[E]],O[R+f[E]]):(w=96,0),h=1<<A-L,S=d=1<<C;u[g+(I>>L)+(d-=h)]=b<<24|w<<16|x|0,0!==d;);for(h=1<<A-1;I&h;)h>>=1;if(0!==h?(I&=h-1,I+=h):I=0,E++,0==--D[A]){if(A===_)break;A=t[n+f[E]]}if(T<A&&(I&m)!==v){for(0===L&&(L=T),g+=S,N=1<<(C=A-L);C+L<_&&!((N-=D[C+L])<=0);)C++,N<<=1;if(M+=1<<C,1===e&&852<M||2===e&&592<M)return 1;u[v=I&m]=T<<24|C<<16|g-l|0}}return 0!==I&&(u[g+I]=A-L<<24|64<<16|0),p.bits=T,0}},{"../utils/common":41}],51:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){var r=e("../utils/common"),i=0,o=1;function a(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,c=29,u=256,l=u+1+c,f=30,p=19,h=2*l+1,d=15,v=16,m=7,g=256,y=16,b=17,w=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=new Array(2*(l+2));a(S);var _=new Array(2*f);a(_);var T=new Array(512);a(T);var C=new Array(256);a(C);var L=new Array(c);a(L);var N,M,I,O=new Array(f);function R(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function D(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function z(e){return e<256?T[e]:T[256+(e>>>7)]}function B(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function P(e,t,n){e.bi_valid>v-n?(e.bi_buf|=t<<e.bi_valid&65535,B(e,e.bi_buf),e.bi_buf=t>>v-e.bi_valid,e.bi_valid+=n-v):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function j(e,t,n){P(e,n[2*t],n[2*t+1])}function F(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function $(e,t,n){var r,i,o=new Array(d+1),a=0;for(r=1;r<=d;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=F(o[s]++,s))}}function U(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<f;t++)e.dyn_dtree[2*t]=0;for(t=0;t<p;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*g]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function q(e){8<e.bi_valid?B(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function W(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function V(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?j(e,i,t):(j(e,(o=C[i])+u+1,t),0!==(a=x[o])&&P(e,i-=L[o],a),j(e,o=z(--r),n),0!==(a=k[o])&&P(e,r-=O[o],a)),s<e.last_lit;);j(e,g,t)}function G(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=h,n=0;n<c;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)W(e,o,n);for(i=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],W(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,W(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,v=t.stat_desc.extra_base,m=t.stat_desc.max_length,g=0;for(o=0;o<=d;o++)e.bl_count[o]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<h;n++)m<(o=c[2*c[2*(r=e.heap[n])+1]+1]+1)&&(o=m,g++),c[2*r+1]=o,u<r||(e.bl_count[o]++,a=0,v<=r&&(a=p[r-v]),s=c[2*r],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(l[2*r+1]+a)));if(0!==g){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,g-=2}while(0<g);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)u<(i=e.heap[--n])||(c[2*i+1]!==o&&(e.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(e,t),$(o,u,e.bl_count)}function Y(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<c&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):s<=10?e.bl_tree[2*b]++:e.bl_tree[2*w]++,o=i,u=(s=0)===a?(c=138,3):i===a?(c=6,3):(c=7,4))}function Z(e,t,n){var r,i,o=-1,a=t[1],s=0,c=7,u=4;for(0===a&&(c=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<c&&i===a)){if(s<u)for(;j(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(j(e,i,e.bl_tree),s--),j(e,y,e.bl_tree),P(e,s-3,2)):s<=10?(j(e,b,e.bl_tree),P(e,s-3,3)):(j(e,w,e.bl_tree),P(e,s-11,7));o=i,u=(s=0)===a?(c=138,3):i===a?(c=6,3):(c=7,4)}}a(O);var X=!1;function K(e,t,n,i){P(e,(s<<1)+(i?1:0),3),function(e,t,n,i){q(e),i&&(B(e,n),B(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){X||(function(){var e,t,n,r,i,o=new Array(d+1);for(r=n=0;r<c-1;r++)for(L[r]=n,e=0;e<1<<x[r];e++)C[n++]=r;for(C[n-1]=r,r=i=0;r<16;r++)for(O[r]=i,e=0;e<1<<k[r];e++)T[i++]=r;for(i>>=7;r<f;r++)for(O[r]=i<<7,e=0;e<1<<k[r]-7;e++)T[256+i++]=r;for(t=0;t<=d;t++)o[t]=0;for(e=0;e<=143;)S[2*e+1]=8,e++,o[8]++;for(;e<=255;)S[2*e+1]=9,e++,o[9]++;for(;e<=279;)S[2*e+1]=7,e++,o[7]++;for(;e<=287;)S[2*e+1]=8,e++,o[8]++;for($(S,l+1,o),e=0;e<f;e++)_[2*e+1]=5,_[2*e]=F(e,5);N=new R(S,x,u+1,l,d),M=new R(_,k,0,f,d),I=new R(new Array(0),A,0,p,m)}(),X=!0),e.l_desc=new D(e.dyn_ltree,N),e.d_desc=new D(e.dyn_dtree,M),e.bl_desc=new D(e.bl_tree,I),e.bi_buf=0,e.bi_valid=0,U(e)},n._tr_stored_block=K,n._tr_flush_block=function(e,t,n,r){var a,s,c=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return o;return i}(e)),G(e,e.l_desc),G(e,e.d_desc),c=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=p-1;3<=t&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?K(e,t,n,r):4===e.strategy||s===a?(P(e,2+(r?1:0),3),V(e,S,_)):(P(e,4+(r?1:0),3),function(e,t,n,r){var i;for(P(e,t-257,5),P(e,n-1,5),P(e,r-4,4),i=0;i<r;i++)P(e,e.bl_tree[2*E[i]+1],3);Z(e,e.dyn_ltree,t-1),Z(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),V(e,e.dyn_ltree,e.dyn_dtree)),U(e),r&&q(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(C[n]+u+1)]++,e.dyn_dtree[2*z(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){P(e,2,3),j(e,g,S),function(e){16===e.bi_valid?(B(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){if(!e.setImmediate){var n,r,i,o,a=1,s={},c=!1,u=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,n="[object process]"==={}.toString.call(e.process)?function(e){pt.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",h,!1):e.attachEvent("onmessage",h),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(p,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[a]=i,n(a),a++},l.clearImmediate=f}function f(e){delete s[e]}function p(e){if(c)setTimeout(p,0,e);else{var n=s[e];if(n){c=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{f(e),c=!1}}}}function h(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}(dt);var vt=dt.exports;function mt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function gt(e,t,n){return gt=mt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&D(i,n.prototype),i},gt.apply(null,arguments)}function yt(e){var t="function"==typeof Map?new Map:void 0;return yt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return gt(e,arguments,j(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),D(r,e)},yt(e)}function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}var wt=function(e){z(n,e);var t=bt(n);function n(e){I(this,n);for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.call.apply(t,[this,e||"No implementation"].concat(i))}return R(n)}(yt(Error)),xt=function(){function e(){I(this,e)}var t,r,i,o,a,s;return R(e,[{key:"load",value:(s=n(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new wt;case 1:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"save",value:(a=n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new wt;case 1:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"type",get:function(){return"mindmap"}},{key:"readSheets",value:(o=n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new wt;case 1:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"writeSheets",value:(i=n(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new wt;case 1:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"enumerateAttachments",value:c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new wt;case 1:case"end":return e.stop()}}),e)}))},{key:"readContent",value:(r=n(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new wt;case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"writeContent",value:(t=n(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new wt;case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function At(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Et=new WeakMap,St=new WeakMap,_t=new WeakMap,Tt=function(e){z(l,e);var t,r,i,o,a,s,u=kt(l);function l(){var e;return I(this,l),At(B(e=u.call(this)),_t,{get:Ct,set:void 0}),At(B(e),Et,{writable:!0,value:void 0}),At(B(e),St,{writable:!0,value:void 0}),q(B(e),Et,null),q(B(e),St,null),e}return R(l,[{key:"type",get:function(){return U(this,St)&&U(this,St).packageType?U(this,St).packageType:"mindmap"}},{key:"load",value:(s=n(c.mark((function e(t){var n,r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=q,e.t1=this,e.t2=Et,e.next=5,vt.loadAsync(t,{base64:"string"==typeof _source});case 5:if(e.t3=e.sent,!(n=(0,e.t0)(e.t1,e.t2,e.t3))){e.next=17;break}if(!(r=n.file("manifest.json"))){e.next=16;break}return e.next=12,r.async("text");case 12:r=e.sent,q(this,St,JSON.parse(r)),e.next=17;break;case 16:q(this,St,{files:{}});case 17:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"save",value:(a=n(c.mark((function e(t){var n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,Et)){e.next=9;break}return U(this,Et).file("metadata.json")||U(this,Et).file("metadata.json",JSON.stringify({creator:{name:"felis",version:"1.0.0.202208"}})),(n=U(this,_t)).packageType||(n.packageType=t||"mindmap"),n.files["metadata.json"]={},U(this,Et).file("manifest.json",JSON.stringify(n)),e.next=8,U(this,Et).generateAsync({type:"blob",mimeType:"application/felis",compression:"DEFLATE",compressionOptions:{level:9}});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"readSheets",value:(o=n(c.mark((function e(){var t;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,Et)){e.next=7;break}if(!(t=U(this,Et).file("sheets.json"))){e.next=7;break}return e.next=5,t.async("text");case 5:return t=e.sent,e.abrupt("return",JSON.parse(t));case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"writeSheets",value:(i=n(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t instanceof Array&&((U(this,Et)||q(this,Et,new vt)).file("sheets.json",JSON.stringify(t)),U(this,_t).files["sheets.json"]={});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"enumerateAttachments",value:c.mark((function e(){var t,n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,Et)||!U(this,St)){e.next=10;break}t=U(this,St).files,e.t0=c.keys(t);case 3:if((e.t1=e.t0()).done){e.next=10;break}if(n=e.t1.value,!String(n).match(/[\\\/]/gi)){e.next=8;break}return e.next=8,n;case 8:e.next=3;break;case 10:case"end":return e.stop()}}),e,this)}))},{key:"readContent",value:(r=n(c.mark((function e(t,n){var r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,Et)){e.next=8;break}if(r=U(this,Et).file(t),e.t0=r,!e.t0){e.next=7;break}return e.next=6,r.async(n||"blob");case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"writeContent",value:(t=n(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(U(this,Et)||q(this,Et,new vt)).file(t,n,{createFolders:!0}),U(this,_t).files[t]={};case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),l}(xt);function Ct(){return U(this,St)||q(this,St,{files:{}})}var Lt=["task-start","task-oct","task-quarter","task-3oct","task-half","task-5oct","task-3quar","task-7oct","task-done"],Nt={"priority-":function(e,t){e.priority=parseInt(String(t).substring(9))||0},"task-":function(e,t){var n=Lt.indexOf(t);e["task-marker"]=n>=0?n:"unknown"}},Mt={priority:function(e,t){var n=e.markers;n instanceof Array||(n=e.markers=[]),n.push({markerId:"priority-".concat(t)})},"task-marker":function(e,t){var n=e.markers;n instanceof Array||(n=e.markers=[]),n.push({markerId:Lt[t]||"task-unknown"})}};function It(e,t){return Ot.apply(this,arguments)}function Ot(){return Ot=n(c.mark((function e(t,n){var r,i,o,a,s;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.file("META-INF/manifest.xml"))){e.next=9;break}return e.next=4,r.async("text");case 4:r=e.sent,r=(new DOMParser).parseFromString(r,"text/xml"),a=null===(i=r)||void 0===i||null===(o=i.documentElement)||void 0===o?void 0:o.childNodes,s=n["file-entries"],a instanceof NodeList&&a.forEach((function(e){if("file-entry"===String(e.nodeName).toLocaleLowerCase()&&e.hasAttribute("full-path")){var t=String(e.getAttribute("full-path")||"").trim();if(!t.endsWith("/")){var n=String(e.getAttribute("media-type")||"").trim();s[t]=n?{"media-type":n}:{}}}}));case 9:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function Rt(e,t,n,r){"function"==typeof r||(r=void 0);var i=t.childNodes;return i instanceof NodeList&&i.forEach((function(t){var i=String(t.nodeName||"").toLocaleLowerCase(),o=i&&n&&n[i];o?"string"==typeof o?e[o]=t.textContent:"function"==typeof o&&o(e,t):r&&r(e,t)})),e}function Dt(e,t,n){for(var r in n){var i=n[r],o=i.fn;if("function"==typeof o?i=i.n:o=void 0,t.hasAttribute(i)){var a=String(t.getAttribute(i)||"");o&&(a=o(a)),e[r]=a}}return e}var zt={topic:function(e,t){e.push(jt(t))}},Bt={topics:function(e,t){Rt(e,t,zt)}},Pt={title:"title",children:function(e,t){e.children=Rt([],t,Bt)},"xhtml:img":function(e,t){e.image=Dt({},t,{src:"xhtml:src",width:{n:"svg:width",fn:parseInt},height:{n:"svg:height",fn:parseInt}})},labels:function(e,t){e.labels=Rt([],t,{label:function(e,t){e.push(String(t.textContent))}})},notes:function(e,t){e.notes=Rt({},t,{plain:function(e,t){e.plain&&e.plain.content?e.plain.content+="\r\n".concat(t.textContent):e.plain={content:t.textContent}}})},"marker-refs":function(e,t){Rt(void 0,t,void 0,(function(t,n){try{var r=String(n.getAttribute("marker-id")||"");for(var i in Nt)if(r.startsWith(i)){Nt[i](e,r);break}}catch(e){console.warn("Exception raised in parse xmind classic marker",e)}}))},position:function(e,t){e.position=Dt({},t,{x:{n:"svg:x",fn:parseInt},y:{n:"svg:y",fn:parseInt}})},extensions:function(e,t){e.extensions=Rt([],t,{extension:function(e,t){var n=Dt({},t,{provider:"provider"});n.content=[],Rt(void 0,t,{content:function(e,t){Rt(n.content,t,{},(function(e,t){e.push({name:t.tagName,content:t.textContent})}))}}),e.push(n)}})}};function jt(e){var t=Dt({},e,{id:"id",href:"xlink:href",structureClass:"structure-class"});return Rt(t,e,Pt),t}var Ft={"control-point":function(e,t){e[String(t.getAttribute("index")||"")]=Dt({},t,{amount:{n:"amount",fn:parseFloat},angle:{n:"angle",fn:parseFloat}})}},$t={title:"title","control-points":function(e,t){e.controlPoints=Rt({},t,Ft)}};function Ut(e,t){var n=Dt({},t,{id:"id",end1Id:"end1",end2Id:"end2"});Rt(n,t,$t),e.push(n)}var qt={topic:function(e,t){e.topic=jt(t)},title:"title",relationships:function(e,t){e.relationships=Rt([],t,{relationship:Ut})}};function Ht(e){var t=Dt({},e,{id:"id"});return Rt(t,e,qt),t}function Wt(e){return Vt.apply(this,arguments)}function Vt(){return Vt=n(c.mark((function e(t){var n,r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!(r=t.file("content.xml"))){e.next=8;break}return e.next=5,r.async("text");case 5:r=e.sent,Rt(void 0,(r=(new DOMParser).parseFromString(r,"text/xml")).documentElement,{sheet:function(e,t){return n.push(Ht(t))}});case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}function Gt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Yt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function Xt(e,t){Jt(e,t),t.add(e)}function Kt(e,t,n){Jt(e,t),t.set(e,n)}function Jt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qt(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var en=["extensions","summaries","structureClass","class","boundaries"],tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,on=new WeakSet,an=new WeakSet,sn=new WeakSet,cn=function(e){z(l,e);var t,r,i,o,a,s,u=Zt(l);function l(){var e;return I(this,l),Xt(B(e=u.call(this)),sn),Xt(B(e),an),Xt(B(e),on),Kt(B(e),rn,{get:un,set:void 0}),Kt(B(e),tn,{writable:!0,value:void 0}),Kt(B(e),nn,{writable:!0,value:void 0}),q(B(e),tn,null),q(B(e),nn,null),e}return R(l,[{key:"load",value:(s=n(c.mark((function e(t){var n,r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=q,e.t1=this,e.t2=tn,e.next=5,vt.loadAsync(t,{base64:"string"==typeof _source});case 5:if(e.t3=e.sent,!(n=(0,e.t0)(e.t1,e.t2,e.t3))){e.next=19;break}if(!(r=n.file("manifest.json"))){e.next=16;break}return e.next=12,r.async("text");case 12:r=e.sent,q(this,nn,JSON.parse(r)),e.next=19;break;case 16:return q(this,nn,{"file-entries":{}}),e.next=19,It(n,U(this,nn));case 19:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"save",value:(a=n(c.mark((function e(){var t;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,tn)){e.next=9;break}return U(this,tn).file("metadata.json")||U(this,tn).file("metadata.json",JSON.stringify({creator:{name:"felis",version:"1.0.0.202208"}})),(t=U(this,rn))["file-entries"]["metadata.json"]={},U(this,tn).file("manifest.json",JSON.stringify(t)),U(this,tn).file("content.xml",'<?xml version="1.0" encoding="UTF-8" standalone="no"?> <xmap-content xmlns="urn:xmind:xmap:xmlns:content:2.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" modified-by="bruce" timestamp="1503058545540" version="2.0"><sheet id="7abtd0ssc7n4pi1nu6i7b6lsdh" modified-by="bruce" theme="0kdeemiijde6nuk97e4t0vpp54" timestamp="1503058545540"><topic id="1vr0lcte2og4t2sopiogvdmifc" modified-by="bruce" structure-class="org.xmind.ui.logic.right" timestamp="1503058545417"><title>Warning  Attention Warnung </title><children><topics type="attached"><topic id="71h1aip2t1o8vvm0a41nausaar" modified-by="bruce" timestamp="1503058545423"><title svg:width="500">This file can not be opened normally, please do not modify and save, otherwise the contents will be permanently lost</title><children><topics type="attached"><topic id="428akmkh9a0tog6c91qj995qdl" modified-by="bruce" timestamp="1503058545427"><title>You can try using XMind 8 Update 3 or later version to open</title></topic></topics></children></topic><topic id="2kb87f8m38b3hnfhp450c7q35e" modified-by="bruce" timestamp="1503058545434"><title svg:width="500"></title><children><topics type="attached"><topic id="3m9hoo4a09n53ofl6fohdun99f" modified-by="bruce" timestamp="1503058545438"><title> XMind 8 Update 3 </title></topic></topics></children></topic><topic id="7r3r4617hvh931ot9obi595r8f" modified-by="bruce" timestamp="1503058545444"><title svg:width="500"></title><children><topics type="attached"><topic id="691pgka6gmgpgkacaa0h3f1hjb" modified-by="bruce" timestamp="1503058545448"><title> XMind 8 Update 3 </title></topic></topics></children></topic><topic id="0f2e3rpkfahg4spg4nda946r0b" modified-by="bruce" timestamp="1503058545453"><title svg:width="500"></title><children><topics type="attached"><topic id="4vuubta53ksc1falk46mevge0t" modified-by="bruce" timestamp="1503058545457"><title>XMind 8 Update 3 </title></topic></topics></children></topic><topic id="70n9i4u3lb89sq9l1m1bs255j5" modified-by="bruce" timestamp="1503058545463"><title svg:width="500">Datei kann nicht richtig geffnet werden. Bitte ndern Sie diese Datei nicht und speichern Sie sie, sonst wird die Datei endgltig gelscht werden.</title><children><topics type="attached"><topic id="1qpc5ee298p2sqeqbinpca46b7" modified-by="bruce" timestamp="1503058545466"><title svg:width="500">Bitte versuchen Sie, diese Datei mit XMind 8 Update 3 oder spter zu ffnen.</title></topic></topics></children></topic><topic id="4dmes10uc19pq7enu8sc4bmvif" modified-by="bruce" timestamp="1503058545473"><title svg:width="500">Ce fichier ne peut pas ouvert normalement, veuillez le rdiger et sauvegarder, sinon le fichier sera perdu en permanence.</title><children><topics type="attached"><topic id="5f0rivgubii2launodiln7sdkt" modified-by="bruce" timestamp="1503058545476"><title svg:width="500">Vous pouvez essayer d\'ouvrir avec XMind 8 Update 3 ou avec une version plus rcente.</title></topic></topics></children></topic><topic id="10pn1os1sgfsnqa8akabom5pej" modified-by="bruce" timestamp="1503058545481"><title svg:width="500">    ,    .      !</title><children><topics type="attached"><topic id="0l2nr0fq3em22rctapkj46ue58" modified-by="bruce" timestamp="1503058545484"><title svg:width="500">XMind 8 Update 3    </title></topic></topics></children></topic></topics></children><extensions><extension provider="org.xmind.ui.map.unbalanced"><content><right-number>-1</right-number></content></extension></extensions></topic><title>Sheet 1</title></sheet></xmap-content>'),e.next=8,U(this,tn).generateAsync({type:"blob",mimeType:"application/xmind",compression:"DEFLATE",compressionOptions:{level:9}});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"readSheets",value:(o=n(c.mark((function e(){var t;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,tn)){e.next=11;break}if(!(t=U(this,tn).file("content.json"))){e.next=8;break}return e.next=5,Qt(this,sn,pn).call(this,t);case 5:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,Wt(U(this,tn));case 11:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"writeSheets",value:(i=n(c.mark((function e(t){var n,r=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t instanceof Array&&(n=[],t.forEach((function(e){var t={},i={id:e.id,title:e.title,rootTopic:t};n.push(i),Qt(r,on,ln).call(r,t,e.topic)})),(U(this,tn)||q(this,tn,new vt)).file("content.json",JSON.stringify(n)),U(this,rn)["file-entries"]["content.json"]={});case 1:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"enumerateAttachments",value:c.mark((function e(){var t,n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,tn)||!U(this,nn)){e.next=10;break}t=U(this,nn)["file-entries"],e.t0=c.keys(t);case 3:if((e.t1=e.t0()).done){e.next=10;break}if(n=e.t1.value,!String(n).match(/[\\\/]/gi)){e.next=8;break}return e.next=8,n;case 8:e.next=3;break;case 10:case"end":return e.stop()}}),e,this)}))},{key:"readContent",value:(r=n(c.mark((function e(t,n){var r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U(this,tn)){e.next=8;break}if(r=U(this,tn).file(t),e.t0=r,!e.t0){e.next=7;break}return e.next=6,r.async(n||"blob");case 6:e.t0=e.sent;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"writeContent",value:(t=n(c.mark((function e(t,n){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(U(this,tn)||q(this,tn,new vt)).file(t,n,{createFolders:!0}),U(this,rn)["file-entries"][t]={};case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),l}(xt);function un(){return U(this,nn)||q(this,nn,{"file-entries":{}})}function ln(e,t){for(var n in t)if("children"===n){var r,i=[],o=Gt(t.children);try{for(o.s();!(r=o.n()).done;){var a=r.value,s={};Qt(this,on,ln).call(this,s,a),i.push(s)}}catch(e){o.e(e)}finally{o.f()}e.children={attached:i}}else{var c=Mt[n];"function"==typeof c?c(e,t[n]):e[n]=t[n]}}function fn(e,t){var n=this;for(var r in t)"children"===r?function(){var r=[],i=t.children.attached;i instanceof Array&&i.forEach((function(e){var t={};Qt(n,an,fn).call(n,t,e),r.push(t)})),e.children=r}():"markers"===r?t.markers instanceof Array&&t.markers.forEach((function(t){var n=String(t.markerId);for(var r in Nt)if(n.startsWith(r)){Nt[r](e,n);break}})):en.includes(r)||(e[r]=t[r])}function pn(e){return hn.apply(this,arguments)}function hn(){return(hn=n(c.mark((function e(t){var n,r,i=this;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.async("text");case 2:return n=e.sent,n=JSON.parse(n),r=[],n instanceof Array&&n.forEach((function(e){var t={},n={id:e.id,title:e.title,topic:t};Qt(i,an,fn).call(i,t,e.rootTopic),r.push(n)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mn=new Map([[".felis",{name:"Felis Mind",constructor:Tt}],[".xmind",{name:"XMind",image:"./assets/icon/xmind.png",constructor:cn}]]);function gn(e){return mn.get(e)}function yn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function xn(e,t,n,r){return En(e,t),An(n,"set"),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,n,r),r}function kn(e,t,n){return En(e,t),An(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function An(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function En(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}gn.enumerate=c.mark((function e(){var t,n,r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=dn(mn),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value,e.next=7,{key:r[0],provider:r[1]};case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})),gn.register=function(e,t){(e=String(e||"").trim())&&t&&t.constructor&&(t.name||(t.name=e),mn.has(e)&&mn.delete(e),mn.set(e,t))},gn.unregister=function(e){mn.has(e)&&mn.delete(e)};var Sn="Empty Topic",_n="Untitled Sheet",Tn={title:Sn},Cn={title:_n,topic:Tn},Ln=function(e){z(i,e);var t,r=wn(i);function i(e){return I(this,i),r.call(this,e)}return R(i,[{key:"newDocument",value:function(e){var t=this,r=Array.prototype.slice.call(arguments,1);return y.exports.MindmapDocument.prototype.newDocument.call(this,n(c.mark((function n(){var o,a;return c.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o="function"==typeof e&&e.apply(t,r),n.t0=o instanceof Promise,!n.t0){n.next=5;break}return n.next=5,o;case 5:if(t.sheetCount<=0)for(a in kn(i,i,Nn).forEach((function(e){t.addSheet(F({},e))})),kn(i,i,In))t.setAttachment(a,kn(i,i,In)[a]);$felisApp.env.fireEvent("topic-event-new-document",{doc:t});case 7:case"end":return n.stop()}}),n)}))))}}],[{key:"DefaultSheetTemplate",get:function(){return kn(this,i,Nn)[0]}},{key:"DefaultTopicTemplate",get:function(){return kn(this,i,Mn)}},{key:"DefaultTemplateSheets",get:function(){return kn(this,i,Nn)}},{key:"DefaultTemplateAttachments",get:function(){return kn(this,i,In)}},{key:"SetTemplate",value:(t=n(c.mark((function e(t){var n,r,o,a,s,u;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof xt&&"mindmap-template"===t.type)){e.next=42;break}return e.next=3,t.readSheets();case 3:(n=e.sent)instanceof Array||(n=[Cn]),n.length<=0&&n.push(Cn),xn(this,i,Nn,n),xn(this,i,In,{}),r=yn(t.enumerateAttachments()),e.prev=9,r.s();case 11:if((o=r.n()).done){e.next=20;break}if(a=o.value,String(a).match(/^[Tt]humbnails[\\\/]/gi)){e.next=18;break}return e.next=16,t.readContent(a);case 16:(s=e.sent)&&(kn(this,i,In)[a]=s);case 18:e.next=11;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),r.e(e.t0);case 25:return e.prev=25,r.f(),e.finish(25);case 28:return e.prev=28,e.next=31,t.readContent("default-topic.json","text");case 31:(u=e.sent)&&(u=JSON.parse(u)),xn(this,i,Mn,u&&u.title?u:Tn),e.next=40;break;case 36:e.prev=36,e.t1=e.catch(28),console.warn("Exception in read default topic",e.t1),xn(this,i,Mn,Tn);case 40:e.next=47;break;case 42:Cn.title=N(_n),Tn.title=N(Sn),xn(this,i,Nn,[Cn]),xn(this,i,Mn,Tn),xn(this,i,In,{});case 47:case"end":return e.stop()}}),e,this,[[9,22,25,28],[28,36]])}))),function(e){return t.apply(this,arguments)})},{key:"SetTemplateDetail",value:function(e,t,n){void 0!==e&&xn(this,i,Nn,e instanceof Array?e:[Cn]),void 0!==t&&xn(this,i,Mn,t||Tn),void 0!==n&&xn(this,i,In,n||{})}}]),i}(y.exports.MindmapDocument),Nn={writable:!0,value:[Cn]},Mn={writable:!0,value:Tn},In={writable:!0,value:{}};function On(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function Rn(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Dn=new WeakMap,zn=function(e){z(n,e);var t=On(n);function n(){var e;return I(this,n),Rn(B(e=t.call(this)),Dn,{writable:!0,value:void 0}),Object.defineProperty(B(e),"dragContext",{get:function(){return U(B(e),Dn)},set:function(t){q(B(e),Dn,t),!t&&e.fireEvent("topic-event-end-dragdrop")},configurable:!1}),q(B(e),Dn,void 0),e}return R(n)}(y.exports.MindmapEnvironment);function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pn=Symbol("season-tip-private"),jn=Symbol("season-tip-resolve"),Fn=Symbol("season-tip-options"),$n=Symbol("season-tip-timerid"),Un=Symbol("season-tip-result"),qn={center:"center",left:"flex-start",right:"flex-end",top:"flex-start",bottom:"flex-end",start:"flex-start",end:"flex-end"};function Hn(e){var t=m(document.body.querySelectorAll("*")).reduce((function(e,t){return Math.max(e,Number(window.getComputedStyle(t).zIndex)||0)}),0)+1;Number(e.style.zIndex)===t-1&&1!==t||(e.style.zIndex=t)}var Wn={transition:{Start:"transitionstart",Run:"transitionrun",Cancel:"transitioncancel",End:"transitionend"},OTransition:{Start:"oTransitionStart",Run:"oTransitionRun",Cancel:"oTransitionCancel",End:"oTransitionEnd"},MozTransition:{Start:"transitionstart",Run:"transitionrun",Cancel:"transitioncancel",End:"transitionend"},WebkitTransition:{Start:"webkitTransitionStart",Run:"webkitTransitionRun",Cancel:"webkitTransitionCancel",End:"webkitTransitionEnd"}},Vn=void 0;function Gn(e){var t=this;this[Un]=e;var n=this[Pn],r=this[Fn],i=function(){"function"==typeof n.remove&&Promise.resolve().then((function(){n.remove(),"function"==typeof t[jn]&&(t[jn](e),delete t[jn])})),t[$n]&&(clearTimeout(t[$n]),t[$n]=void 0);var i=r&&r.onclose;"function"==typeof i&&i(t,e)};n instanceof Element&&n.isConnected&&!n.classList.contains("-season-tip-fadeout")&&(Vn&&0!==r.fadeOutTime?(isNaN(r.fadeOutTime)||n.setAttribute("style","--fadeout-time:".concat(r.fadeOutTime,"s;").concat(n.getAttribute("style"))),n.className="".concat(n.className," -season-tip-fadeout"),n.addEventListener(Vn.End,i,{once:!0}),n.addEventListener(Vn.Cancel,i,{once:!0})):i())}document.addEventListener("readystatechange",(function(){if("complete"===document.readyState)for(var e in Wn)if(void 0!==document.body.style[e]){Vn=Wn[e];break}}));var Yn="".concat("season-tip-type",'="tip"'),Zn='<div class="-season-tip-container" '.concat(Yn," />");function Xn(e,t){if("object"!==k(t=t||{type:"normal"})&&(t={type:String(t)}),!(this instanceof Xn)){var n=new Xn(e,t);return n&&n.show(),n}var r=document.createElement("div");if(r&&(this[Pn]=r,this[Fn]=t,r.setAttribute("class","-season-tip-box"),r.setAttribute("d-season-tip-type",t.type||"normal"),t.customTag&&r.setAttribute(t.customTag,t.customTag),r.insertAdjacentHTML("beforeend",'<div class="-season-tip-icon"></div><div class="-season-tip-text">'.concat(String(e||"").replace("\n","<br />"),"</div>")),t.closable)){r.insertAdjacentHTML("beforeend",'<div class="-season-tip-close-button" />');var i=r.querySelector(".-season-tip-close-button");i&&i.addEventListener("click",Gn.bind(this))}}Xn.prototype={close:Gn,show:function(e){var t=this[Pn];if(this instanceof Xn&&t&&!t.isConnected){e instanceof HTMLElement||(e=document.body);var n=e.querySelector("[".concat(Yn,"]"));if(n||(e.insertAdjacentHTML("afterbegin",Zn),n=e.querySelector("[".concat(Yn,"]"))),n){Hn(n),n.insertAdjacentElement("afterbegin",t),Promise.resolve().then((function(){return t.className="-season-tip-box -season-tip-fadein"}));var r=Number(this[Fn].timeout)||(this[Fn].closable?0:3e3);r&&(this[$n]=setTimeout(Gn.bind(this),r))}}}};var Kn={info:'<svg viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" width="26" height="26" stroke="#40a9ff" stroke-width="4"><g><path d="M47.979 10C27.0038 10 10 27.0038 10 47.979 10 68.9542 27.0038 85.958 47.979 85.958 68.9542 85.958 85.958 68.9542 85.958 47.979 85.9674 27.0132 68.9788 10.0094 48.013 10 48.0017 10 47.9903 10 47.979 10ZM47.979 83.958C28.1083 83.958 12 67.8497 12 47.979 12 28.1083 28.1083 12 47.979 12 67.8497 12 83.958 28.1083 83.958 47.979 83.9354 67.8403 67.8403 83.9354 47.979 83.958Z"/><path d="M49 35 41 35 41 37 47 37 47 67 40 67 40 69 56 69 56 67 49 67 49 35Z"/><circle cx="46.814" cy="26.5" r="2.25"/></g></svg>',ok:'<svg viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" width="26" height="26" stroke="#0b0" stroke-width="4"><g><path d="M48 10C27.0071 9.99393 9.98408 27.0071 9.978 48 9.97193 68.9929 26.9851 86.0159 47.978 86.022 68.9709 86.0281 85.9939 69.0149 86 48.022 86 48.018 86 48.014 86 48.01 86.011 27.0287 69.0113 10.011 48.03 10 48.02 10 48.01 10 48 10ZM48 84.021C28.1117 84.0271 11.9841 67.9093 11.978 48.021 11.9719 28.1327 28.0897 12.0051 47.978 11.999 67.8663 11.9929 83.9939 28.1107 84 47.999 84 48.0037 84 48.0083 84 48.013 83.9802 67.8888 67.8758 83.9981 48 84.024Z"/><path d="M41.5 60.086 29 47.586 27.586 49 41.5 62.914 70.914 33.5 69.5 32.086 41.5 60.086Z"/></g></svg>',error:'<svg width="26" height="26" viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" stroke="red" stroke-width="4"><g><path d="M48 10C27.0071 9.99393 9.98408 27.0071 9.978 48 9.97193 68.9929 26.9851 86.0159 47.978 86.022 68.9709 86.0281 85.9939 69.0149 86 48.022 86 48.018 86 48.014 86 48.01 86.011 27.0287 69.0113 10.011 48.03 10 48.02 10 48.01 10 48 10ZM48 84.021C28.1117 84.0271 11.9841 67.9093 11.978 48.021 11.9719 28.1327 28.0897 12.0051 47.978 11.999 67.8663 11.9929 83.9939 28.1107 84 47.999 84 48.0037 84 48.0083 84 48.013 83.9802 67.8888 67.8758 83.9981 48 84.024Z"/><path d="M62.041 32.557 47.998 46.6 33.955 32.557 32.541 33.971 46.584 48.014 32.541 62.057 33.955 63.471 47.998 49.428 62.041 63.471 63.455 62.057 49.412 48.014 63.455 33.971 62.041 32.557Z"/></g></svg>',question:'<svg viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" width="26" height="26" stroke="green" stroke-width="4"><g><path d="M47.979 10C27.0038 10 10 27.0038 10 47.979 10 68.9542 27.0038 85.958 47.979 85.958 68.9542 85.958 85.958 68.9542 85.958 47.979 85.9674 27.0132 68.9788 10.0094 48.013 10 48.0017 10 47.9903 10 47.979 10ZM47.979 83.958C28.1083 83.958 12 67.8497 12 47.979 12 28.1083 28.1083 12 47.979 12 67.8497 12 83.958 28.1083 83.958 47.979 83.9354 67.8403 67.8403 83.9354 47.979 83.958Z"/><path d="M49.345 27.079C42.7414 26.3273 36.7789 31.0712 36.0272 37.6748 35.9759 38.1257 35.9501 38.5792 35.95 39.033L37.95 39.033C37.9522 33.4936 42.4446 29.0048 47.984 29.007 53.5235 29.0093 58.0122 33.5017 58.01 39.0411 58.0086 42.4915 56.2337 45.6991 53.311 47.533 49.4115 49.9087 47.0166 54.131 46.979 58.697L48.979 58.697C49.0205 54.819 51.0627 51.2376 54.379 49.227 60.0072 45.6952 61.7066 38.2696 58.1748 32.6414 56.2307 29.5434 52.9829 27.4979 49.349 27.083Z"/><circle cx="48" cy="67" r="2"/></g></svg>',warn:'<svg viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg" width="26" height="26" stroke="#faad14" stroke-width="4"><g><path d="M90.6 80 51.5 12C50.4365 10.0946 48.0298 9.41212 46.1244 10.4756 45.4848 10.8326 44.957 11.3604 44.6 12L5.4 80C4.30371 81.9275 4.9775 84.3787 6.90497 85.475 7.5129 85.8208 8.20061 86.0017 8.9 86L87.1 86C89.3174 86.0055 91.1195 84.2124 91.125 81.995 91.1268 81.2956 90.9458 80.6079 90.6 80ZM88.839 83.019C88.4799 83.637 87.8146 84.0123 87.1 84L8.9 84C8.18507 84.0125 7.5195 83.6367 7.161 83.018 6.78807 82.3997 6.77737 81.6284 7.133 81L46.348 12.971C46.8768 12.0316 48.0671 11.6987 49.0065 12.2276 49.3275 12.4082 49.5908 12.676 49.766 13L88.852 80.971C89.2186 81.6057 89.2137 82.389 88.839 83.019Z"/><path d="M48 73.98C47.3953 73.9976 46.8116 73.7577 46.394 73.32 45.9625 72.8895 45.7274 72.3003 45.744 71.691 45.7194 71.0835 45.953 70.4939 46.387 70.068 46.8156 69.6456 47.3985 69.4172 48 69.436 48.6136 69.4208 49.208 69.6503 49.652 70.074 50.1 70.4898 50.3446 71.0802 50.322 71.691 50.3367 72.3033 50.0911 72.8932 49.646 73.314 49.212 73.7526 48.6168 73.9934 48 73.98Z"/><path d="M46.901 62.6 46.578 30.787 49.289 30.787 48.966 62.6 46.901 62.6Z"/></g></svg>'};function Jn(e,t){var n=this;if("object"!==k(t=t||{})&&(t=t instanceof Array?{buttons:t}:{icon:String(t)}),void 0!==arguments[2]&&(t.buttons=arguments[2]),t.buttons?t.buttons instanceof Array||(t.buttons=[String(t.buttons)]):t.buttons=["Close"],Number(t.default)||(t.default=0),!(this instanceof Jn)){var r=new Jn(e,t);return r.show()}Object.defineProperty(this,"result",{get:function(){return n[$result]}});var i=document.createElement("div");i&&(this[Pn]=i,this[Fn]=t,i.setAttribute("class","-season-tip-mask-container"),t.customTag&&i.setAttribute(t.customTag,t.customTag),i.insertAdjacentHTML("beforeend",'<div class="-season-tip-dialog -season-confirm-box">\n                    <div class="-season-confirm-info-line">\n                        '.concat(Kn[t.icon]||"",'<div class="-season-confirm-info">').concat(String(e).replace("\n","<br />"),'</div>\n                    </div>\n                    <div class="-season-tip-button-bar" ').concat(t.buttonAlign?'style="justify-content:'.concat(qn[t.buttonAlign]||t.buttonAlign,';"'):"",">\n                        ").concat(t.buttons?t.buttons.map((function(e,n){return'<div class="-season-tip-button '.concat(n===t.default?"-season-tip-button-default":"",'" d-index="').concat(n,'">').concat(e,"</div>")})).join(""):"","\n                    </div>\n                </div>")))}function Qn(e,t,n,r){t.textContent="".concat(n," (").concat(r,")"),r?this[$n]=setTimeout(Qn,1e3,e,t,n,r-1):(this[$n]=void 0,e.close(Number(t.getAttribute("d-index"))))}function er(e,t,n){var r=this,i={};if("string"==typeof e?i.title=e:1===arguments.length&&Object.assign(i,e),"string"==typeof t?i.tip=t:2===arguments.length&&Object.assign(i,t),n&&Object.assign(i,n),!(this instanceof er)){var o=new er(i);return o.show(i.position)}Object.defineProperty(this,"result",{get:function(){return r[Un]}});var a=document.createElement("div");a&&(this[Pn]=a,this[Fn]=i,a.setAttribute("class","-season-tip-mask-container"),i.customTag&&a.setAttribute(i.customTag,i.customTag),isNaN(i.fadeOutTime)&&(i.fadeOutTime=.3),a.insertAdjacentHTML("beforeend",'<div class="-season-tip-dialog">\n                    '.concat(i.title?'<h4 style="margin-top:0">'.concat(i.title,"</h4>"):"",'\n                    <input class="-season-tip-input" type="').concat(i.inputType||"text",'" placeholder="').concat(i.tip||"",'" value="').concat(void 0===i.default?"":i.default,'" />\n                    <div class="-season-tip-button-bar" ').concat(i.buttonAlign?'style="justify-content:'.concat(qn[i.buttonAlign]||i.buttonAlign,';"'):"",'>\n                        <div class="-season-tip-button -season-tip-button-default" d-button-submit="1">').concat(i.submitText||"Submit","</div>\n                        ").concat(i.hideCancel||i.forbitCancel?"":'<div class="-season-tip-button" d-button-cancel="1">'.concat(i.cancelText||"Cancel","</div>"),"\n                    </div>\n                </div>")))}Jn.prototype={close:Gn,show:function(e){var t=this;return new Promise((function(n,r){var i=t[Pn];if(t instanceof Jn&&i&&!i.isConnected){t[jn]=n,e instanceof HTMLElement||(e=document.body),Hn(i),e.insertAdjacentElement("afterbegin",i),Promise.resolve().then((function(){return i.className="-season-tip-mask-container -season-tip-fadein"})),m(i.querySelectorAll(".-season-tip-button")).forEach((function(e){e.addEventListener("click",(function(e){t.close(Number(e.target.getAttribute("d-index")))}),{once:!0})}));var o=Number(t[Fn].timeout),a=i.querySelector(".-season-tip-button-default");if(o&&a){var s=a.textContent;a.textContent="".concat(s," (").concat(o,")"),t[$n]=setTimeout(Qn,1e3,t,a,s,o-1)}}else r(new Error("Reactive"))}))}},er.prototype={close:Gn,show:function(e){var t=this;return new Promise((function(n,r){var i=t[Pn];if(t instanceof er&&i&&!i.isConnected){var o=t[Fn];if(t[jn]=n,t[Un]=void 0,o.hideMask&&i.setAttribute("style","background: none !important;"),e||(e=o.position),e){var a=i.querySelector(".-season-tip-dialog");a&&a.setAttribute("style","\n                        position: absolute;\n                        left: ".concat(isNaN(e.x)?"auto":e.x+"px",";\n                        top: ").concat(isNaN(e.y)?"auto":e.y+"px",";\n                        right: ").concat(isNaN(e.rx)?"auto":e.rx+"px",";\n                        bottom: ").concat(isNaN(e.ry)?"auto":e.ry+"px",";\n                    "))}Hn(i),document.body.insertAdjacentElement("beforeend",i),Promise.resolve().then((function(){return i.className="-season-tip-mask-container -season-tip-fadein"}));var s=i.querySelector("[d-button-submit]"),c=function(){var e=i.querySelector("input");t.close(e?String(e.value):void 0)};s&&s.addEventListener("click",c,{once:!0}),(s=i.querySelector("[d-button-cancel]"))&&!o.forbitCancel&&s.addEventListener("click",(function(e){t.close(void 0)}),{once:!0}),o.forbitCancel||i.addEventListener("click",(function(e){e.target===i&&t.close(void 0)}),{once:!0});var u=i.querySelector("input");if(u){u.addEventListener("keydown",(function e(t){13===t.keyCode&&(c(),t.target.removeEventListener("keydown",e))})),u.value=o.default||"",u.select(),u.focus()}}else r(new Error("Reactive"))}))}};var tr=Symbol("season.tip.popup.hasimage");function nr(e,t,n){var r=this;e instanceof Array||(e=[String(e)]);var i={};if(t instanceof Element?i.refElement=t:2===arguments.length&&Object.assign(i,t),n&&Object.assign(i,n),!(this instanceof nr)){var o=new nr(e,i);return o.show(i.refElement)}Object.defineProperties(this,{result:{get:function(){return r[Un]}},count:{value:e.length,writable:!1}});var a=document.createElement("div");a&&(this[Pn]=a,this[Fn]=i,a.setAttribute("class","-season-tip-dialog -season-tip-popup-box"),a.setAttribute("tabIndex","0"),i.customTag&&a.setAttribute(i.customTag,i.customTag),isNaN(i.fadeOutTime)&&(i.fadeOutTime=.1),i.style&&a.setAttribute("style",i.style),this[tr]=[!1].concat(m(e)).reduce((function(e,t){return e||t&&t.image})),a.insertAdjacentHTML("beforeend",e.map((function(e,t){return null!=e?'<a d-select-index="'.concat(t,'">\n                                ').concat("string"!=typeof e&&e.image?'<img src="'.concat(e.image,'" ').concat(e.imageInvert?'d-image-invert="1"':""," />"):"","<span>").concat(e.text||String(e),"</span>\n                               </a>"):'<div d-separate-horizontal="1"></div>'})).join("")))}function rr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function or(e,t){var n=this;if(t=t||{},!(this instanceof or))return new or(e,t).show();var r=document.createElement("div");if(Object.defineProperties(this,{result:{get:function(){return n[$result]},set:function(e){return n[$result]=e}},options:{get:function(){return t}},root:{get:function(){return r}}}),r){if(this[Pn]=r,this[Fn]=t,r.setAttribute("class","-season-tip-mask-container"),t.maskAttrs)for(var i in t.maskAttrs)r.setAttribute(i,t.maskAttrs[i]);e instanceof HTMLElement?r.insertAdjacentElement("afterbegin",e):r.insertAdjacentHTML("afterbegin",String(e));var o=r.lastElementChild;o&&o.classList.add("-season-tip-dialog"),r.addEventListener("click",(function(e){if(e.target===r)t.hasOwnProperty("blurToClose")&&n.close(t.blurToClose);else{var i,o=rr(e.composedPath());try{for(o.s();!(i=o.n()).done;){var a=i.value;if(a.hasAttribute("d-click")){var s=t[a.getAttribute("d-click")];if("function"==typeof s){var c=JSON.parse("[".concat(a.getAttribute("d-click-args"),"]"));c.unshift(n,a),s.apply(n,c)}break}if(a===r)break}}catch(e){o.e(e)}finally{o.f()}}})),"function"==typeof t.onInitialize&&t.onInitialize(this)}}nr.prototype={close:Gn,show:function(e){var t=this;return new Promise((function(n,r){var i=t[Pn];if(t instanceof nr&&i&&!i.isConnected){var o=t[Fn];t[jn]=n,t[Un]=void 0,document.body.insertAdjacentElement("beforeend",i),Promise.resolve().then((function(){return i.className="-season-tip-dialog -season-tip-popup-box -season-tip-fadein"})),i.addEventListener("blur",(function(e){t.close(void 0)}),{once:!0}),m(i.querySelectorAll("[d-select-index]")).forEach((function(e){e.addEventListener("click",(function(n){t.close(Number(e.getAttribute("d-select-index")))}))}));var a=i.querySelector("[d-select-index] span");if(a=t[tr]&&a?"".concat(parseInt(a.getBoundingClientRect().height),"px"):"0px",i.style.setProperty("--image-size",a),e||(e=o.refElement),e instanceof Element){var s=i.getBoundingClientRect(),c=s.width,u=s.height,l=e.getBoundingClientRect(),f=l.left,p=l.right,h=l.top,d=l.bottom,v=window,g=v.innerWidth,y=v.innerHeight,b=String(o.position).toLowerCase().split("&"),w="auto",x="auto",k="auto",A="auto";b.includes("top")?A=h:b.includes("top-align")?k=h:b.includes("bottom-align")?A=d:k=d,Number(A)&&(A-u<0?(A="auto",k=0):A="".concat(y-A,"px")),Number(k)&&(k+u>y&&(k=Math.max(0,y-u)),k="".concat(k,"px")),b.includes("left")?x=f:b.includes("right")?w=p:b.includes("right-align")?x=p:w=f,Number(x)&&(x-c<0?(x="auto",w=0):x="".concat(g-x,"px")),Number(w)&&(w+c>g&&(w=Math.max(0,g-c)),w="".concat(w,"px")),i.setAttribute("style","left:".concat(w,";right:").concat(x,";top:").concat(k,";bottom:").concat(A,";--image-size:").concat(a,";").concat(o.style||""))}Hn(i),i.focus()}else r(new Error("Reactive"))}))}},nr.bindElement=function(e,t,n,r,i){e instanceof Element&&e.addEventListener(t||"click",(function(){nr(r,e,i).then("function"==typeof n?n:console.log)}))},or.prototype={close:Gn,show:function(e){var t=this;return new Promise((function(n,r){var i=t[Pn];t instanceof or&&i&&!i.isConnected?(t[jn]=n,e instanceof HTMLElement||(e=document.body),Hn(i),e.insertAdjacentElement("beforeend",i),Promise.resolve().then((function(){return i.className="-season-tip-mask-container -season-tip-fadein"}))):r(new Error("Reactive"))}))}};var ar=Jn;function sr(e){if(e){var t,n,r=String(e).split(",");r.length>1?(t={type:r[0].match(/:(.*?);/)[1]},n=atob(r[1])):(t={},n=r[0]?atob(r[0]):"");for(var i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],t)}}function cr(e,t){return Promise.resolve(e instanceof Blob?new Promise((function(n,r){try{var i=new FileReader;i.onload=function(e){try{var i=e.target.result;"function"==typeof t&&(i=t(i)),n(i)}catch(e){r(e)}},i.onerror=function(){return r()},i.readAsArrayBuffer(e)}catch(e){r(e)}})):void 0)}function ur(e,t){if(e){var n=document.createElement("a");if(n){if(n.href=e,n.rel="noopener",t)for(var r in t)n[r]=t[r];n.click()}}}function lr(e){return new Promise((function(t,n){try{var r=document.createElement("input");r.type="file",e&&(r.accept=e),r.addEventListener("change",(function(){var e=r.files;e.length>0?t(e[0]):n(0)})),r.click()}catch(e){n(e)}}))}var fr={version:1,stores:{configuration:null}},pr={exports:{}};!function(e,t){e.exports=function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function i(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,r(e,t,"get"))}function o(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,r(e,t,"set"),n),n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e,t,n){return p=f()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i},p.apply(null,arguments)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v={exports:{}},m={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(m),function(e){var t=m.exports.default;function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},i=Object.prototype,o=i.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof d?t:d,o=Object.create(i.prototype),a=new _(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=p(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var h={};function d(){}function v(){}function m(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(T([])));b&&b!==i&&o.call(b,s)&&(g=b);var w=m.prototype=d.prototype=Object.create(g);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,n){function r(i,a,s,c){var u=p(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):n.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,c)}))}c(u.arg)}var i;this._invoke=function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}}function A(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=m,l(w,"constructor",m),l(m,"constructor",v),v.displayName=l(m,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},r.awrap=function(e){return{__await:e}},x(k.prototype),l(k.prototype,c,(function(){return this})),r.AsyncIterator=k,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var a=new k(f(e,t,n,i),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(w),l(w,u,"Generator"),l(w,s,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},r.values=T,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(v);var g,y=v.exports(),b=y;try{regeneratorRuntime=y}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=y:Function("r","regeneratorRuntime = r")(y)}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function A(e,t,n){E(e,t),t.set(e,n)}function E(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function S(e,t,n){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),n}var _=Symbol("Felis.Web.DB.Transaction.End"),T=Symbol("Felis.Web.DB.Clear.Index");function C(e,t){if(this instanceof C){var n;t instanceof Error&&(n=t,t=t.message);var r=Reflect.construct(Error,[t].concat(d(Array.prototype.slice(2))));return Object.defineProperties(r,{$code:{value:e,writable:!1,configurable:!1,enumerable:!0},$stackError:{value:n,writable:!1,configurable:!1,enumerable:!0}}),Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,C),r}return e instanceof C?e:e instanceof Error?p(C,[-1].concat(Array.prototype.slice.call(arguments))):p(C,Array.prototype.slice.call(arguments))}var L=Number.MAX_SAFE_INTEGER;function N(e,t,n){if("function"!=typeof this.filter||this.filter(e,t))return"function"==typeof this.processor&&this.processor(e,t,n),!0}function M(e,t,n){if(N.call(this,e,t,n))throw null}function I(e,t){return O.apply(this,arguments)}function O(){return(O=u(b.mark((function e(t,n){var r;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this){e.next=5;break}return e.next=3,n;case 3:this((r=e.sent).value,r.key,null,r.error);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function R(e){var t=e.sourceList[e.index++];if(!t||"object"!==s(t))throw C(6,"Expect ${...} after where");var n=e.targeList.at(-1),r=n&&n.args||[];if("function"==typeof t.arg){var i=r[0];"function"!=typeof i&&(i=N);var o={filter:t.arg,oriFn:i};(i=i.bind(o)).$bindObj=o,r[0]=i}else r.push(t.arg);e.stateLevel=4}function D(e){var t=e.sourceList[e.index++];if(!t||"function"!=typeof t.arg)throw C(7,"Expect ${function} after do");var n=e.targeList.at(-1);if("forEach"===n.action){var r=n&&n.args||[],i=r[0];if("function"==typeof i){var o=i.$bindObj||{},a=o.oriFn||i;o.processor=t.arg,r[0]=a.bind(o)}else r[0]=t.arg}else e.targeList.push({action:"request",args:[I.bind(t.arg)]});e.stateLevel=L}var z=(a(g={},0,{"*":function(e){e.targeList.push({action:"forEach",args:[null]}),e.stateLevel=1},count:function(e){e.targeList.push({action:"count",args:[]}),e.stateLevel=1},first:function(e){e.targeList.push({action:"forEach",args:[M]}),e.stateLevel=1}}),a(g,1,{in:function(e){e.stateLevel=2},where:R,do:D}),a(g,2,{index:function(e){var t=e.sourceList[e.index++];t&&"object"===s(t)&&(t=t.arg||String(t.arg)),e.targeList.unshift({action:"index",args:[t]}),e.stateLevel=3}}),a(g,3,{where:R,do:D}),a(g,4,{asc:function(e){var t=e.targeList.at(-1),n=t&&t.args||[];"unique"===e.sourceList[e.index]?(n.push("nextunique"),e.index+=1):n.push("next"),e.stateLevel=5},desc:function(e){var t=e.targeList.at(-1),n=t&&t.args||[];"unique"===e.sourceList[e.index]?(n.push("prevunique"),e.index+=1):n.push("prev"),e.stateLevel=5},do:D}),a(g,5,{do:D}),g),B=new WeakMap,P=new WeakMap,j=new WeakMap,F=function(){function t(n,r,a){var s=this;e(this,t),A(this,B,{writable:!0,value:void 0}),A(this,P,{writable:!0,value:void 0}),A(this,j,{writable:!0,value:void 0}),a="rw"===a?"readwrite":"readonly",o(this,B,void 0),o(this,P,void 0),o(this,j,void 0),Object.defineProperties(this,{request:{writable:!1,configurable:!1,enumerable:!1,value:function(e,c){if("function"==typeof e){var l=void 0;o(s,B,Promise.resolve(i(s,B)).then((function(e){return!c&&e&&e.objectStore instanceof IDBObjectStore&&!e.objectStore.transaction[_]?e:Promise.resolve(Promise.resolve(n).then((function(e){var t=e.transaction(r,a);if(t){var n=function(){return t[_]=!0};return t.addEventListener("complete",n),t.addEventListener("abort",n),{objectStore:t.objectStore(r)}}})))})).then(function(){var n=u(b.mark((function n(r){var a,c,u;return b.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r&&r.objectStore instanceof IDBObjectStore){n.next=2;break}throw C(3,"Can not start transaction");case 2:try{a=e(r,S(t,t,$).call(t,i(s,P)),Promise.resolve(i(s,P)))}catch(e){console.warn("Uncatched exception in processing request action",e)}return n.next=5,Promise.resolve(a);case 5:if(!((c=n.sent)instanceof IDBRequest)){n.next=16;break}if("pending"===c.readyState){n.next=12;break}return o(s,P,Promise.resolve(c)),n.abrupt("return",r);case 12:return o(s,P,new Promise((function(e){return u=e}))),n.abrupt("return",new Promise((function(e){c.onerror=c.onsuccess=function(t){u(t.target||{error:C(2,"Lost target on event")}),e(r)}})));case 14:n.next=25;break;case 16:if(!(c instanceof IDBIndex)){n.next=20;break}return n.abrupt("return",c);case 20:if(!(c===T&&r instanceof IDBIndex)){n.next=24;break}return n.abrupt("return",r.objectStore);case 24:return n.abrupt("return",r);case 25:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){l=e})).finally((function(){if(o(s,j,l),l){var e=new ErrorEvent("error",{message:l.message||String(l)});Object.defineProperties(e,{$stackError:{value:l,writable:!1,configurable:!1}}),window.dispatchEvent(e)}})))}return s}}})}var r,a,s;return n(t,[{key:"lastResult",value:(s=u(b.mark((function e(){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(this,B);case 2:return e.abrupt("return",S(t,t,$).call(t,i(this,P)));case 3:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"lastError",get:function(){return i(this,j)}},{key:"newTranscation",value:function(){return this.request((function(){}),!0)}},{key:"count",value:function(e){var t=arguments;return this.request((function(e){return e instanceof IDBIndex||(e=e.objectStore),e.count.apply(e,Array.prototype.slice.call(t,0))}))}},{key:"get",value:function(e){var t=arguments;return this.request((function(e){return e instanceof IDBIndex||(e=e.objectStore),e.get.apply(e,Array.prototype.slice.call(t,0))}))}},{key:"all",value:function(e){var t=arguments;return this.request((function(e){return e instanceof IDBIndex||(e=e.objectStore),e.getAll.apply(e,Array.prototype.slice.call(t,0))}))}},{key:"keys",value:function(e,t){var n=arguments;return this.request((function(e){return e instanceof IDBIndex||(e=e.objectStore),e.getAllKeys.apply(e,Array.prototype.slice.call(n,0))}))}},{key:"firstKey",value:function(e){var t=arguments;return this.request((function(e){return e instanceof IDBIndex||(e=e.objectStore),e.getKey.apply(e,Array.prototype.slice.call(t,0))}))}},{key:"add",value:function(e,t){var n=arguments;return this.request((function(e){return IDBObjectStore.prototype.add.apply(e.objectStore,Array.prototype.slice.call(n,0))}))}},{key:"put",value:function(){var e=arguments;return this.request((function(t){return IDBObjectStore.prototype.put.apply(t.objectStore,Array.prototype.slice.call(e,0))}))}},{key:"clear",value:function(){return this.request((function(e){return e.objectStore.clear()}))}},{key:"delete",value:function(){var e=arguments;return this.request((function(t){return IDBObjectStore.prototype.delete.apply(t.objectStore,Array.prototype.slice.call(e,0))}))}},{key:"forEach",value:(a=u(b.mark((function e(t,n,r){var o=arguments;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t){e.next=4;break}return this.request((function(e){e instanceof IDBIndex||(e=e.objectStore);var n=e.openCursor.apply(e,Array.prototype.slice.call(o,1));return n&&new Promise((function(e){n.onsuccess=function(r){try{var i=r.target.result;i?(t(i.value,i.key,i),i.continue()):e(n)}catch(t){e(t||n)}},n.onerror=function(t){return e(n)}}))})),e.next=4,i(this,B);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"forEachKey",value:(r=u(b.mark((function e(t,n,r){var o=arguments;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t){e.next=4;break}return this.request((function(e){e instanceof IDBIndex||(e=e.objectStore);var n=e.openKeyCursor.apply(e,Array.prototype.slice.call(o,1));return n&&new Promise((function(e){n.onsuccess=function(r){try{var i=r.target.result;i?(t(i.key,i),i.continue()):e(n)}catch(t){e(t||n)}},n.onerror=function(t){return e(n)}}))})),e.next=4,i(this,B);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return r.apply(this,arguments)})},{key:"index",value:function(e){var t=arguments;return this.request((function(e){return 0===t.length?T:IDBObjectStore.prototype.index.apply(e.objectStore,Array.prototype.slice.call(t,0))}))}},{key:"query",value:function(e){for(var t=arguments,n=this,r=e.map((function(e,n){var r=String(e).split(/\s+/gi);return n>0&&r.unshift({arg:t[n]}),r})).flat().filter((function(e){return e})),i={index:0,sourceList:r,stateLevel:0,targeList:[]},o=i.sourceList.length;i.index<o;){var a=String(r[i.index++]).toLowerCase(),s=z[i.stateLevel],c=s&&s[a];if("function"!=typeof c)throw C(5,'Unexpected "'.concat(a,'"'));c(i)}return this.index(),i.targeList.forEach((function(e){n[e.action].apply(n,e.args)})),this}}]),t}();function $(e){return U.apply(this,arguments)}function U(){return(U=u(b.mark((function e(t){var n;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Promise)){e.next=6;break}return e.next=3,t;case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=t;case 7:return(n=e.t0)instanceof IDBRequest?(n={value:n.result,error:n.error}).value instanceof IDBCursor&&(n.key=n.value.key,n.primaryKey=n.value.primaryKey,n.value=n.value.value):n=n instanceof Error?{error:n}:{value:n},e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q={single:{">":function(e){return IDBKeyRange.lowerBound(e[0],!0)},">=":function(e){return IDBKeyRange.lowerBound(e[0])},"<":function(e){return IDBKeyRange.upperBound(e[0],!0)},"<=":function(e){return IDBKeyRange.upperBound(e[0])},"=":function(e){return IDBKeyRange.only(e[0])}},and:{">= <=":function(e){return IDBKeyRange.bound(e[0],e[1])},"> <":function(e){return IDBKeyRange.bound(e[0],e[1],!0,!0)},">= <":function(e){return IDBKeyRange.bound(e[0],e[1],!1,!0)},"> <=":function(e){return IDBKeyRange.bound(e[0],e[1],!0,!1)}}},H=new WeakMap,W=new WeakSet,V=function(){function t(n,r){var i,a;e(this,t),E(i=this,a=W),a.add(i),A(this,H,{writable:!0,value:void 0}),r||(r={}),o(this,H,k(this,W,G).call(this,n,r))}var r,a,s;return n(t,[{key:"close",value:(s=u(b.mark((function e(){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(this,H);case 2:e.sent.close();case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getDB",value:function(){return i(this,H)}},{key:"accessStore",value:function(e,t){return new F(i(this,H),e,t)}},{key:"getVersion",value:(a=u(b.mark((function e(){var t;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(this,H);case 2:return t=e.sent,e.abrupt("return",t.version);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"getStores",value:(r=u(b.mark((function e(){var t;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(this,H);case 2:return t=e.sent,e.abrupt("return",t.objectStoreNames);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"range",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(1===n.length){var i=q.single[String(e[0]).trim()];return i?i(n):void 0}if(n.length>1){var o=String(e[1]).trim().toLowerCase();for(var a in q)if(o.startsWith(a)){var s="".concat(String(e[0]).trim()," ").concat(o.substring(a.length).trim()),c=q[a][s];return c?c(n):void 0}}}}]),t}();function G(e,t){var n=this;return new Promise((function(r,i){var o=indexedDB.open(e,t.version);o.onupgradeneeded=function(i){var o=i.target.result,a=i.target.transaction;if(t.removeStores instanceof Array&&t.removeStores.forEach((function(e){return o.objectStoreNames.contains(e)&&o.deleteObjectStore(e)})),t.stores)for(var s in t.stores){var c=void 0,u=t.stores[s];if(c=o.objectStoreNames.contains(s)?a.objectStore(s):o.createObjectStore(s,"string"==typeof u||u instanceof Array?{keyPath:u}:u||{autoIncrement:!0})){var l,f=w(c.indexNames);try{for(f.s();!(l=f.n()).done;){var p=l.value;c.deleteIndex(p)}}catch(e){f.e(e)}finally{f.f()}if(u&&u.indexs)for(var h in u.indexs){var d=u.indexs[h];if(!c.indexNames.contains(h)&&d){var v="string"==typeof d||d instanceof Array?d:d.keyPath;v&&(d!==v?c.createIndex(h,v,d):c.createIndex(h,v))}}}}r(k(n,W,G).call(n,e,t))},o.onsuccess=function(e){r(e.target.result)},o.onerror=function(e){i(C(1,e.target&&e.target.error))},o.onblocked=function(e){i(C(1,e.target&&e.target.error))}}))}return V}()}(pr);var hr=i(pr.exports),dr=void 0,vr="";function mr(e){return gr.apply(this,arguments)}function gr(){return(gr=n(c.mark((function e(t){var n,r,i,o,a;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr){e.next=8;break}return e.next=3,dr.sendMessage("loadFromFile",{filePath:t});case 3:return n=e.sent,i=(r=n||{}).result,o=r.forceType,(a="string"==typeof i?sr(i):new Blob([i||""]))&&(a.$forceType=o),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yr(){return(yr=n(c.mark((function e(t){var n,r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr){e.next=15;break}return e.next=3,dr.sendMessage("pickFilePath",{filter:t});case 3:if((n=e.sent)&&(n=n.result),e.t0=n,!e.t0){e.next=10;break}return e.next=9,mr(n);case 9:e.t0=e.sent;case 10:return(r=e.t0)&&(r.name=n),e.abrupt("return",r);case 15:return e.abrupt("return",lr(t));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function br(e,t,n,r){return wr.apply(this,arguments)}function wr(){return(wr=n(c.mark((function e(t,n,r,i){var o;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr){e.next=14;break}if(!n){e.next=12;break}return e.t0=dr,e.next=5,cr(t);case 5:e.t1=e.sent,e.t2=n,e.t3=!!r,e.t4=!!i,e.t5={value:e.t1,filePath:e.t2,asDocumentSelf:e.t3,replaceSelf:e.t4},e.t0.sendMessage.call(e.t0,"saveToFile",e.t5),r&&(vr=n);case 12:e.next=18;break;case 14:ur(o=URL.createObjectURL(t),{download:n||""}),URL.revokeObjectURL(o),r&&(vr=n);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t,n,r,i){return kr.apply(this,arguments)}function kr(){return(kr=n(c.mark((function e(t,n,r,i,o){var a;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr){e.next=20;break}return e.next=3,dr.sendMessage("pickFilePath",{filter:r,default:n,forSave:!0});case 3:if((n=e.sent)&&(n=n.result),!n){e.next=18;break}return i&&(vr=n),e.t0=dr,e.next=10,cr(t);case 10:return e.t1=e.sent,e.t2=n,e.t3=!!i,e.t4=!!o,e.t5={value:e.t1,filePath:e.t2,asDocumentSelf:e.t3,replaceSelf:e.t4},e.next=17,e.t0.sendMessage.call(e.t0,"saveToFile",e.t5);case 17:return e.abrupt("return",e.sent);case 18:e.next=24;break;case 20:ur(a=URL.createObjectURL(t),{download:n||""}),URL.revokeObjectURL(a),i&&(vr=n);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e){return Er.apply(this,arguments)}function Er(){return(Er=n(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr){e.next=4;break}dr.postMessage("exec",{id:"felis-mindmap.newMindMap"}),e.next=8;break;case 4:return e.next=6,Promise.resolve("function"!=typeof t||t());case 6:e.sent&&(vr="");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e){return _r.apply(this,arguments)}function _r(){return(_r=n(c.mark((function e(t){var n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr){e.next=4;break}dr.postMessage("openAsMindmap",{}),e.next=8;break;case 4:return e.next=6,Promise.resolve("function"!=typeof t||t());case 6:(n=e.sent)&&(vr=n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tr(e){return Cr.apply(this,arguments)}function Cr(){return(Cr=n(c.mark((function e(t){var n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dr){e.next=7;break}return e.next=3,dr.sendMessage("getDocumentFilePath",t&&{ignoreBackupFile:!0});case 3:return n=e.sent,e.abrupt("return",(null==n?void 0:n.result)||"");case 7:return e.abrupt("return",vr||"");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(e){vr=e||""}var Nr={saveAs:function(e){return $felisApp.callAction("saveMindmap-detail",e.filePath)},save:function(){return $felisApp.callAction("saveMindmap","fromHost")},undo:function(){$felisApp.view.undo()},redo:function(){$felisApp.view.redo()},backup:function(e){return n(c.mark((function t(){var n;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.filePath){t.next=7;break}return t.next=3,$felisApp.callAction("dumpMindmap-toBlob",".felis",!0);case 3:if(!((n=t.sent)instanceof Blob)){t.next=7;break}return t.next=7,br(n,e.filePath);case 7:case"end":return t.stop()}}),t)})))()},loadAsSelf:function(e){return n(c.mark((function t(){var n;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.filePath){t.next=5;break}return t.next=3,mr(e.filePath);case 3:(n=t.sent)instanceof Blob&&$felisApp.callAction("openMindmap-detail",e.filePath,n);case 5:case"end":return t.stop()}}),t)})))()}};function Mr(e){(dr=e)instanceof EventTarget&&dr.addEventListener("$notify",function(){var e=n(c.mark((function e(t){var n,r,i;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t&&t.detail)){e.next=16;break}if(e.prev=2,r=Nr[n.$notify],i="function"==typeof r&&r(n),e.t0=i instanceof Promise,!e.t0){e.next=10;break}return e.next=9,i;case 9:i=e.sent;case 10:n.$queueID&&dr.postMessageRaw({notified:n.$queueID,result:i}),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(2),n.$queueID&&dr.postMessageRaw({notified:n.$queueID,error:String(e.t1)});case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}())}function Ir(){dr&&dr.postMessage("notifyChanged")}function Or(){return dr?Promise.resolve(dr.sendMessage("getEnv",void 0,6e3)).then((function(e){return e.language})):Promise.resolve(navigator.language)}function Rr(e){return Dr.apply(this,arguments)}function Dr(){return Dr=n(c.mark((function e(t){var n,r,i,o;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!dr){e.next=8;break}return e.next=4,dr.sendMessage("getConfiguration",{key:t});case 4:return n=e.sent,e.abrupt("return",n?n.result:void 0);case 8:return r=new hr("FelisMindmap",fr),i=r.accessStore("configuration","r"),e.next=12,i.get(t).lastResult();case 12:return o=e.sent,e.abrupt("return",o?o.value:void 0);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),console.warn("Exception raised in getting configuration",t,e.t0),e.abrupt("return",void 0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),Dr.apply(this,arguments)}function zr(e,t){return Br.apply(this,arguments)}function Br(){return(Br=n(c.mark((function e(t,n){var r,i;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!dr){e.next=6;break}return e.next=4,dr.sendMessage("setConfiguration",{key:t,value:n});case 4:e.next=10;break;case 6:return r=new hr("FelisMindmap",fr),i=r.accessStore("configuration","rw"),e.next=10,i.put(n,t).lastResult();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.warn("Exception raised in setting configuration",t,e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Pr(){return(Pr=n(c.mark((function e(t){var n,r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!dr){e.next=6;break}return e.next=4,dr.sendMessage("setConfiguration",{key:t});case 4:e.next=10;break;case 6:return n=new hr("FelisMindmap",fr),r=n.accessStore("configuration","rw"),e.next=10,r.delete(t).lastResult();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.warn("Exception raised in deleting configuration",t,e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function jr(){return Fr.apply(this,arguments)}function Fr(){return(Fr=n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!dr){e.next=7;break}return e.next=4,dr.notifySaveByHost();case 4:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.warn("Exception raised in notifying saving request",e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function $r(){return($r=n(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!dr){e.next=7;break}return e.next=4,dr.sendMessage("execCommand",{hostCommand:t});case 4:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),console.warn("Exception raised in executing command",t,e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var Ur=Object.freeze({__proto__:null,loadFromFile:mr,openFile:function(e){return yr.apply(this,arguments)},writeToFile:br,saveToFile:xr,newMindmap:Ar,openMindmap:Sr,getDocumentFilePath:Tr,setDocumentFilePath:Lr,noSpecialHost:function(){return!dr},setHost:Mr,notifyChanged:Ir,getHost:function(){return dr},getLanguage:Or,getConfiguration:Rr,setConfiguration:zr,deleteConfiguration:function(e){return Pr.apply(this,arguments)},notifySaveByHost:jr,execCommandInHost:function(e){return $r.apply(this,arguments)}});function qr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function Vr(e,t,n){Gr(e,t),t.set(e,n)}function Gr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yr(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var Zr=new WeakMap,Xr=new WeakMap,Kr=new WeakMap,Jr=new WeakSet,Qr=function(e){z(a,e);var t,r,i,o=Wr(a);function a(e,t){var n,r,i;return I(this,a),n=o.call(this,e,t),Gr(r=B(n),i=Jr),i.add(r),Vr(B(n),Zr,{writable:!0,value:void 0}),Vr(B(n),Xr,{writable:!0,value:void 0}),Vr(B(n),Kr,{writable:!0,value:void 0}),Bn(B(n),"UIControlMap",Object.assign({},a.DefaultUIControlMap)),n.enableDomEvent("touchstart"),n.enableDomEvent("touchend"),n.enableDomEvent("touchmove"),Yr(B(n),Jr,ei).call(B(n)),n}return R(a,[{key:"dispose",value:function(){this.disableDomEvent("touchstart"),this.disableDomEvent("touchend"),this.disableDomEvent("touchmove"),y.exports.MindmapViewer.prototype.dispose.call(this)}},{key:"copyTopic",value:(i=n(c.mark((function e(t,n){var r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.permissions.query({name:"clipboard-write"});case 3:if("denied"!==e.sent.state){e.next=6;break}throw Error("Not allowed to write clipboard.");case 6:if(n||(n=this.focusTopic),!(n instanceof y.exports.Topic)){e.next=15;break}return e.next=10,n.exportImage({type:"png",toBlob:!0});case 10:if(!(r=e.sent)){e.next=15;break}return navigator.clipboard.write([new ClipboardItem({"image/png":r.data,"text/plain":new Blob([JSON.stringify({"season-mindmap-topic":n.exportTopicData(!0)})],{type:"text/plain"})})]),Xn(N("The topic has been copied"),{type:"info",timeout:1e3}),e.abrupt("return",n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),e.t0&&ar(N(e.t0.message||String(e.t0)),{icon:"error",buttons:["OK"]});case 20:case"end":return e.stop()}}),e,this,[[0,17]])}))),function(e,t){return i.apply(this,arguments)})},{key:"cutTopic",value:(r=n(c.mark((function e(t,n){var r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.copyTopic(t,n);case 2:if(!(n=e.sent)){e.next=9;break}return r=n&&(n.nextSiblingTopic||n.previousSiblingTopic||n.parentTopic),n.drop(),r&&r.setFocus().render().showInView(),this.render(),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"pasteTopic",value:(t=n(c.mark((function e(t,n){var r,i,o,a;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.permissions.query({name:"clipboard-read"});case 3:if("denied"!==e.sent.state){e.next=6;break}throw Error("Not allowed to read clipboard.");case 6:if(n||(n=this.focusTopic),!(n instanceof y.exports.Topic)){e.next=28;break}return e.next=10,navigator.clipboard.read();case 10:r=e.sent,i=qr(r),e.prev=12,i.s();case 14:if((o=i.n()).done){e.next=20;break}if(!(a=o.value).types.includes("text/plain")){e.next=18;break}return e.delegateYield(c.mark((function e(){var t,r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getType("text/plain");case 2:t=e.sent,(r=new FileReader).readAsText(t,"utf-8"),r.onload=function(){try{var e=JSON.parse(r.result)["season-mindmap-topic"];return e&&n.createChild(e)&&n.render(),!0}catch(e){}};case 6:case"end":return e.stop()}}),e)}))(),"t0",18);case 18:e.next=14;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(12),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:e.next=33;break;case 30:e.prev=30,e.t2=e.catch(0),e.t2&&ar(N(e.t2.message||String(e.t2)),{icon:"error",buttons:["OK"]});case 33:case"end":return e.stop()}}),e,this,[[0,30],[12,22,25,28]])}))),function(e,n){return t.apply(this,arguments)})},{key:"@topic-domevent-touchstart",value:function(e){var t=e&&e.detail,n=t&&t.originEvent;if(n)try{var r=n.touches.length,i=n.changedTouches[0];2===r?n.changedTouches.length<2&&this.eventContainer.dispatchEvent(new MouseEvent("mouseup",{button:0,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey})):1!==r&&(r=0),r&&this.eventContainer.dispatchEvent(new MouseEvent("mousedown",{button:1===r?0:2,buttons:r,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey}))}catch(e){this.env.warn("Exception raised in touchstart event",e)}}},{key:"@topic-domevent-touchend",value:function(e){var t=e&&e.detail,n=t&&t.originEvent;if(n)try{var r=n.touches.length+n.changedTouches.length,i=n.changedTouches[0];1!==r&&2!==r||(this.eventContainer.dispatchEvent(new MouseEvent("mouseup",{button:1===r?0:2,buttons:1===n.touches.length?1:0,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey})),(i=n.touches[0])&&this.eventContainer.dispatchEvent(new MouseEvent("mousedown",{button:0,buttons:1,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey})))}catch(e){this.env.warn("Exception raised in touchstart event",e)}}},{key:"@topic-domevent-touchmove",value:function(e){var t=e&&e.detail,n=t&&t.originEvent;if(n)try{var r=n.touches.length,i=n.changedTouches[0];1!==r&&2!==r||this.eventContainer.dispatchEvent(new MouseEvent("mousemove",{button:1===r?0:2,buttons:r,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,altKey:n.altKey,metaKey:n.metaKey})),n.preventDefault(),n.stopPropagation()}catch(e){this.env.warn("Exception raised in touchstart event",e)}}},{key:"@topic-event-change",value:function(e){var t=e.detail,n=t&&t.eventTarget;if(n){var r=a.HistoryActionMap[t.action],i=r&&r.log(n,t);i&&(U(this,Zr).splice(U(this,Xr),U(this,Zr).length,i),q(this,Xr,U(this,Zr).length),Ir())}}},{key:"canUndo",get:function(){return U(this,Xr)>0}},{key:"canRedo",get:function(){return U(this,Xr)<U(this,Zr).length}},{key:"undo",value:function(){if(this.canUndo){var e,t=U(this,Zr)[q(this,Xr,(e=U(this,Xr),--e))];if(t){var n=a.HistoryActionMap[t.action];n&&n.undo(this,t),this.render()}}else Xn(N("No history for undo"),{type:"info",timeout:1e3})}},{key:"redo",value:function(){if(this.canRedo){var e,t,n=U(this,Zr)[(q(this,Xr,(e=U(this,Xr),t=e++,e)),t)];if(n){var r=a.HistoryActionMap[n.action];r&&r.redo(this,n),this.render()}}else Xn(N("No history for redo"),{type:"info",timeout:1e3})}},{key:"dirty",get:function(){return U(this,Xr)>U(this,Kr)}},{key:"@topic-event-view-switch-sheet",value:function(e){y.exports.MindmapViewer.prototype["@topic-event-view-switch-sheet"].call(this,e),Yr(this,Jr,ei).call(this),e.detail&&e.detail.$setDirty&&this.rootTopic.changeData("title",this.rootTopic.data.title)}},{key:"@topic-event-view-submit",value:function(e){this.dirty&&(y.exports.MindmapViewer.prototype["@topic-event-view-submit"].call(this,e),q(this,Kr,U(this,Xr)))}},{key:"call-app-action",value:function(){$felisApp.callAction.apply($felisApp,Array.prototype.slice.call(arguments,1))}}]),a}(y.exports.MindmapViewer);function ei(){q(this,Zr,[]),q(this,Xr,0),q(this,Kr,0)}Bn(Qr,"HistoryActionMap",{create:{log:function(e){var t={action:"create",topicID:e.id,topicData:e.exportTopicData(),parentID:e.parentTopic.id,hasFocus:e.hasFocus},n=e.nextSiblingTopic;return n&&(t.siblingID=n.id),t},undo:function(e,t){var n=e.getTopicByID(t.topicID);n&&n.drop(null,!0)},redo:function(e,t){var n=e.getTopicByID(t.parentID),r=t.siblingID&&e.getTopicByID(t.siblingID),i=n&&n.createChild(t.topicData,r,!0);i&&t.hasFocus&&i.setFocus()}},changeData:{log:function(e,t){return{action:"changeData",topicID:e.id,key:t.key,originValue:t.originValue,topicData:F({},e.data),hasFocus:e.hasFocus}},undo:function(e,t){var n=e.getTopicByID(t.topicID);n&&(n.changeData(t.key,t.originValue[t.key],!0),t.hasFocus&&n.setFocus())},redo:function(e,t){var n=e.getTopicByID(t.topicID);n&&(n.changeData(t.key,t.topicData[t.key],!0),t.hasFocus&&n.setFocus())}},move:{log:function(e,t){var n={action:"move",topicID:e.id,hasFocus:e.hasFocus,originParentID:t.originParent.id,originSiblingID:t.originSibling?t.originSibling.id:void 0,parentID:e.parentTopic.id},r=e.nextSiblingTopic;return r&&(n.siblingID=r.id),n},undo:function(e,t){var n=e.getTopicByID(t.topicID),r=e.getTopicByID(t.originParentID),i=e.getTopicByID(t.originSiblingID);n&&(r&&n.moveTo(r,i,!0),t.hasFocus&&n.setFocus())},redo:function(e,t){var n=e.getTopicByID(t.topicID),r=e.getTopicByID(t.parentID),i=e.getTopicByID(t.siblingID);n&&(r&&n.moveTo(r,i,!0),t.hasFocus&&n.setFocus())}},drop:{log:function(e){var t={action:"drop",topicID:e.id,parentID:e.parentTopic.id,topicData:e.exportTopicData(),hasFocus:e.hasFocus},n=e.nextSiblingTopic;return n&&(t.siblingID=n.id),t},undo:function(e,t){var n=e.getTopicByID(t.parentID),r=t.siblingID&&e.getTopicByID(t.siblingID),i=n&&n.createChild(t.topicData,r,!0);i&&t.hasFocus&&i.setFocus()},redo:function(e,t){var n=e.getTopicByID(t.topicID);n&&n.drop(null,!0)}}}),Bn(Qr,"DefaultUIControlMap",{"ctrl+wheel":{action:"zoom-view",args:[{}]},mouseleft:{action:"move-view"},arrowright:{action:"goto-topic-with-direction",args:["right"]},arrowleft:{action:"goto-topic-with-direction",args:["left"]},arrowup:{action:"gotoPreviousSiblingTopic"},arrowdown:{action:"gotoNextSiblingTopic"}});function ti(){var e,t,n=document.getElementById("topic_search_panel");if(!n){var r=function e(t){var n=t.nextSiblingTopic;return n||(n=(n=t.parentTopic)?e(n):t),n},i=function e(){if(u){var t=u.next();if(t.done)c=r(c)||c,u=c.enumerateTopics();else{var n=t.value;if(n instanceof y.exports.Topic){if(n.equal(s))return s.setFocus(),a=void 0,s=void 0,c=void 0,u=void 0,void Xn(N("Search to the end"),{type:"info",timeout:1e3});if(s||(s=n),String(n.data.title).toLowerCase().includes(a))return void n.setFocus().showInView()}}Promise.resolve().then(e)}},o=(new DOMParser).parseFromString('<div id="topic_search_panel" class="mindmap-menubar" style="margin-top:6px;padding:6px"><style>.topic-search-bar-input{outline:0;border:1px solid #777;box-sizing:border-box;color:#000;background-color:#fff}</style><span>{{Search:}}</span><input class="topic-search-bar-input" tabindex="0"/> <input type="button" value="{{Next}}" id="topic_search_next"/> <input type="button" value="{{Cancel}}" id="topic_search_cancel"/></div>'.replace(/\{\{.*?\}\}/gi,(function(e){return e=e.substring(2,e.length-2),N(e)})),"text/html");n=o.getElementById("topic_search_panel");var a=void 0,s=void 0,c=void 0,u=void 0;n.querySelector("#topic_search_next").addEventListener("click",(function(){var e=String(n.querySelector(".topic-search-bar-input").value).trim().toLowerCase();e===a&&s||(a=e,s=void 0,e?(c=$felisApp.view.focusTopic||$felisApp.view.rootTopic,u=c&&c.enumerateTopics()):(u=void 0,c=void 0)),Promise.resolve().then(i)})),n.querySelector("#topic_search_cancel").addEventListener("click",(function(){n.remove()}))}e=n,t=document.querySelector(".mindmap-menubar:not(#topic_search_panel)"),e.style.top=t.getBoundingClientRect().bottom,e.style.zIndex=(Number(getComputedStyle(t)["z-index"])||0)-1,document.body.appendChild(e),e.querySelector(".topic-search-bar-input").focus()}var ni=[{icon:"#icon-picture",text:"Picture",contentType:"image"},{icon:"#icon-label",text:"Labels",contentType:"labels"},{icon:"#icon-notes",text:"Notes",contentType:"notes"},{icon:"#icon-flag",text:"Task progress",contentType:"task-marker"},{icon:"#icon-information",text:"Priority",contentType:"priority"},{icon:"#icon-clip",text:"Link or Attachment",contentType:"href"}];function ri(e,t,n){var r=!1;try{ni.forEach((function(t){if(t.contentType===e)throw r=!0,null}))}catch(e){}r||ni.push({contentType:e,text:t,icon:n})}function ii(e){var t=-1;try{ni.forEach((function(n,r){if(n.contentType===e)throw t=r,null}))}catch(e){}t>=0&&ni.splice(t,1)}var oi={rootAttrs:{"mmap-layout":"line","mmap-layout-margin":"0","mmap-layout-padding":"5","mmap-layout-background":"dialogBubble","mmap-bind-cancel-edit":"","mmap-bind-hide-in-render":"relayout","mmap-bind-filter-edit":"","mmap-bind-filter-trigger":""},singletonStamp:"topic-bar-panel",onInitialize:function(e){var t,n,r,i=this;this.rootNode.style.opacity=.9,this.rootNode.querySelectorAll(".topic-bar-tip > text").forEach((function(e){e.textContent=N(String(e.textContent).trim())})),0===e.topic.level&&(this.rootNode.querySelectorAll('[mmap-event-click="onDelete"]').forEach((function(e){return e.remove()})),this.rootNode.querySelectorAll('[mmap-event-click="onCut"]').forEach((function(e){return e.remove()})),this.rootNode.querySelectorAll('[mmap-event-click="onAddSibling"]').forEach((function(e){return e.remove()}))),this.onLostFocus=function(){i.close()},e.env.addEventListener("topic-event-kill-focus",this.onLostFocus),this.normalPanel=this.rootNode.querySelector('[d-pname="normal"]'),this.componentPanel=this.rootNode.querySelector('[d-pname="component"]'),t=this.componentPanel,n=ni,(r=t.querySelector(".component-list"))&&n instanceof Array&&n.forEach((function(e,t){r.insertAdjacentHTML("beforeend",'\n            <div class="component-item" mmap-event-click="onEditComponent" d-content-type="'.concat(e.contentType,'">\n                <svg width="26" height="26" viewBox="0 0 26 26">\n                    <use href="').concat(e.icon,'" width="26" height="26" />\n                </svg>\n                <span>').concat(N(e.text||""),"</span>\n            </div>\n            "))})),e.startComponent?this.normalPanel.remove():this.componentPanel.remove()},onAfterLayout:function(e){var t=this.rootNode.getBBox(),n=e.topic.getGraphicRect();this.rootNode.setAttribute("transform","translate(".concat(n.x+(n.width-t.width)/2,", ").concat(n.y+n.height+11,")")),y.exports.Topic.showNodeInSvgView(this.rootNode,this.rootNode.ownerSVGElement)},onClose:function(e){e.env.removeEventListener("topic-event-kill-focus",this.onLostFocus)},onDelete:function(e,t,n,r){n.view.deleteFocusTopic()},onAddChild:function(e,t,n,r){n.view.createChildTopic()},onAddSibling:function(e,t,n,r){n.view.createSiblingTopic()},onCopy:function(e,t,n,r){n.view.copyTopic(null,n.topic)},onCut:function(e,t,n,r){n.view.cutTopic(null,n.topic)},onPaste:function(e,t,n,r){n.view.pasteTopic(null,n.topic)},onComponent:function(e,t,n,r){this.rootNode.appendChild(this.componentPanel),this.normalPanel.remove(),this.relayout()},onBackToNormal:function(e,t,n,r){this.rootNode.appendChild(this.normalPanel),this.componentPanel.remove(),this.relayout()},onEditComponent:function(e,t,n,r){var i=n.topic;i instanceof y.exports.Topic&&i.notify("topic-event-edit",{triggerContentType:t.getAttribute("d-content-type"),force:!0})}};function ai(e,t){var n=e&&e.focusTopic;n instanceof y.exports.Topic&&y.exports.MindmapAddinPanel(n.$assignedNode.ownerSVGElement,'<style>.topic-bar-button>rect{x: 0;y: 0;rx: 5px;ry: 5px;width:33px!important;height:26px!important}.topic-bar-button:not([d-primary])>rect{x: 0;y: 0;rx: 5px;ry: 5px;width:26px!important;height:26px!important}.topic-bar-tip{display:none;opacity:0;transform:translate(0,26px)}.topic-bar-tip>rect{fill:#fea;stroke:#333;stroke-width:1px}.topic-bar-tip>text{alignment-baseline:before-edge;dominant-baseline:text-before-edge;fill:#333}.topic-bar-button:hover>.topic-bar-tip{display:unset;opacity:1}.component-list{overflow-y:scroll;overflow-x:hidden;height:100%;width:100%;display:flex;flex-direction:column;align-items:flex-start;justify-content:flex-start;border:0;border-left:1px solid #ccc;box-sizing:border-box;padding:0 0 0 6px}.component-item{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:flex-start;border:0;box-sizing:border-box;padding:0;background:0 0}.component-item>span{margin-left:5px}.component-item:hover{background-color:#ccc}</style><g d-pname="normal" mmap-layout="line" mmap-layout-margin="9" mmap-layout-padding="0"><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onAddChild" d-primary="" mmap-layout-background="auto"><use href="#icon-add-child-topic" width="33" height="26"/><g class="topic-bar-tip" mmap-layout-background="auto"><text>Add Child Topic</text></g></g><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onAddSibling" d-primary="" mmap-layout-background="auto"><use href="#icon-add-sibling-topic" width="33" height="26"/><g class="topic-bar-tip" mmap-layout-background="auto"><text>Add Sibling Topic</text></g></g><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onDelete" d-primary="" d-svg-button-danger="" mmap-layout-background="auto"><use href="#icon-delete-topic" width="33" height="26"/><g class="topic-bar-tip" mmap-layout-background="auto"><text>Delete Topic</text></g></g><rect width="1" height="26" fill="none" stroke="none"/><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onCopy" mmap-layout-background="auto"><use href="#icon-copy" width="26" height="26"/><g class="topic-bar-tip" mmap-layout-background="auto"><text>Copy Topic</text></g></g><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onPaste" mmap-layout-background="auto"><use href="#icon-paste" width="26" height="26"/><g class="topic-bar-tip" mmap-layout-background="auto"><text>Paste Topic</text></g></g><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onCut" mmap-layout-background="auto"><use href="#icon-cut" width="26" height="26"/><g class="topic-bar-tip" mmap-layout-background="auto"><text>Cut Topic</text></g></g><rect width="1" height="26" fill="none" stroke="none"/><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onComponent" mmap-layout-background="auto"><use href="#icon-component" width="26" height="26"/><g class="topic-bar-tip" mmap-layout-background="auto"><text>Add Content of Topic</text></g></g></g><g d-pname="component" mmap-layout="line" mmap-layout-margin="9" mmap-layout-padding="0"><g class="season-topic-svg-button topic-bar-button" mmap-event-click="onBackToNormal" mmap-layout-background="auto"><use href="#icon-arrow-left" width="26" height="26"/></g><foreignObject width="170" height="130"><div class="component-list"></div></foreignObject></g>',Object.assign({view:e,topic:n,env:n.env,singletonMutex:n.id,startComponent:t},oi))}var si=new WeakMap;function ci(e){var t=si.get(e);return t||si.set(e,t={}),t}function ui(e,t,n){if(e&&t){if("object"!==k(t))return arguments.length>2?ci(e)[t]=n:ci(e)[t];Object.assign(ci(e),t)}return e}var li=c.mark(Ti);function fi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hi=void 0,di=void 0;function vi(e,t){try{var n=e&&e[t];return"function"==typeof n&&n.apply(e,Array.prototype.slice.call(arguments,2))}catch(e){console.warn("Exception raised in calling addon",t,e)}}function mi(){return gi.apply(this,arguments)}function gi(){return gi=n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=di instanceof Array,!e.t0){e.next=4;break}return e.next=4,Promise.all(di.map(function(){var e=n(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve(vi(t,"deactive"));case 2:return e.next=4,Promise.resolve(vi(t,"unload"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function yi(){return bi.apply(this,arguments)}function bi(){return(bi=n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi();case 2:return di=void 0,e.next=5,fetch("./addons/list.json").then((function(e){return e.json()}));case 5:return e.abrupt("return",hi=e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){return xi.apply(this,arguments)}function xi(){return xi=n(c.mark((function e(t,n){var r;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rr("addon-active");case 3:return(r=e.sent)||(r={}),r[t]=n,e.next=8,zr("addon-active",r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.warn("Exception in save addon configuration",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),xi.apply(this,arguments)}var ki=Symbol("felis.mindmap.addon.active");function Ai(){return Ei.apply(this,arguments)}function Ei(){return Ei=n(c.mark((function e(){var t;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=hi instanceof Array,e.t0){e.next=4;break}return e.next=4,yi();case 4:return e.next=6,Rr("addon-active");case 6:if((t=e.sent)||(t={}),e.t1=hi instanceof Array,!e.t1){e.next=13;break}return e.next=12,Promise.all(hi.map(function(){var e=n(c.mark((function e(r){var i,o,a,s;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(r.file).then((function(e){return e.blob()}));case 3:if(!((i=e.sent)instanceof Blob)){e.next=25;break}return o=new(gn(".felis").constructor),e.next=8,o.load(i);case 8:if("mindmap-addon"!==o.type){e.next=25;break}return e.next=11,o.readContent("entry.js","text");case 11:if((a=e.sent)&&(a=new Function("app","configuration","package","addon",a+"; return addon;")),s=a&&a($felisApp,r,o),e.t0=s instanceof Promise,!e.t0){e.next=19;break}return e.next=18,s;case 18:s=e.sent;case 19:if(!s){e.next=25;break}return ui(s,ki,!!(r.file in t?t[r.file]:r.active)),Object.defineProperties(s,{$activeDefault:{get:function(){return ui(s,ki)},set:function(e){e=!!e,wi(r.file,e).then(n(c.mark((function t(){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ui(s,ki,e),t.next=3,Promise.resolve(vi(s,e?"active":"deactive"));case 3:case"end":return t.stop()}}),t)}))))},configurable:!1},$file:{value:r.file,writable:!1,configurable:!1}}),e.next=24,Promise.resolve(vi(s,"load"));case 24:return e.abrupt("return",s);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(0),console.warn("Exception in load addon",e.t1);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t){return e.apply(this,arguments)}}()));case 12:di=e.sent;case 13:di instanceof Array&&(di=di.filter((function(e){return e})));case 14:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Si(){return _i.apply(this,arguments)}function _i(){return _i=n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=di instanceof Array,!e.t0){e.next=4;break}return e.next=4,Promise.all(di.map(function(){var e=n(c.mark((function e(t){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.$activeDefault,!e.t0){e.next=4;break}return e.next=4,Promise.resolve(vi(t,"active"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function Ti(){var e,t,n;return c.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(di instanceof Array)){r.next=18;break}e=fi(di),r.prev=2,e.s();case 4:if((t=e.n()).done){r.next=10;break}return n=t.value,r.next=8,n;case 8:r.next=4;break;case 10:r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),e.e(r.t0);case 15:return r.prev=15,e.f(),r.finish(15);case 18:case"end":return r.stop()}}),li,null,[[2,12,15,18]])}function Ci(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Li(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ni(e){e.target instanceof HTMLInputElement&&(this.$activeDefault=e.target.checked)}function Mi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ii(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oi(e,t){e.getAttribute("d-menu-id");var r=String(e.textContent).trim(),i=r;e.getAttribute("d-menu-action");var o=document.createElement("div");o.setAttribute("style","width:100%;height:1em;background:#fff;outline:1px solid #ccc;"),o.setAttribute("tabindex",-1),o.addEventListener("dblclick",(function(e){e.preventDefault(),e.stopPropagation()})),o.addEventListener("keydown",(function(e){"escape"===String(e.key).toLocaleLowerCase()?(r=i,o.blur()):"backspace"===String(e.key).toLocaleLowerCase()?o.textContent=r="":o.textContent=r=y.exports.MindmapViewer.getContrlMapKey(e,!0),e.preventDefault(),e.stopPropagation()})),o.addEventListener("blur",function(){var a=n(c.mark((function n(a){var s,u,l,f;return c.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=String(r).trim(),s=document.evaluate('.//td[text()="'.concat(r,'"]'),t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),l=0,s.resultType!==XPathResult.ORDERED_NODE_SNAPSHOT_TYPE){n.next=12;break}case 4:if(!(u=s.snapshotItem(l++))){n.next=12;break}if(u===e){n.next=10;break}return u.textContent="",f=u.getAttribute("d-menu-id"),n.next=10,$felisApp.menu.updateMenu(f,{shortcut:null});case 10:n.next=4;break;case 12:if(e.textContent=r,r===i){n.next=18;break}return(i=i.toLowerCase())in $felisApp.view.UIControlMap&&delete $felisApp.view.UIControlMap[i],n.next=18,$felisApp.menu.updateMenu(e.getAttribute("d-menu-id"),{shortcut:r});case 18:o.remove();case 19:case"end":return n.stop()}}),n)})));return function(e){return a.apply(this,arguments)}}()),o.textContent=r,e.textContent="",e.appendChild(o),o.focus()}function Ri(e){var t,n=Mi(e.composedPath());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.classList.contains("shortcut-item")){Oi(r,this);break}}}catch(e){n.e(e)}finally{n.f()}}var Di=[{text:"Addons",anchor:"addons",fn:function(e,t){var n,r=new DocumentFragment,i=Ci(Ti());try{for(i.s();!(n=i.n()).done;){var o=n.value,a=document.createElement("div");a.setAttribute("class","addon-config-item"),a.insertAdjacentHTML("beforeend",'<input type="checkbox" value="'.concat(o.name,'" ').concat(o.$activeDefault?"checked":"",' /><label for="').concat(o.name,'">').concat(o.name+(o.desc?" - "+o.desc:""),"</label>")),a.querySelector("input").addEventListener("change",Ni.bind(o)),r.appendChild(a)}}catch(e){i.e(e)}finally{i.f()}t.insertAdjacentHTML("afterbegin","<style>.addon-config-item{margin:.5em 0}.addon-config-item>label{margin:0 .5em 0 0}</style>"),t.setAttribute("style","display: flex; flex-direction: row; justify-content: flex-start; justify-items: flex-start; flex-wrap: wrap;"),t.appendChild(r)}},{text:"Shortcuts",anchor:"shortcuts",fn:function(e,t){var n=document.createElement("table");if(n){n.setAttribute("class","shortcut-table"),n.insertAdjacentHTML("beforeend",'<tr style="background-color: #f0f0f0;"><td style="width:50%;">'.concat(N("Function"),"</td><td>").concat(N("Shortcut"),"</td></tr>"));var r,i=Mi($felisApp.menu.enumerateMenus());try{for(i.s();!(r=i.n()).done;){var o=r.value;n.insertAdjacentHTML("beforeend","<tr><td>".concat(o.title,'</td><td class="shortcut-item" d-menu-id="').concat(o.id,'" d-menu-action="').concat(o.action,'">').concat(o.shortcut,"</td></tr>"))}}catch(e){i.e(e)}finally{i.f()}n.addEventListener("dblclick",Ri.bind(n))}t.insertAdjacentHTML("afterbegin","<style>.shortcut-table{width:100%;font-family:'Courier New',monospace;border:none}.shortcut-table td,.shortcut-table th,.shortcut-table tr{border:none}.shortcut-item:hover{box-shadow:0 0 5px #5af}</style>"),t.appendChild(n)}}];function zi(){return(zi=n(c.mark((function e(t,n,r){var i,o,a,s;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Di.map((function(e){return N(e.text)})),e.next=3,nr(i,n,{style:"font-size: 0.9em !important;"});case 3:o=e.sent,(a=!isNaN(o)&&Di[o])&&(s=t.root.querySelector('.config-global-panel > [d-anchor="'.concat(a.anchor,'"]')))&&s.scrollIntoView(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bi={blurToClose:void 0,onInitialize:function(e){var t=e.root.querySelector(".config-global-panel"),n=new DocumentFragment;n&&Di.forEach((function(t){var r=document.createElement("div");r.setAttribute("d-anchor",t.anchor),r.setAttribute("d-click","onSelectItem"),r.textContent=N(t.text),n.appendChild(r),r=document.createElement("div");try{var i="function"==typeof t.fn&&t.fn(e,r);i&&Object.assign(e.options,i)}catch(e){console.warn("Exception raised in initialize the configuration UI",t.text,e)}n.appendChild(r)})),t&&t.appendChild(n)},onSelectItem:function(e,t,n){return zi.apply(this,arguments)}};function Pi(e){var t=new or('<style>.loading{height:40px;display:flex;align-items:center}.loading-item{height:50px;width:5px;background:#f4942b;margin:0 3px;border-radius:10px;animation:loading 1s infinite;filter:drop-shadow(0 0 6px #eee)}@keyframes loading{0%{height:0}50%{height:50px}100%{height:0}}.loading-item:nth-child(1){background:#f17f0a}.loading-item:nth-child(2){animation-delay:.1s;background:#f18317}.loading-item:nth-child(3){animation-delay:.2s}.loading-item:nth-child(4){animation-delay:.3s}.loading-item:nth-child(5){animation-delay:.4s;background:#f59f39}.loading-item:nth-child(6){animation-delay:.5s;background:#f5b913}.loading-item:nth-child(7){animation-delay:.6s;background:#f59f39}.loading-item:nth-child(8){animation-delay:.7s}.loading-tip{max-width:75%;margin-top:1em;padding:.5em!important;font-weight:lighter;font-size:.9em}</style><div class="loading"><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div><div class="loading-item"></div></div><div class="loading-tip"></div>',{onInitialize:function(t){t.root.style.backdropFilter="blur(6px)";var n=t.root.querySelector(".loading-tip");Object.defineProperties(t,{tip:{get:function(){return n?n.textContent:""},set:function(e){return n&&(n.innerHTML="",n.insertAdjacentHTML("beforeend",String(e||"").replace("\n","<br />").replace(/\s/gi,"&nbsp;")))},configurable:!1,enumerable:!0}}),t.tip=e}});return t.show(),t}function ji(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fi(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $i(e,t){Ui(e,t),t.add(e)}function Ui(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qi(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Hi(){Xn(N("Must select a topic first"),{type:"warn",timeout:1e3})}var Wi=new WeakMap,Vi=new WeakSet,Gi=new WeakSet,Yi=new WeakSet,Zi=function(){function e(t){var r,i,o,a=this;I(this,e),$i(this,Yi),$i(this,Gi),$i(this,Vi),o={writable:!0,value:void 0},Ui(r=this,i=Wi),i.set(r,o),q(this,Wi,t),t.addEventListener("click",this["@click"].bind(this)),qi(this,Yi,Ji).call(this),Object.getOwnPropertyNames(e).forEach((function(t){if(t.startsWith("@@")){var n=e[t];"function"==typeof n&&$felisApp.registerAction(t.substring(2),n)}})),$felisApp.env.addEventListener("topic-event-view-switch-sheet",function(){var e=n(c.mark((function e(t){var n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.detail&&t.detail.sheet,e.t0=n,!e.t0){e.next=5;break}return e.next=5,a.updateMenu("sheets",{title:"<span>".concat(n.title,"</span>"),titleAsHTML:!0});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$felisApp.env.addEventListener("topic-event-refresh-display",n(c.mark((function e(){var t,n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rr("menu-shortcut");case 2:(t=e.sent)||(t={}),e.t0=c.keys(t);case 5:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.next=9,a.updateMenu(n,{shortcut:t[n]},!0);case 9:e.next=5;break;case 11:case"end":return e.stop()}}),e)}))))}var t,r,i,o,a,s,u,l,f,p,h,d,v,m;return R(e,[{key:"registerMenus",value:(m=n(c.mark((function e(t,n,r){var i,o,a,s;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rr("menu-shortcut");case 2:(i=e.sent)||(i={}),(o=n&&U(this,Wi).querySelector('.listitem[d-menu-id="'.concat(n,'"]')))&&((a=o.querySelector(":scope > .mindmap-menugroup"))||(a=document.createElement("div"))&&(a.setAttribute("class","mindmap-menugroup"),o.appendChild(a)),o=a),o||(o=U(this,Wi)),s=r&&o.querySelector(':scope > .listitem[d-menu-id="'.concat(r,'"]')),qi(this,Gi,Ki).call(this,t,o,s,o===U(this,Wi),i);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return m.apply(this,arguments)})},{key:"unregisterMenus",value:function(e){var t=this;e instanceof Array||(e=[e]),e.forEach((function(e){var n=U(t,Wi).querySelector('.listitem[d-menu-id="'.concat(e,'"]'));n&&n.remove()}))}},{key:"updateMenu",value:(v=n(c.mark((function e(t,n,r){var i,o,a;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=U(this,Wi).querySelector('.listitem[d-menu-id="'.concat(t,'"]')))){e.next=18;break}if("object"!==k(n)){e.next=16;break}if(qi(this,Vi,Xi).call(this,i,n),r||!("shortcut"in n)){e.next=14;break}return e.next=7,Rr("menu-shortcut");case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:return(o=e.t0)[t]=n.shortcut,e.next=14,zr("menu-shortcut",o);case 14:e.next=18;break;case 16:(a=document.evaluate("text()",i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)&&(a.textContent=n);case 18:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return v.apply(this,arguments)})},{key:"getMenuNode",value:function(e){return U(this,Wi).querySelector('.listitem[d-menu-id="'.concat(e,'"]'))}},{key:"getMenu",value:function(e){var t=U(this,Wi).querySelector('.listitem[d-menu-id="'.concat(e,'"]'));if(t){var n=document.evaluate("text()",t,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,r=t.querySelector(":scope > code[d-menu-reserve]");return{id:t.getAttribute("d-menu-id"),title:n?n.textContent:"",shortcut:r?String(r.textContent).trim():"",action:t.getAttribute("d-menu-action")}}}},{key:"getMenusByShortcut",value:function(e){for(var t,n=document.evaluate('.//code[translate(text(), "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz")="'.concat(String(e).toLowerCase(),'"]/parent::*[contains(@class, "listitem")]'),U(this,Wi),null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),r=[],i=0;t=n.snapshotItem(i++);)r.push(t);return r}},{key:"enumerateMenus",value:c.mark((function e(t){var n,r,i,o,a;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ji(U(this,Wi).querySelectorAll(t?".listitem":".listitem[d-menu-action]")),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}return i=r.value,o=document.evaluate("text()",i,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,a=i.querySelector(":scope > code[d-menu-reserve]"),e.next=9,{id:i.getAttribute("d-menu-id"),title:o?o.textContent:"",shortcut:a?String(a.textContent).trim():"",action:i.getAttribute("d-menu-action")};case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])}))},{key:"@click",value:function(e){var t,n=ji(e.composedPath());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof Node&&r.classList&&r.classList.contains("listitem")){var i=r.getAttribute("d-menu-action");if(i)return $felisApp.callAction(i,r.getAttribute("d-menu-arg")||void 0),void e.currentTarget.removeAttribute("d-menu-active");break}}}catch(e){n.e(e)}finally{n.f()}e.currentTarget.setAttribute("d-menu-active","")}}],[{key:"@@undo",value:function(){$felisApp.view.undo()}},{key:"@@redo",value:function(){$felisApp.view.redo()}},{key:"@@createChildTopic",value:function(){$felisApp.view.focusTopic?$felisApp.view.createChildTopic():Hi()}},{key:"@@createSiblingTopic",value:function(){$felisApp.view.focusTopic?$felisApp.view.createSiblingTopic():Hi()}},{key:"@@deleteTopic",value:function(){$felisApp.env.fireEvent("topic-event-cancel-edit"),$felisApp.view.focusTopic?$felisApp.view.deleteFocusTopic():Hi()}},{key:"@@editComponents",value:function(){$felisApp.env.fireEvent("topic-event-cancel-edit"),$felisApp.view.focusTopic?ai($felisApp.view,!0):Hi()}},{key:"@@rootToCenter",value:function(){$felisApp.view.rootTopic.showInCenterOfView()}},{key:"@@focusToCenter",value:function(){var e=$felisApp.view.focusTopic;e&&e.showInCenterOfView()}},{key:"@@zoomReset",value:function(){$felisApp.view.scale=1}},{key:"@@zoomIn",value:function(){var e=$felisApp.view.scale+.02;$felisApp.view.scale=Math.min(Math.max(e,.1),2)}},{key:"@@zoomOut",value:function(){var e=$felisApp.view.scale-.02;$felisApp.view.scale=Math.min(Math.max(e,.1),2)}},{key:"@@foldNone",value:function(){$felisApp.env.fireEvent("topic-event-cancel-edit"),$felisApp.view.render(Number.MAX_SAFE_INTEGER)}},{key:"@@fold1",value:function(){$felisApp.env.fireEvent("topic-event-cancel-edit"),$felisApp.view.render(1)}},{key:"@@fold2",value:function(){$felisApp.env.fireEvent("topic-event-cancel-edit"),$felisApp.view.render(2)}},{key:"@@fold3",value:function(){$felisApp.env.fireEvent("topic-event-cancel-edit"),$felisApp.view.render(3)}},{key:"@@copyTopic",value:function(){$felisApp.view.focusTopic?$felisApp.view.copyTopic():Hi()}},{key:"@@cutTopic",value:function(){$felisApp.env.fireEvent("topic-event-cancel-edit"),$felisApp.view.focusTopic?$felisApp.view.cutTopic():Hi()}},{key:"@@pasteTopic",value:function(){$felisApp.view.focusTopic?$felisApp.view.pasteTopic():Hi()}},{key:"@@searchTopic",value:function(){ti()}},{key:"@@createSheet",value:function(){var e={title:"".concat(N("new sheet")," ").concat($felisApp.doc.sheetCount+1),topic:F({},Ln.DefaultTopicTemplate)};$felisApp.doc.addSheet(e),$felisApp.doc.switchToSheet(e.id,!0)}},{key:"@@cloneSheet",value:function(){var e=$felisApp.doc.getSheetByID($felisApp.view.sheetID),t={title:e?"".concat(e.title," ").concat(N("stub")):"".concat(N("new sheet")," ").concat($felisApp.doc.sheetCount+1),topic:F({},$felisApp.view.rootTopic.exportTopicData())};$felisApp.doc.addSheet(t),$felisApp.doc.switchToSheet(t.id,!0)}},{key:"@@renameSheet",value:(d=n(c.mark((function e(){var t,n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=$felisApp.doc.getSheetByID($felisApp.view.sheetID))){e.next=8;break}return e.next=4,er(N("Rename the sheet"),{default:t.title,tip:N("The name of the sheet"),submitText:N("Submit"),cancelText:N("Cancel")});case 4:if(void 0===(n=e.sent)){e.next=8;break}return e.next=8,$felisApp.menu.updateMenu("sheets",{title:"<span>".concat(t.title=String(n),"</span>"),titleAsHTML:!0});case 8:case"end":return e.stop()}}),e)}))),function(){return d.apply(this,arguments)})},{key:"@@deleteSheet",value:(h=n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(N("Are you sure to delete this sheet?\nThis is an irrepealable action!"),{icon:"warn",buttons:[N("Yes"),N("No")],default:1});case 2:0===e.sent&&$felisApp.doc.removeSheet($felisApp.view.sheetID,!0);case 4:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)})},{key:"@@switchSheets",value:(p=n(c.mark((function e(){var t,n,r,i,o,a,s;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=ji($felisApp.doc.enumerateSheet());try{for(n.s();!(r=n.n()).done;)i=r.value,t.push({id:i.sheet.id,toString:function(){return this}.bind(i.sheet.title)})}catch(e){n.e(e)}finally{n.f()}return o=$felisApp.menu.getMenuNode("sheets"),e.next=6,nr(t,o,{style:"font-size: 0.13rem !important;"});case 6:a=e.sent,isNaN(a)||(s=t[a].id,$felisApp.view.sheetID!==s&&$felisApp.doc.switchToSheet(s,!0));case 8:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"@@checkAndSaveModifiedDocument",value:(f=n(c.mark((function e(){var t,n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$felisApp.view.dirty&&!$felisApp.doc.dirty){e.next=21;break}return e.next=3,ar(N("The current mindmap is dirty.\nDo you want to save it first?"),{icon:"question",buttons:[N("Yes"),N("No"),N("Cancel")],default:2});case 3:t=e.sent,e.t0=t,e.next=0===e.t0?7:1===e.t0?15:17;break;case 7:if(n=$felisApp.callAction("saveMindmap"),e.t1=n instanceof Promise,!e.t1){e.next=12;break}return e.next=12,n;case 12:case 15:case 21:return e.abrupt("return",!0);case 17:return e.abrupt("return",!1);case 19:e.next=22;break;case 22:case"end":return e.stop()}}),e)}))),function(){return f.apply(this,arguments)})},{key:"@@openMindmap",value:(l=n(c.mark((function t(){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Sr(n(c.mark((function t(){var n;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$felisApp.callAction("checkAndSaveModifiedDocument");case 2:if(!t.sent){t.next=9;break}return t.next=5,lr();case 5:return n=t.sent,t.next=8,e["@@openMindmap-detail"](n.name,n);case 8:return t.abrupt("return",n.name);case 9:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"@@openMindmap-detail",value:(u=n(c.mark((function e(t,r){var i,o,a;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=String(t),o=i.lastIndexOf("."),o=r instanceof Blob&&r.$forceType||(o>=0?i.substring(o):""),console.info("openMindmap [",t,"] as",o),(a=gn(o)||gn(o=".felis"))&&"function"==typeof a.constructor&&(a=new a.constructor),e.next=9,a.load(r);case 9:return e.next=11,$felisApp.doc.newDocument(function(){var e=n(c.mark((function e(t){var n,r,i,o,s;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ji(a.enumerateAttachments()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=11;break}return i=r.value,e.next=7,a.readContent(i);case 7:(o=e.sent)&&t.setAttachment(i,o);case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return e.next=21,a.readSheets();case 21:(s=e.sent)instanceof Array||s&&(s=[s]),s&&s.forEach((function(e){t.addSheet(e)}));case 24:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t){return e.apply(this,arguments)}}(),$felisApp.doc);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(0),$felisApp.env.warn("Exception raised in openMindmap-detail",e.t0),e.next=18,$felisApp.doc.newDocument();case 18:case"end":return e.stop()}}),e,null,[[0,13]])}))),function(e,t){return u.apply(this,arguments)})},{key:"@@newFile",value:function(){return Ar(e["@@newFile-detail"])}},{key:"@@newFile-detail",value:(s=n(c.mark((function e(){var t,n,r,i;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$felisApp.callAction("checkAndSaveModifiedDocument");case 2:if(!e.sent){e.next=44;break}return e.prev=3,e.next=6,fetch("./templates/list.json").then((function(e){return e.json()}));case 6:if(!((t=e.sent)instanceof Array)){e.next=33;break}return e.next=10,or('<style>.newfile-panel{display:flex;flex-direction:column;justify-content:flex-start;justify-items:flex-start;flex-wrap:wrap;min-width:50%!important;max-width:90%!important;font-size:.1rem;user-select:none}.openfile-button{padding:.5em;border:1px solid #ccc;border-radius:.3em}.openfile-button:hover{background:linear-gradient(0deg,rgba(0,117,255,.9) 26%,rgba(0,157,255,.9) 90%,rgba(0,170,255,.9));color:#fff}.openfile-button:active{background:linear-gradient(180deg,rgba(0,117,255,.9) 26%,rgba(0,157,255,.9) 90%,rgba(0,170,255,.9));color:#fff}.template-list{display:flex;flex-direction:row;justify-content:space-around;justify-items:flex-start;flex-wrap:wrap}.template-item{display:flex;flex-direction:column;justify-content:flex-start;justify-items:flex-start;width:128px;overflow:hidden;margin:.1rem;border-radius:6px}.template-item:hover{box-shadow:0 0 5px #ccc}.template-item>div{width:128px;height:128px;box-sizing:border-box;border-radius:6px;background-position:center;background-repeat:no-repeat;background-attachment:local;background-size:cover;background-origin:border-box}.template-item>span{padding:6px 0;white-space:nowrap;text-align:center}</style><div class="newfile-panel"><div class="template-list"></div><button class="openfile-button" d-click="onAcquireOpen"></button></div>',{onInitialize:function(e){var n=e.root.querySelector(".template-list");n.insertAdjacentHTML("beforeend",'<div class="template-item" d-click="onSelect" d-click-args="-1"><div style="background-image: url(./assets/file-thumb-large.png);"></div><span>'.concat(N("Empty Topic"),"</span></div>")),t.forEach((function(e,t){n.insertAdjacentHTML("beforeend",'<div class="template-item" d-click="onSelect" d-click-args=\''.concat(t,"'><div style=\"background-image: url(").concat(e.image||"./assets/file-thumb-large.png",');"></div><span>').concat(N(e.title),"</span></div>"))}));var r=e.root.querySelector(".openfile-button");r&&(r.textContent=N("Open Existing Mindmap"))},onSelect:function(e,t,n){e.close(n)},onAcquireOpen:function(e){e.close("openMindmap")}});case 10:if("openMindmap"!==(n=e.sent)){e.next=15;break}$felisApp.callAction("openMindmap"),e.next=31;break;case 15:if(isNaN(n=Number(n))){e.next=31;break}if(!(n<0)){e.next=21;break}return e.next=19,Ln.SetTemplate();case 19:e.next=31;break;case 21:if(!(n=t[n])){e.next=31;break}return e.next=24,fetch(n.file).then((function(e){return e.blob()}));case 24:if(!((r=e.sent)instanceof Blob)){e.next=31;break}return i=new(gn(".felis").constructor),e.next=29,i.load(r);case 29:return e.next=31,Ln.SetTemplate(i);case 31:e.next=34;break;case 33:throw"Invalid list of the templates";case 34:e.next=41;break;case 36:return e.prev=36,e.t0=e.catch(3),Xn("".concat(N("Cannot create mindmap from template!")).concat(e.t0?"\n"+N(e.t0 instanceof Error?e.t0.message:String(e.t0)):""),{type:"error",timeout:2e3}),e.next=41,Ln.SetTemplate();case 41:return $felisApp.doc.newDocument(),Lr(),e.abrupt("return",!0);case 44:case"end":return e.stop()}}),e,null,[[3,36]])}))),function(){return s.apply(this,arguments)})},{key:"@@dumpMindmap-toBlob",value:(a=n(c.mark((function e(t,r){var i;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=gn(t)||gn(".felis"))&&"function"==typeof i.constructor&&(i=new i.constructor),e.abrupt("return",i&&$felisApp.doc.saveDocument(n(c.mark((function e(){var t,n,o,a,s,u,l,f;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=ji($felisApp.doc.enumerateSheet());try{for(n.s();!(o=n.n()).done;)a=o.value,t.push(a.sheet)}catch(e){n.e(e)}finally{n.f()}return e.next=5,i.writeSheets(t);case 5:s=ji($felisApp.doc.enumerateAttachment()),e.prev=6,s.s();case 8:if((u=s.n()).done){e.next=16;break}if(l=u.value,e.t0=l.name,!e.t0){e.next=14;break}return e.next=14,i.writeContent(l.name,l.data);case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(6),s.e(e.t1);case 21:return e.prev=21,s.f(),e.finish(21);case 24:return e.next=26,$felisApp.view.exportImage({type:"png",toBlob:!0,fill:"#ffffff",keepWorkState:!!r});case 26:if(!((f=e.sent)&&f.data instanceof Blob)){e.next=30;break}return e.next=30,i.writeContent("Thumbnails\\thumbnail.png",f.data);case 30:return e.next=32,i.save("mindmap");case 32:return e.abrupt("return",e.sent);case 33:case"end":return e.stop()}}),e,null,[[6,18,21,24]])}))),r));case 3:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"@@saveMindmap-detail",value:(o=n(c.mark((function t(n,r,i){var o,a;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=String(n||""),o=n.substring(n.lastIndexOf(".")),t.next=4,e["@@dumpMindmap-toBlob"](o);case 4:if(!((a=t.sent)instanceof Blob)){t.next=16;break}if(!r&&n){t.next=11;break}return t.next=9,xr(a,n,o,!0,i);case 9:t.next=13;break;case 11:return t.next=13,br(a,n,!0,i);case 13:$felisApp.doc.clearDirtyFlag((function(e){return e+1})),t.next=17;break;case 16:Xn(N("Unsupported type of file"),{type:"error",timeout:2e3});case 17:case"end":return t.stop()}}),t)}))),function(e,t,n){return o.apply(this,arguments)})},{key:"@@saveMindmap",value:(i=n(c.mark((function t(n){var r;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Tr(!0);case 2:if(!(r=t.sent)){t.next=14;break}if(t.t0="fromHost"===n,t.t0){t.next=9;break}return t.next=8,jr();case 8:t.t0=!t.sent;case 9:if(!t.t0){t.next=12;break}return t.next=12,e["@@saveMindmap-detail"](r);case 12:t.next=16;break;case 14:return t.next=16,$felisApp.callAction("saveMindmapAs");case 16:case"end":return t.stop()}}),t)}))),function(e){return i.apply(this,arguments)})},{key:"@@saveMindmapAs",value:(r=n(c.mark((function t(){var n,r;return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,or('<style>.file-format-list{display:flex;flex-direction:row;justify-content:space-around;justify-items:flex-start;flex-wrap:wrap;width:50%!important;max-width:320px!important;font-size:.1rem;user-select:none}.file-format-item{display:flex;flex-direction:column;justify-content:flex-start;justify-items:flex-start;width:64px;overflow:hidden;margin:.1rem}.file-format-item:hover{box-shadow:0 0 5px #ccc}.file-format-item>img{width:64px;height:64px;box-sizing:border-box}.file-format-item>span{white-space:nowrap;text-align:center}</style><div class="file-format-list"></div>',{blurToClose:void 0,onInitialize:function(e){var t,n=e.root.querySelector(".file-format-list"),r=ji(gn.enumerate());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.insertAdjacentHTML("beforeend",'<div class="file-format-item" d-click="onSelect" d-click-args=\'"'.concat(i.key,'"\'><img src="').concat(i.provider.image||"./logo/felis-mindmap/logo256.png",'" /><span>').concat(i.provider.name,"</span></div>"))}}catch(e){r.e(e)}finally{r.f()}},onSelect:function(e,t,n){e.close(n)}});case 2:if(!(n=t.sent)){t.next=10;break}return t.next=6,Tr();case 6:return r=((r=t.sent)?(r+" ").slice(0,r.lastIndexOf(".")):N("New_File"))+n,t.next=10,e["@@saveMindmap-detail"](r,!0,!0);case 10:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"@@exportAsPng",value:(t=n(c.mark((function e(){var t,n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$felisApp.view.exportImage({type:"png",toBlob:!0});case 2:(t=e.sent)&&t.data instanceof Blob&&(n=$felisApp.doc.getSheetByID($felisApp.view.sheetID),xr(t.data,"".concat(n?n.title:"mindmap",".png"),".png",!1));case 4:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"@@configPreference",value:function(){return or('<style>.config-ui-dialog{width:90%;height:90%;padding:.1rem}.config-global-panel{display:flex;flex-direction:column;justify-content:flex-start;justify-items:flex-start;width:100%;height:100%;overflow:scroll}.config-global-panel :not(input){user-select:none}.config-global-panel>[d-anchor]{font-weight:bolder;font-size:.9em;background:rgba(128,128,128,.1);padding:0 0 .05rem 0}.config-global-panel>[d-anchor]:hover{font-weight:bolder;font-size:.9em;background:rgba(128,128,128,.3)}.config-global-panel>[d-anchor]+div{margin:.5em 1em}</style><div class="config-ui-dialog"><div class="config-global-panel"><div id="items"></div><div id="work"></div></div></div>',Bi)}},{key:"@@editTopicTitle",value:function(){$felisApp.view.editFocusTopic()}},{key:"@@selectRootTopic",value:function(){$felisApp.view.gotoRootTopic()}},{key:"@@showWaitDialog",value:function(){return Pi.apply(void 0,Array.prototype.slice.call(arguments,0))}}]),e}();function Xi(e,t,n){t.id&&e.setAttribute("d-menu-id",t.id);var r=e.getAttribute("d-menu-id");if(void 0!==t.title){var i=document.evaluate("text()",e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;i&&i.remove();var o=e.querySelectorAll(":scope > :not([d-menu-reserve]):not(.mindmap-menugroup)");o instanceof NodeList&&o.forEach((function(e){return e.remove()})),t.titleAsHTML?e.insertAdjacentHTML("afterbegin",t.title):e.prepend(document.createTextNode(N(t.title)))}if(void 0!==t.action&&e.setAttribute("d-menu-action",t.action),void 0!==t.arg&&e.setAttribute("d-menu-arg",t.arg),n&&r in n&&(t.shortcut=n[e.getAttribute("d-menu-id")]),"shortcut"in t){var a=e.querySelector(":scope > code[d-menu-reserve]"),s=a&&String(a.textContent).toLowerCase().trim(),c=String(t.shortcut).trim(),u=c.toLowerCase();if(u!=s){if(c)document.evaluate('.//code[translate(text(), "ABCDEFGHIJKLMNOPQRSTUVWXYZ", "abcdefghijklmnopqrstuvwxyz")="'.concat(u,'"]'),U(this,Wi),null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength&&(c=t.shortcut=void 0);s&&s in $felisApp.view.UIControlMap&&delete $felisApp.view.UIControlMap[s],c?(a||(a=document.createElement("code")),a.setAttribute("d-menu-reserve",""),a.textContent=t.shortcut,e.appendChild(a),$felisApp.view.UIControlMap[String(t.shortcut).toLowerCase()]={action:"call-app-action",args:[e.getAttribute("d-menu-action")]}):a&&a.remove()}}if(void 0!==t.image)if(t.image){var l=document.createElement("img");l.setAttribute("src",t.image),l.setAttribute("d-menu-reserve",""),e.insertAdjacentElement("afterbegin",l)}else{var f=e.querySelector(":scope > img[d-menu-reserve]");f&&f.remove()}void 0!==t.nodeClass&&e.setAttribute("class",t.nodeClass?"listitem ".concat(t.nodeClass):"listitem")}function Ki(e,t,n,r,i){var o=this;e instanceof Array||(e=[e]);var a=new DocumentFragment;e.forEach((function(e){var n=document.createElement("div");if(e.id&&e.title){if(n.setAttribute("class","listitem"),qi(o,Vi,Xi).call(o,n,e,i),e.image&&t.setAttribute("d-menu-image",""),e.menus instanceof Array){var s=document.createElement("div");s.setAttribute("class","mindmap-menugroup"),qi(o,Gi,Ki).call(o,e.menus,s,void 0,!1,i),n.appendChild(s),r||(s.setAttribute("d-menugroup-right",""),n.setAttribute("d-menu-suffix",""))}}else n.setAttribute("class","separater-line"),r&&n.setAttribute("d-horizontal",""),n.insertAdjacentHTML("afterbegin","&nbsp;"),e.id&&n.setAttribute("d-menu-id",e.id);a.appendChild(n)})),n instanceof Node?n.insertAdjacentElement("beforebegin",a):t.appendChild(a)}function Ji(){U(this,Wi).innerHTML="",this.registerMenus(Zi.DefaultMenus)}Bn(Zi,"DefaultMenus",[{id:"file",title:"File",menus:[{id:"file.new",title:"New",action:"newFile",shortcut:"Ctrl+N"},{id:"file.open",title:"Open",action:"openMindmap",shortcut:"Ctrl+O"},{id:"file.save",title:"Save",action:"saveMindmap",shortcut:"Ctrl+S"},{id:"file.saveas",title:"Save as",action:"saveMindmapAs"},{},{id:"file.export",title:"Export As",menus:[{id:"file.export.png",title:"PNG",action:"exportAsPng"}]},{},{id:"file.preference",title:"Preference",action:"configPreference"}]},{id:"edit",title:"Edit",menus:[{id:"edit.undo",title:"Undo",action:"undo",shortcut:"Ctrl+Z"},{id:"edit.redo",title:"Redo",action:"redo",shortcut:"Ctrl+Y"},{},{id:"edit.copy",title:"Copy Topic",action:"copyTopic",shortcut:"Ctrl+C"},{id:"edit.cut",title:"Cut Topic",action:"cutTopic",shortcut:"Ctrl+X"},{id:"edit.paste",title:"Paste Topic",action:"pasteTopic",shortcut:"Ctrl+V"},{},{id:"edit.search",title:"Search",action:"searchTopic",shortcut:"Ctrl+F"},{id:"edit.select.roottopic",title:"Select Root Topic",action:"selectRootTopic",shortcut:"Home"},{},{id:"edit.create.childtopic",title:"Add Child Topic",action:"createChildTopic",shortcut:"Tab"},{id:"edit.create.siblingtopic",title:"Add Sibling Topic",action:"createSiblingTopic",shortcut:"Enter"},{},{id:"edit.deletetopic",title:"Delete Topic",action:"deleteTopic",shortcut:"Delete"},{},{id:"edit.title",title:"Edit Topic's Title",action:"editTopicTitle",shortcut:"F2"},{id:"edit.component",title:"Edit Topic's Components",action:"editComponents",shortcut:"F10"}]},{id:"view",title:"View",menus:[{id:"view.tocenter.root",title:"Take root topic to center",action:"rootToCenter"},{id:"view.tocenter.focus",title:"Take focus topic to center",action:"focusToCenter"},{},{id:"view.zoom.reset",title:"Reset the scale",action:"zoomReset"},{id:"view.zoom.in",title:"Zoom In",action:"zoomIn"},{id:"view.zoom.out",title:"Zoom Out",action:"zoomOut"},{},{id:"view.fold",title:"Fold",menus:[{id:"view.fold.none",title:"Expand All",action:"foldNone"},{},{id:"view.fold.1",title:"Level 1",action:"fold1"},{id:"view.fold.2",title:"Level 2",action:"fold2"},{id:"view.fold.3",title:"Level 3",action:"fold3"}]}]},{id:"addons",title:"Addons"},{},{id:"sheets",title:"Sheets",nodeClass:"sheet-top-menu",menus:[{id:"sheets.switch",title:"Switch sheets",action:"switchSheets"},{},{id:"sheets.create",title:"Create a new sheet",action:"createSheet"},{id:"sheets.clone",title:"Clone the current sheet",action:"cloneSheet"},{id:"sheets.rename",title:"Rename the current sheet",action:"renameSheet"},{id:"sheets.delete",title:"Delete the current sheet",action:"deleteSheet"}]}]);var Qi=y.exports.CreateTopicExtensionFactor('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs eblock-predefined="" d-tag="felis-mindmap-view-used-icon"><symbol id="icon-add-child-topic" width="26" height="20" viewBox="0 0 26 20" preserveAspectRatio="none"><path d="M 1.5 4 L 1.5 9 L 9.5 9 L 9.5 14 L 12.5 14 L 12.5 16 L 24.5 16 L 24.5 11 L 12.5 11 L 12.5 13 L 10.5 13 L 10.5 9 L 17.5 9 L 17.5 4 L 1.5 4 z M 2.5 5 L 16.5 5 L 16.5 8 L 2.5 8 L 2.5 5 z M 4.5 11 L 4.5 13 L 2.5 13 L 2.5 14 L 4.5 14 L 4.5 16 L 5.5 16 L 5.5 14 L 7.5 14 L 7.5 13 L 5.5 13 L 5.5 11 L 4.5 11 z M 13.5 12 L 23.5 12 L 23.5 15 L 13.5 15 L 13.5 12 z"></path></symbol><symbol id="icon-add-sibling-topic" width="26" height="20" viewBox="0 0 26 20" preserveAspectRatio="none"><path d="M 12 4 L 12 6 L 9 6 L 9 14 L 12 14 L 12 16 L 24 16 L 24 11 L 12 11 L 12 13 L 10 13 L 10 7 L 12 7 L 12 8.996 L 24 8.996 L 24 4 L 12 4 z M 13 5 L 23 5 L 23 7.996 L 13 7.996 L 13 5 z M 4.5 7.5 L 4.5 9.5 L 2.5 9.5 L 2.5 10.5 L 4.5 10.5 L 4.5 12.5 L 5.5 12.5 L 5.5 10.5 L 7.5 10.5 L 7.5 9.5 L 5.5 9.5 L 5.5 7.5 L 4.5 7.5 z M 13 12 L 23 12 L 23 15 L 13 15 L 13 12 z "></path></symbol><symbol id="icon-delete-topic" width="26" height="20" viewBox="0 0 26 20" preserveAspectRatio="none"><path d="m 2.56,6 v 6 h 11.5 V 11 H 3.56 V 7 h 14 v 1.5 h 1 V 6 Z M 22.62,8.994 18.85,11.35 15.09,9 l -0.53,0.848 3.35,2.092 -3.35,2.09 0.53,0.85 3.76,-2.35 3.77,2.35 0.53,-0.85 -3.36,-2.09 3.36,-2.098 z"></path></symbol><symbol id="icon-paste" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 11.5,3 c -0.55,0 -1,0.45 -1,1 V 4.5 H 6.25 c -0.55,0 -1,0.45 -1,1 V 22 c 0,0.55 0.45,1 1,1 h 13.5 c 0.55,0 1,-0.45 1,-1 V 5.5 c 0,-0.55 -0.45,-1 -1,-1 H 15.5 V 4 c 0,-0.55 -0.45,-1 -1,-1 z M 13,4 v 0 c 0.4,0 0.72,0.35 0.72,0.75 C 13.72,5.175 13.42,5.5 13,5.5 12.57,5.5 12.25,5.175 12.25,4.75 12.25,4.325 12.57,4 13,4 Z M 6.75,6 H 9.5 v 1.5 h 7 V 6 h 2.75 V 21.5 H 6.75 Z m 1.5,3.525 v 1.005 h 7.5 V 9.525 Z m 0,3.005 v 1 h 9.5 v -1 z m 0,2.97 v 1 h 7.5 v -1 z m 0,3 v 1 h 9.5 v -1 z"></path></symbol><symbol id="icon-copy" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 5,3 v 17.33 h 2.66 v -1.3 H 6.29 V 4.3 H 17.05 V 6.457 L 16.26,5.671 H 7.66 V 23 H 21 V 10.44 L 18.34,7.757 V 3 Z m 3.95,3.971 h 6.02 v 4.549 h 4.74 V 21.7 H 8.95 Z m 7.31,0.541 2.69,2.708 h -2.69 z m 0.14,6.428 v 1.74 h 1.72 v -1.74 z m -6.02,0.44 v 0.86 h 4.3 v -0.86 z m 6.02,3.03 v 1.73 h 1.72 v -1.73 z m -6.02,0.43 v 0.87 h 4.3 v -0.87 z"></path></symbol><symbol id="icon-cut" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 19.03,22.56 c 1.45,-0.86 1.95,-2.73 1.09,-4.18 -0.86,-1.46 -2.73,-1.95 -4.18,-1.09 -0.26,0.15 -0.52,0.36 -0.73,0.59 L 14.82,14.66 14.4,13.88 14.5,13.73 17.73,5.961 17.34,3 13.55,10.17 12.98,11.23 12.4,10.17 8.641,3 l -0.37,2.961 3.249,7.769 0.1,0.15 -0.41,0.78 -0.39,3.22 C 10.61,17.65 10.35,17.44 10.09,17.29 8.631,16.46 6.761,16.95 5.901,18.4 c -0.83,1.46 -0.33,3.33 1.12,4.19 1.46,0.83 3.329,0.33 4.189,-1.12 0.1,-0.21 0.2,-0.44 0.28,-0.68 l 1.09,-2.62 0.42,-1.01 0.41,1.01 1.14,2.62 c 0.1,0.24 0.19,0.47 0.29,0.68 0.83,1.45 2.7,1.97 4.18,1.12 0,0 0,0 0,0 z m -9.139,-1.9 c -0.42,0.73 -1.36,0.99 -2.08,0.57 -0.73,-0.41 -0.99,-1.35 -0.57,-2.07 0.41,-0.73 1.35,-0.99 2.07,-0.57 0.729,0.41 0.989,1.35 0.58,2.07 z m 3.859,-5.82 v 0 c 0,0.42 -0.33,0.76 -0.75,0.76 -0.41,0 -0.75,-0.34 -0.75,-0.76 0,-0.41 0.34,-0.75 0.75,-0.75 0.42,0 0.75,0.31 0.75,0.75 z m 5.02,4.32 c 0.41,0.72 0.15,1.66 -0.57,2.07 -0.73,0.42 -1.66,0.16 -2.08,-0.57 -0.42,-0.72 -0.16,-1.66 0.57,-2.07 0,0 0,0 0,0 0.73,-0.42 1.66,-0.16 2.08,0.57 0,0 0,0 0,0 z"></path></symbol><symbol id="icon-component" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 18.61,3.5 c -0.1,0 -0.15,0 -0.25,0 -1.49,0.05 -2.9,0.933 -3.61,2.244 -0.86,1.463 -0.76,3.404 0.25,4.746 0.88,1.23 2.42,1.96 3.94,1.81 1.53,-0.1 3,-1.11 3.65,-2.521 C 23.3,8.291 23.07,6.425 22.04,5.164 21.23,4.13 19.94,3.5 18.61,3.5 Z m 0.12,1.513 c 1.16,0.05 2.25,0.857 2.6,1.967 0.38,1.084 0,2.395 -0.86,3.15 -0.95,0.81 -2.44,0.91 -3.48,0.2 -0.93,-0.577 -1.46,-1.787 -1.26,-2.896 0.18,-1.211 1.21,-2.219 2.42,-2.396 0.18,-0.03 0.38,-0.03 0.58,-0.03 z m -7.76,0.63 C 10.82,5.669 10.64,5.719 10.49,5.769 7.993,6.425 5.496,7.081 3,7.761 3.706,10.41 4.412,13.08 5.118,15.73 7.766,15.02 10.44,14.32 13.09,13.61 12.38,10.96 11.67,8.291 10.97,5.643 Z M 9.909,7.459 C 10.36,9.173 10.82,10.86 11.27,12.55 9.556,13.01 7.867,13.46 6.177,13.91 5.723,12.2 5.269,10.51 4.815,8.82 6.53,8.367 8.22,7.913 9.909,7.459 Z m 4.661,4.511 -0.22,0.83 c -0.89,3.18 -1.77,6.38 -2.68,9.56 3.51,-0.91 7.01,-1.84 10.52,-2.77 z m 0.76,2.9 3.93,3.94 c -1.79,0.45 -3.6,0.93 -5.39,1.41 0.48,-1.79 0.98,-3.56 1.46,-5.35 z"></path></symbol><symbol id="icon-clip" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="M 5.603,21.38 C 3.568,19.31 3.598,16 5.703,13.96 L 15.76,4.094 c 1.52,-1.486 3.97,-1.463 5.46,0.1 1.5,1.507 1.47,3.971 -0.1,5.457 l -9.26,9.089 c -0.98,0.97 -2.545,0.96 -3.513,0 -0.968,-0.98 -0.948,-2.54 0,-3.51 l 4.723,-4.64 1.16,1.18 -4.726,4.64 c -0.339,0.33 -0.339,0.84 0,1.18 0.33,0.33 0.836,0.34 1.166,0 l 9.28,-9.106 c 0.87,-0.858 0.88,-2.255 0,-3.123 -0.84,-0.867 -2.25,-0.887 -3.12,0 L 6.831,15.15 c -1.417,1.39 -1.437,3.65 0,5.07 1.396,1.42 3.659,1.44 5.079,0.1 l 4.14,-4.06 1.16,1.18 -4.14,4.06 C 11,23.53 7.679,23.5 5.653,21.4 Z"></path></symbol><symbol id="icon-flag" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 11.11,3.25 c -0.24,0 -0.48,0.161 -0.59,0.411 L 3.053,21.88 c -0.138,0.36 0,0.73 0.342,0.91 0.343,0.14 0.754,0 0.925,-0.38 L 11.79,4.179 C 11.93,3.826 11.72,3.432 11.38,3.295 11.28,3.26 11.21,3.25 11.11,3.25 Z m 2.54,1.223 c -0.32,0 -0.59,0.03 -0.9,0.114 L 8.981,13.82 c 0.275,-0.1 0.548,-0.12 0.856,-0.11 0.753,0 1.513,0.18 2.193,0.48 2.16,0.88 3.7,3.04 6.55,3.04 0.21,0 0.41,0 0.65,0 L 23,7.949 C 19.12,7.771 18.13,5.893 15.8,4.95 15.12,4.652 14.4,4.491 13.65,4.473 Z m 0,1.033 c 0.61,0 1.23,0.15 1.78,0.397 0,0 0.1,0.04 0.1,0.04 l -1.07,2.653 c 0.72,0.343 1.41,0.74 2.1,1.186 L 17.61,7.17 c 0.66,0.452 1.37,0.836 2.09,1.142 L 18.58,10.97 C 17.9,10.63 17.21,10.25 16.59,9.824 l -0.1,-0.05 -0.96,2.426 c 0.65,0.44 1.37,0.83 2.09,1.17 l -1,2.38 c -0.64,-0.33 -1.26,-0.71 -1.85,-1.14 -0.1,0 -0.13,-0.1 -0.2,-0.13 l 0.96,-2.28 -0.28,-0.17 c -0.58,-0.39 -1.19,-0.74 -1.81,-1.04 l 0.99,-2.4 C 14.29,8.539 14.19,8.491 14.09,8.443 13.58,8.23 13.03,8.073 12.48,7.97 l 1.03,-2.464 c 0,0 0.1,0 0.14,0 z M 11.48,10.4 c 0.55,0.1 1.1,0.21 1.62,0.43 0.14,0.1 0.23,0.11 0.34,0.16 l -0.93,2.29 c 0,0 -0.1,0 -0.1,0 -0.58,-0.29 -1.24,-0.46 -1.89,-0.55 z m 7.1,0.58 c 0.58,0.26 1.2,0.46 1.81,0.6 l -0.99,2.4 C 18.93,13.87 18.41,13.7 17.93,13.5 17.83,13.4 17.72,13.4 17.62,13.36 Z"></path></symbol><symbol id="icon-notes" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 17.81,2.9 c -0.24,0 -0.49,0.09 -0.49,0.227 l -0.25,0.474 c -0.24,0.178 -0.24,0.415 0,0.603 l 0.25,0.543 -1.48,2.222 c -0.99,0.08 -1.73,0.61 -1.98,1.403 0.5,0.765 1.24,1.409 1.98,1.888 l -0.74,1.65 c -0.25,0.31 0,0.68 0.25,0.83 0.24,0.15 0.74,0 0.74,-0.28 0,0 0,-0 0,-0 l 0.98,-1.65 c 0.74,0.32 1.73,0.46 2.72,0.41 v 0 c 0.25,-0.81 0.25,-1.752 -0.25,-2.483 l 0.74,-2.555 0.74,-0.1 c 0,-0.03 0.25,-0.191 0.25,-0.403 l 0.25,-0.565 c 0,-0.228 0,-0.465 -0.25,-0.593 -0.99,-0.68 -2.22,-1.208 -3.46,-1.566 0,-0.02 0,-0.02 0,-0.02 z M 6.951,5.317 3,19.05 8.926,20.8 v 1.85 h 7.904 c 0.98,0 2.22,-0.47 2.96,-1.31 l 1.98,-2.22 C 22.51,18.36 23,17.32 23,16.23 V 9.014 h -2.22 c 0,0.318 0.24,0.649 0.24,0.986 h 0.99 v 5.74 c 0,0.81 -0.74,1.48 -1.48,1.48 h -2.72 v 2.99 c 0,0.79 -0.74,1.46 -1.48,1.46 H 9.914 V 10 H 13.86 C 13.62,9.698 13.37,9.367 13.12,9.014 H 8.926 V 19.76 L 3.988,18.36 7.444,6.542 12.88,8.073 V 7.952 c 0,-0.272 0.24,-0.524 0.49,-0.748 z M 21.52,18.01 c -0.25,0.17 -0.25,0.3 -0.5,0.45 l -1.97,2.19 c 0,0.13 -0.25,0.23 -0.25,0.32 0,-0.24 0,-0.49 0,-0.76 v -2 h 1.73 c 0.25,0 0.74,-0.1 0.99,-0.2 z"></path></symbol><symbol id="icon-label" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 12.23,3.2 h -0.2 -6.004 v 0 0 c -1,0 -1.9,0.58 -2.4,1.4 -0.3,0.51 -0.5,1.13 -0.4,1.73 v 6.01 c 0,0.42 0.2,0.82 0.5,1.1 3.1,3.1 6.202,6.22 9.304,9.34 0.5,0.46 1.21,0.55 1.8,0.22 0.2,-0.1 0.4,-0.22 0.5,-0.38 2.4,-2.45 4.8,-4.91 7.3,-7.38 0.4,-0.5 0.5,-1.31 0.2,-1.9 -0.2,-0.31 -0.5,-0.55 -0.69,-0.81 -3.01,-2.968 -5.9,-5.94 -8.91,-8.91 -0.2,-0.27 -0.6,-0.41 -1,-0.42 z m -0.1,1.25 c 0.2,0 0.4,0.21 0.5,0.33 3,3.032 6.1,6.07 9.1,9.1 0.1,0.18 0.1,0.46 -0.1,0.59 -2.5,2.46 -4.9,4.93 -7.3,7.39 -0.2,0.14 -0.4,0.1 -0.6,-0.1 -0.3,-0.27 -0.5,-0.58 -0.8,-0.87 -2.8,-2.83 -5.604,-5.65 -8.404,-8.47 -0.1,-0.15 -0.1,-0.36 -0.1,-0.53 V 6.05 C 4.426,5.36 4.824,4.71 5.524,4.501 7.592,4.344 9.95,4.45 12.13,4.45 Z M 6.226,4.92 c -0.7,0 -1.3,0.59 -1.3,1.32 0,0.72 0.6,1.312 1.3,1.312 0.7,0 1.302,-0.592 1.302,-1.312 0,-0.349 -0.1,-0.69 -0.402,-0.93 -0.2,-0.25 -0.6,-0.39 -0.9,-0.39 z m 0,0.66 c 0.2,0 0.3,0.1 0.5,0.19 0.2,0.25 0.2,0.67 0,0.931 v 0 c -0.3,0.259 -0.7,0.259 -0.9,0 -0.3,-0.261 -0.3,-0.671 0,-0.931 0.1,-0.13 0.2,-0.19 0.4,-0.19 z m 8.104,2.333 c -0.1,0.1 -0.2,0.139 -0.2,0.209 -2.1,2.088 -4.202,4.178 -6.202,6.268 0.3,0.29 0.5,0.59 0.8,0.87 2.202,-2.16 4.302,-4.31 6.402,-6.468 -0.3,-0.289 -0.5,-0.59 -0.8,-0.879 z m 2.3,2.317 c -0.1,0.1 -0.2,0.15 -0.2,0.22 -2.1,2.08 -4.2,4.17 -6.2,6.26 0.3,0.29 0.5,0.59 0.8,0.87 2.2,-2.15 4.3,-4.3 6.4,-6.46 -0.3,-0.29 -0.5,-0.59 -0.8,-0.89 z m 2.3,2.33 c -0.1,0.1 -0.2,0.14 -0.2,0.21 -2.1,2.09 -4.2,4.17 -6.2,6.26 0.3,0.29 0.6,0.59 0.8,0.9 2.2,-2.16 4.3,-4.32 6.4,-6.48 -0.2,-0.29 -0.5,-0.59 -0.8,-0.89 z"></path></symbol><symbol id="icon-picture" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 3,5.25 v 15.5 H 23 V 5.25 Z m 1.5,1.5 h 17 v 12.5 H 4.5 Z M 7.75,8 C 7.325,8 7,8.335 7,8.75 7,9.165 7.325,9.5 7.75,9.5 8.175,9.5 8.5,9.165 8.5,8.75 8.5,8.335 8.175,8 7.75,8 Z m 3.2,0.198 c -0.1,0 -0.22,0.05 -0.27,0.137 L 5.225,17.18 c -0.08,0.11 -0.1,0.25 -0.02,0.37 0.05,0.11 0.175,0.16 0.3,0.15 H 16.5 c 0.14,0 0.25,0 0.31,-0.15 0.1,-0.12 0,-0.26 0,-0.37 L 11.33,8.335 C 11.28,8.245 11.15,8.192 11.05,8.198 H 11 Z m 0.1,1.499 2.2,3.553 -1.3,-0.77 -0.85,0.77 -0.87,-0.77 -1.43,0.87 z m 5.8,1.843 c -0.12,0 -0.22,0.1 -0.3,0.16 l -1,1.6 2.15,3.47 c 0.18,0.28 0.23,0.62 0.1,0.93 h 2.42 c 0.2,0 0.38,-0.14 0.38,-0.34 0,-0.1 0,-0.15 -0.1,-0.21 L 17.08,11.7 C 16.98,11.6 16.9,11.54 16.8,11.54 Z"></path></symbol><symbol id="icon-information" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="m 13.22,3 c -0.2,0 -0.3,0 -0.5,0 C 10.22,3.1 7.813,4.091 6.011,5.843 4.209,7.595 3.108,10.08 3.008,12.6 c -0.101,2.49 0.8,5.01 2.503,6.87 1.702,1.9 4.104,3.12 6.709,3.3 2.4,0.2 4.91,-0.53 6.91,-2.03 2.1,-1.6 3.5,-4.08 3.8,-6.71 0.3,-2.47 -0.4,-5.033 -1.9,-7.026 C 19.53,4.902 17.03,3.45 14.42,3.1 14.02,3 13.62,3 13.22,3 Z m -0.2,1.492 c 0.6,0 1.1,0.1 1.7,0.17 0.1,0 0.3,0 0.4,0.1 2.41,0.601 4.51,2.282 5.51,4.495 0.8,1.653 1.1,3.563 0.7,5.363 0,0.1 -0.1,0.26 -0.1,0.37 -0.6,2.43 -2.4,4.52 -4.61,5.57 -2.4,1.08 -5.2,1.03 -7.505,-0.12 -2.203,-1.1 -3.804,-3.19 -4.405,-5.58 0,-0.19 0,-0.3 -0.1,-0.48 C 4.209,12.2 4.71,9.877 6.011,8.086 7.413,6.113 9.715,4.792 12.12,4.552 c 0.3,0 0.6,0 0.9,0 z m -0.3,2.032 c 0,0 0,0 0,0 -0.6,0 -1.1,0.57 -1.1,1.161 0.1,0.591 0.7,1.061 1.3,0.931 0.6,-0.1 1,-0.751 0.8,-1.331 -0.1,-0.431 -0.5,-0.761 -1,-0.761 z m -2,2.663 v 0.5 0.993 h 1.5 v 6.44 h -1.7 v 1.49 h 5 v -1.49 h -1.8 V 9.187 Z"></path></symbol><symbol id="icon-arrow-left" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="M 13,3 C 7.474,3 3,7.474 3,13 3,18.53 7.474,23 13,23 18.53,23 23,18.53 23,13 23,7.474 18.53,3 13,3 Z m 0,1.579 c 4.66,0 8.42,3.763 8.42,8.421 0,4.66 -3.76,8.42 -8.42,8.42 C 8.342,21.42 4.579,17.66 4.579,13 4.579,8.342 8.342,4.579 13,4.579 Z m -1.58,3.974 c -0.18,-0.03 -0.39,0.05 -0.55,0.21 L 7.184,12.45 c -0.316,0.31 -0.316,0.79 0,1.1 l 3.686,3.69 c 0.29,0.29 0.76,0.29 1.08,0 0.31,-0.29 0.31,-0.79 0,-1.11 L 9.632,13.79 h 8.628 c 0.45,0 0.79,-0.34 0.79,-0.79 0,-0.45 -0.34,-0.79 -0.79,-0.79 H 9.632 L 11.97,9.868 c 0.29,-0.289 0.29,-0.763 0,-1.079 C 11.84,8.632 11.63,8.553 11.42,8.553 Z"></path></symbol><symbol id="icon-search" width="26" height="26" viewBox="0 0 26 26" preserveAspectRatio="none"><path d="M 22.48,19.98 19.32,16.81 C 18.89,16.38 18.3,16.23 17.75,16.33 L 16.63,15.21 C 17.62,13.95 18.2,12.32 18.2,10.6 18.2,6.42 14.78,3 10.6,3 6.42,3 3,6.42 3,10.6 c 0,4.18 3.42,7.6 7.6,7.6 1.72,0 3.32,-0.58 4.61,-1.57 l 1.12,1.12 c -0.1,0.55 0.1,1.14 0.48,1.57 l 3.17,3.16 c 0.35,0.36 0.81,0.54 1.26,0.54 0.46,0 0.91,-0.18 1.27,-0.54 0.66,-0.71 0.66,-1.82 0,-2.5 z m -11.9,-3.32 c -3.35,0 -6.09,-2.74 -6.09,-6.08 0,-3.35 2.74,-6.09 6.09,-6.09 3.34,0 6.08,2.74 6.08,6.09 0,3.34 -2.74,6.08 -6.08,6.08 z"></path></symbol></defs><script eblock-script=""><![CDATA[        declarer.getExtensionInfo = function () {            return {                name: "custom-use-icon"            };        };    ]]><\/script><g eblock-template=""></g></svg>');function eo(){var e=ui($felisApp,"actions");return e||ui($felisApp,"actions",e={}),e}var to={registerAction:function(e,t){e&&"function"==typeof t&&(eo()[e]=t)},unregisterAction:function(e){e&&delete eo()[e]},callAction:function(e){var t=eo()[e];return"function"==typeof t&&t.apply($felisApp,Array.prototype.slice.call(arguments,1))},DB:hr,hostAdapter:Ur};function no(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return P(this,n)}}function ro(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var io=new WeakMap,oo=function(e){z(n,e);var t=no(n);function n(e){var r;I(this,n),ro(B(r=t.call(this)),io,{writable:!0,value:void 0});var i=0;return q(B(r),io,e),window.addEventListener("message",r.onMessage.bind(B(r))),Object.defineProperties(B(r),{queueID:{get:function(){return i>=Number.MAX_SAFE_INTEGER?i=0:i++},configurable:!1}}),r}return R(n,[{key:"onMessage",value:function(e){var t=e.data,n=t.$notify?"$notify":t.$return?t.$queueID?"$return.".concat(t.$return,".").concat(t.$queueID):"$return.".concat(t.$return):void 0;n&&this.dispatchEvent(new CustomEvent(n,{detail:t}))}},{key:"postMessageRaw",value:function(e){U(this,io).postMessage(e)}},{key:"postMessage",value:function(e,t){U(this,io).postMessage(Object.assign({command:e},t))}},{key:"sendMessage",value:function(e,t,r){var i=this;return new Promise((function(o,a){var s="".concat(Date.now(),".").concat(i.queueID),c="$return.".concat(e,".").concat(s),u={event:c,resolve:o,reject:a,site:i},l=n.onResultReturn.bind(u);u.fn=l,r>0&&(u.timerID=setTimeout(n.onTimeOut,r,u)),i.addEventListener(c,l,{once:!0}),i.postMessage(e,Object.assign({},t,{$queueID:s}))}))}},{key:"notifySaveByHost",value:function(){return this.sendMessage("execCommand",{hostCommand:"workbench.action.files.save"})}}],[{key:"onTimeOut",value:function(e){var t;null===(t=e.site)||void 0===t||t.removeEventListener(e.event,e.fn),e.timerID=void 0,"function"==typeof e.reject&&e.reject()}},{key:"onResultReturn",value:function(e){this.timerID&&(clearTimeout(this.timerID),this.timerID=void 0),"function"==typeof this.resolve&&this.resolve(e.detail)}}]),n}(yt(EventTarget)),ao=Object.assign({},y.exports.DefaultTopicEventActions);function so(e,t){e&&t&&(ao[e]=t)}function co(e){e&&delete ao[e]}function uo(){return lo.apply(this,arguments)}function lo(){return(lo=n(c.mark((function e(){var t,n;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tr();case 2:return t=e.sent,e.next=5,$felisApp.callAction("dumpMindmap-toBlob",".felis",!0);case 5:return n=e.sent,e.next=8,zr("last-document",{filePath:t,blob:n,currentSheetID:$felisApp.view.sheetID,defaultSheets:Ln.DefaultTemplateSheets,defaultTopic:Ln.DefaultTopicTemplate,defaultAttachments:Ln.DefaultTemplateAttachments});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(e){return po.apply(this,arguments)}function po(){return po=n(c.mark((function e(t){var r,i,o,a,s,u,l,f,p,h;return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="function"==typeof acquireVsCodeApi?acquireVsCodeApi():void 0,console.log(i?"in vscode mode":"in normal web mode"),i&&Mr(new oo(i)),N.config({loader:"./locales/"}),e.t0=N,e.next=7,Or();case 7:return e.t1=e.sent,e.next=10,e.t0.setLocale.call(e.t0,e.t1);case 10:return N.enableRecord=!0,t.tip=N("Loading")+"...",M(o={},to),Object.defineProperties(window,{$felisApp:{get:function(){return o},enumerable:!0,configurable:!1}}),a=new zn,M(o,{env:a,LibMindmap:M({},Object.assign({DocumentClass:Ln,ViewerClass:Qr,EnvironmentClass:zn},x))}),s=new Ln(a),u=new Qr(s,document.querySelector(".mindmap-viewer")),l=new Zi(document.querySelector(".mindmap-menubar")),M(o,{doc:s,view:u,menu:l,FileFormats:gn,registerTopicComponent:ri,unregisterTopicComponent:ii,registerTopicEditTiriggerAction:so,unregisterTopicEditTiriggerAction:co}),to.registerAction("backupWorkspaceInBrowser",uo),(r=a.extensionFactors).push.apply(r,m(y.exports.DefaultTopicExtensions)),a.extensionFactors.forEach((function(e){e.register(u)})),Qi.register(u),a.addEventListener("topic-event-edit",y.exports.MindmapViewer.dispatchTopicEventAction.bind(ao)),a.addEventListener("topic-event-trigger",(function(e){y.exports.MindmapViewer.dispatchTopicEventAction.call(ao,e)||(e.detail&&(e.detail.triggerContentType=void 0),ai(u))})),a.addEventListener("topic-event-end-dragdrop",(function(){ai(u)})),e.next=30,Ai();case 30:return e.next=32,Si();case 32:return e.next=34,Tr();case 34:if(!(f=e.sent)){e.next=44;break}return t.tip="".concat(N("Open file"),"\n").concat(f),e.next=39,mr();case 39:p=e.sent,t.close(),p instanceof Blob?o.callAction("openMindmap-detail",f,p):s.newDocument(),e.next=60;break;case 44:if(t.close(),e.t2=!i,!e.t2){e.next=50;break}return e.next=49,Rr("last-document");case 49:e.t2=e.sent;case 50:if(!((h=e.t2)&&h.blob instanceof Blob)){e.next=59;break}return Ln.SetTemplateDetail(h.defaultSheets,h.defaultTopic,h.defaultAttachments),e.next=55,Promise.resolve(o.callAction("openMindmap-detail",(h.filePath||"")+".felis",h.blob));case 55:Lr(h.filePath||""),h.currentSheetID&&o.doc.switchToSheet(h.currentSheetID),e.next=60;break;case 59:o.callAction("newFile-detail");case 60:window.addEventListener("visibilitychange",n(c.mark((function e(){return c.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("hidden"!==document.visibilityState){e.next=7;break}if(e.t0=!i,!e.t0){e.next=5;break}return e.next=5,uo();case 5:e.next=8;break;case 7:a.fireEvent("topic-event-refresh-display");case 8:case"end":return e.stop()}}),e)})))),!i&&a.addEventListener("topic-event-new-document",(function(){return Promise.resolve().then(uo)})),window.$env=a,window.$doc=s,window.$view=u,window.$svg=document.querySelector("svg"),window.$i18n=N,window.$host=i;case 68:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function ho(){var e=Pi("Loading...");h.start("./sw.js",{scope:"./"}).catch((function(e){console.error("$[Service worker registration failed]",e)})).finally(n(c.mark((function t(){return c.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fo(e);case 2:e.close();case 3:case"end":return t.stop()}}),t)}))))}return document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&ho()})),ho}));
//# sourceMappingURL=index.js.map
