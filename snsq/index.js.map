{"version":3,"file":"index.js","sources":["../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../node_modules/@babel/runtime/regenerator/index.js","../../src/index.js"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","module.exports = require(\"regenerator-runtime\");\n","import JSZip from \"jszip\";\r\n\r\nfunction showTip(_msg) {\r\n    let element = showTip.$element;\r\n    if (element instanceof HTMLElement) {\r\n        element.innerHTML = String(_msg).replace(\"\\n\", \"<br />\");\r\n        element.style.display = \"\";\r\n        setTimeout(() => {\r\n            element.style.display = \"none\";\r\n            element.innerHTML = \"\";\r\n        }, 1700);\r\n    }\r\n}\r\n\r\nfunction checkIsLandscape() {\r\n    if (window.orientation !== undefined) {\r\n        switch(window.orientation){\r\n            case 90:\r\n            case -90:\r\n                return true;\r\n                break;\r\n            default:\r\n                return false;\r\n                break;\r\n        }\r\n    } else if (screen.orientation !== undefined) {\r\n        return String(screen.orientation.type).startsWith(\"landscape-\");\r\n    } else {\r\n        return (window.innerWidth > window.innerHeight);\r\n    }\r\n}\r\n\r\nclass IDB {\r\n    constructor (_name, _opt = {}) {\r\n        let dbRequest = indexedDB.open(_name, _opt.version);\r\n        dbRequest.onupgradeneeded = (e) => {\r\n            let db = (this.db = e.target.result);\r\n            if (_opt.tables) {\r\n                for (let key in _opt.tables) {\r\n                    if (!db.objectStoreNames.contains(key)) {\r\n                        let tabOpt = _opt.tables[key];\r\n                        db.createObjectStore(key, ((typeof tabOpt === \"string\") ? { keyPath: tabOpt } : (tabOpt || { autoIncrement: true })));\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        dbRequest.onsuccess = (e) => {\r\n            this.db =  e.target.result;\r\n        }\r\n    }\r\n\r\n    static generateIterator(_table, _host, _keys, _writable) {\r\n        if (!(_host instanceof IDB) || (!_host.db) || !(_keys instanceof Array)) return;\r\n\r\n        let ret = {};\r\n        let index = 0;\r\n        Object.defineProperty(ret, \"length\", {\r\n            get: function () { return _keys.length; }\r\n        });\r\n        ret.reset = function () {\r\n            index = 0;\r\n        };\r\n        ret.next = function () {\r\n            return new Promise(function (resolve) {\r\n                if ((index < 0) || (index >= _keys.length)) {\r\n                    resolve(undefined);\r\n                } else {\r\n                    let request = _host.db.transaction(_table, (_writable ? \"readwrite\" : \"readonly\"))\r\n                                    .objectStore(_table)\r\n                                    .get(_keys[index++]);\r\n                    request.onsuccess = function (e) {\r\n                        resolve({\r\n                            key: _keys[index - 1],\r\n                            index,\r\n                            value: e.target.result\r\n                        });\r\n                    };\r\n                    request.onerror = function (e) {\r\n                        resolve(undefined);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        ret.prev = function () {\r\n            return new Promise(function (resolve) {\r\n                index--;\r\n                if ((index < 0) || (index >= _keys.length)) {\r\n                    index = 0;\r\n                    resolve(undefined);\r\n                } else {\r\n                    let request = _host.db.transaction(_table, (_writable ? \"readwrite\" : \"readonly\"))\r\n                                    .objectStore(_table)\r\n                                    .get(_keys[index]);\r\n                    request.onsuccess = function (e) {\r\n                        resolve({\r\n                            key: _keys[index],\r\n                            index,\r\n                            value: e.target.result\r\n                        });\r\n                    };\r\n                    request.onerror = function (e) {\r\n                        resolve(undefined);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        ret.get = function (_index) {\r\n            return new Promise(function (resolve) {\r\n                if ((_index < 0) || (_index >= _keys.length)) {\r\n                    resolve(undefined);\r\n                } else {\r\n                    index = _index;\r\n                    let request = _host.db.transaction(_table, (_writable ? \"readwrite\" : \"readonly\"))\r\n                                    .objectStore(_table)\r\n                                    .get(_keys[index]);\r\n                    request.onsuccess = function (e) {\r\n                        resolve({\r\n                            key: _keys[index],\r\n                            index,\r\n                            value: e.target.result\r\n                        });\r\n                    };\r\n                    request.onerror = function (e) {\r\n                        resolve(undefined);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n\r\n        return ret;\r\n    }\r\n\r\n    add(_table, _data) {\r\n        return new Promise(resolve => {\r\n            if (this.db) {\r\n                let request = this.db.transaction(_table, \"readwrite\")\r\n                    .objectStore(_table)\r\n                    .add(_data);\r\n                request.onsuccess = () => resolve(this);\r\n                request.onerror = () => resolve(undefined);\r\n            } else {\r\n                resolve(undefined);\r\n            }\r\n        });\r\n    }\r\n\r\n    clear(_table) {\r\n        return new Promise(resolve => {\r\n            if (this.db) {\r\n                let request = this.db.transaction(_table, \"readwrite\")\r\n                    .objectStore(_table)\r\n                    .clear();\r\n                request.onsuccess = () => resolve(this);\r\n                request.onerror = () => resolve(undefined);\r\n            } else {\r\n                resolve(undefined);\r\n            }\r\n        });\r\n    }\r\n\r\n    getReader(_table) {\r\n        return new Promise(resolve => setTimeout(() => {\r\n            if (this.db) {\r\n                let request = this.db.transaction(_table).objectStore(_table).getAllKeys();\r\n                request.onsuccess = (e) => {\r\n                    resolve(IDB.generateIterator(_table, this, e.target.result, false));\r\n                };\r\n                request.onerror = (e) => {\r\n                    resolve(undefined);\r\n                };\r\n            } else {\r\n                resolve(undefined);\r\n            }\r\n        }, 500));\r\n    }\r\n}\r\n\r\nclass SnsqCT {\r\n    constructor () {\r\n        this.$stream = undefined;\r\n        this.$user = true;\r\n        this.$rec = undefined;\r\n        this.$db = new IDB(\"snsq\", {\r\n            tables: {\r\n                zssz: null\r\n            }\r\n        });\r\n    }\r\n\r\n    async switch(_isUser) {\r\n        try {\r\n            this.$user = (_isUser === undefined) ? (!this.$user) : (_isUser);\r\n            const facingMode = (this.$user ? 'user' : 'environment');\r\n            const cx = {\r\n                min: 1280,\r\n                ideal: 1920,\r\n                max: 4032,\r\n            };\r\n            const cy = {\r\n                min: 720,\r\n                ideal: 1080,\r\n                max: 3024,\r\n            };\r\n            const constraints = { \r\n                video: (checkIsLandscape() ? { width: cx, height: cy, facingMode } : { width: cy, height: cx, facingMode} ),\r\n                audio: false\r\n            };\r\n            showTip(`${checkIsLandscape()}\\n${JSON.stringify(constraints)}`);\r\n            this.$stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n\r\n            return this;\r\n        } catch (err) {\r\n            console.log(err);\r\n            alert(err.message || err.toString());\r\n        }\r\n    }\r\n\r\n    async start() {\r\n        return new Promise(r => {\r\n            if (this.$stream && (!this.$rec)) {\r\n                let rec = (this.$rec = new MediaRecorder(this.$stream, {\r\n                    audioBitsPerSecond : 128000,\r\n                    videoBitsPerSecond : 10000000\r\n                }));\r\n                rec.ondataavailable = function (e) {\r\n                    if (typeof e.target.$resolve === \"function\") {\r\n                        e.target.$resolve(e.data);\r\n                        e.target.$resolve = undefined;\r\n                    }\r\n                };\r\n                rec.start();\r\n\r\n                r(this);\r\n            } else {\r\n                r(undefined);\r\n            }\r\n        });\r\n    }\r\n\r\n    stop() {\r\n        if (this.$rec) try {\r\n            this.$rec.stop();\r\n            delete this.$rec;\r\n            this.$rec = undefined;\r\n        } catch {\r\n\r\n        }\r\n        if (this.$stream) {\r\n            this.$stream.getTracks().forEach((track) => {\r\n                track.stop();\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n\r\n    async capture() {\r\n        return new Promise(r => {\r\n            const rec = this.$rec;\r\n            if (rec && (!rec.$resolve)) {\r\n                rec.$resolve = r;\r\n                rec.stop();\r\n            } else {\r\n                r(undefined);\r\n            }\r\n        }).then(blob => {\r\n            console.log(\"C2:\", blob);\r\n            if (blob) {\r\n                console.log(this);\r\n                let reader = new FileReader();\r\n                reader.readAsArrayBuffer(blob);\r\n                reader.onload = () => {\r\n                    this.$db.add(\"zssz\", reader.result);\r\n                }\r\n                this.$rec.start();\r\n                return this;\r\n            }\r\n        });\r\n    }\r\n\r\n    clear() {\r\n        this.$db.clear(\"zssz\");\r\n        return this;\r\n    }\r\n\r\n    getItems() {\r\n        return this.$db.getReader(\"zssz\");\r\n    }\r\n}\r\n\r\nfunction generate() {\r\n    return (window.$snsq || (window.$snsq = new SnsqCT()));\r\n}\r\n\r\nfunction onCtrlStart(_event) {\r\n    const ctrl = (this.$ctrl = {});\r\n    const list = _event.touches;\r\n    for (let i = 0; i < list.length; i++) {\r\n        let item = list.item(i);\r\n        ctrl[item.identifier] = { x: item.screenX, y: item.screenY };\r\n    }\r\n}\r\n\r\nfunction onCtrlEnd(_event) {\r\n    const ctrl = (this.$ctrl || {});\r\n    const list = _event.changedTouches;\r\n    for (let i = 0; i < list.length; i++) {\r\n        let item = list.item(i);\r\n        let ori = ctrl[item.identifier];\r\n        let snsq = generate();\r\n        if (ori && (ori.y != item.screenY) && snsq.$zssz) {\r\n            snsq.capture().then((snsq) => {\r\n                if (snsq) {\r\n                    console.log(\"ok\");\r\n                    let flag = (this.$snsqcc = ((Number(this.$snsqcc) || 0) ^ 1));\r\n                    this.mask.style.borderColor = (flag ? \"#09f\" : \"#f90\");\r\n                } else {\r\n                    let oriColor = this.mask.style.borderColor;\r\n                    this.mask.style.borderColor = \"#000\";\r\n                    setTimeout(() => {\r\n                        this.mask.style.borderColor = \"#fff\";\r\n                        setTimeout(() => {\r\n                            this.mask.style.borderColor = oriColor;\r\n                        }, 500);\r\n                    }, 500);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nfunction downloadZip(snsq) {\r\n    snsq.getItems().then(items => {\r\n        if (!snsq || !items) {\r\n            alert(\"None 3\");\r\n        } else {\r\n            let zip = new JSZip();\r\n            let procItem = function (item) {\r\n                if (item) {\r\n                    zip.file(`${item.key}.mp4`, item.value);\r\n                    items.next().then(procItem);\r\n                } else {\r\n                    showTip(\"wakeup 2\");\r\n                    zip.generateAsync({type:\"blob\"}).then(function (file) {\r\n                        let url = URL.createObjectURL(file);\r\n                        let a = document.createElement(\"a\");\r\n                        a.style = \"display: none\";\r\n                        a.href = url;\r\n                        a.download = \"snsq.zip\";\r\n                        a.click();\r\n                        URL.revokeObjectURL(url);\r\n                    });\r\n                }\r\n            };\r\n            items.next().then(procItem);\r\n            showTip(\"wakeup 1\");\r\n        }\r\n    });\r\n}\r\n\r\nwindow.$click = function () {\r\n    generate().stop().$zssz = false;\r\n};\r\n\r\nexport function checkUrl(_url, _uiObj) {\r\n    if (_uiObj && _uiObj.main && (!_uiObj.main.$snsq)) {\r\n        _uiObj.main.addEventListener(\"touchstart\", onCtrlStart.bind(_uiObj));\r\n        _uiObj.main.addEventListener(\"touchend\", onCtrlEnd.bind(_uiObj));\r\n        _uiObj.main.$snsq = true;\r\n    }\r\n\r\n    showTip.$element = _uiObj.testBox;\r\n\r\n    let snsq = generate();\r\n\r\n    if (_url === \"17264657\") {\r\n        downloadZip(snsq);\r\n    } else {\r\n        _uiObj.testBox.style.display = \"none\";\r\n        if (_url === \"@snsq\") {    \r\n            snsq.switch(false).then(ret => {\r\n                ret ? snsq.start().then(ret => {\r\n                    if (ret) {\r\n                        snsq.$zssz = true;\r\n                        _uiObj.mask.style.borderColor = \"#90f\";\r\n                    } else {\r\n                        alert(\"None 2\");\r\n                    }\r\n                }) : alert(\"None 1\");\r\n            });\r\n        } else if (_url === \"@zssz\") {\r\n            snsq.clear();\r\n        } else {\r\n            // snsq.stop().$zssz = false;\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return false;\r\n}\r\n"],"names":["require$$0","showTip","_msg","element","$element","HTMLElement","innerHTML","String","replace","style","display","setTimeout","checkIsLandscape","window","orientation","undefined","screen","type","startsWith","innerWidth","innerHeight","IDB","_name","_opt","dbRequest","indexedDB","open","version","onupgradeneeded","e","db","target","result","tables","key","objectStoreNames","contains","tabOpt","createObjectStore","keyPath","autoIncrement","onsuccess","_table","_data","Promise","resolve","request","transaction","objectStore","add","onerror","clear","getAllKeys","generateIterator","_host","_keys","_writable","Array","ret","index","Object","defineProperty","get","length","reset","next","value","prev","_index","SnsqCT","$stream","$user","$rec","$db","zssz","_isUser","facingMode","cx","min","ideal","max","cy","constraints","video","width","height","audio","JSON","stringify","navigator","mediaDevices","getUserMedia","console","log","alert","message","toString","r","rec","MediaRecorder","audioBitsPerSecond","videoBitsPerSecond","ondataavailable","$resolve","data","start","stop","getTracks","forEach","track","then","blob","reader","FileReader","readAsArrayBuffer","onload","getReader","generate","$snsq","onCtrlStart","_event","ctrl","$ctrl","list","touches","i","item","identifier","x","screenX","y","screenY","onCtrlEnd","changedTouches","ori","snsq","$zssz","capture","flag","$snsqcc","Number","mask","borderColor","oriColor","downloadZip","getItems","items","zip","JSZip","procItem","file","generateAsync","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","$click","checkUrl","_url","_uiObj","main","addEventListener","bind","testBox"],"mappings":"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"}